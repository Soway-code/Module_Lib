###############################################################################
#
# IAR ANSI C/C++ Compiler V8.50.4.261/W32 for ARM         10/Jan/2021  16:10:16
# Copyright 1999-2020 IAR Systems AB.
#
#    Cpu mode                        
#    Endian                       =  little
#    Source file                  =
#        C:\Users\macanlin\Desktop\GD_modbus\Weight_F3_CarV1.1.5_ADXL345
#        -1-9\Source\APP\LoadTask.c
#    Command line                 =
#        -f C:\Users\macanlin\AppData\Local\Temp\EWD7CA.tmp
#        ("C:\Users\macanlin\Desktop\GD_modbus\Weight_F3_CarV1.1.5_ADXL345
#        -1-9\Source\APP\LoadTask.c" -D USE_STDPERIPH_DRIVER -D STM32F072 -lC
#        "C:\Users\macanlin\Desktop\GD_modbus\Weight_F3_CarV1.1.5_ADXL345
#        -1-9\Project\Debug\List" -o
#        "C:\Users\macanlin\Desktop\GD_modbus\Weight_F3_CarV1.1.5_ADXL345
#        -1-9\Project\Debug\Obj" --no_cse --no_unroll --no_inline
#        --no_code_motion --no_tbaa --no_clustering --no_scheduling --debug
#        --endian=little --cpu=Cortex-M0 -e --fpu=None --dlib_config
#        C:\rj\IAR\arm\inc\c\DLib_Config_Normal.h -I
#        "C:\Users\macanlin\Desktop\GD_modbus\Weight_F3_CarV1.1.5_ADXL345
#        -1-9\Project\..\Source\BSP\inc\\" -I
#        "C:\Users\macanlin\Desktop\GD_modbus\Weight_F3_CarV1.1.5_ADXL345
#        -1-9\Project\..\Source\FWLib\inc\\" -I
#        "C:\Users\macanlin\Desktop\GD_modbus\Weight_F3_CarV1.1.5_ADXL345
#        -1-9\Project\..\Source\CMSIS\\" -I
#        "C:\Users\macanlin\Desktop\GD_modbus\Weight_F3_CarV1.1.5_ADXL345
#        -1-9\Project\..\Source\System\OS_Cfg\\" -I
#        "C:\Users\macanlin\Desktop\GD_modbus\Weight_F3_CarV1.1.5_ADXL345
#        -1-9\Project\..\Source\System\uC-CPU\\" -I
#        "C:\Users\macanlin\Desktop\GD_modbus\Weight_F3_CarV1.1.5_ADXL345
#        -1-9\Project\..\Source\System\uC-LIB\\" -I
#        "C:\Users\macanlin\Desktop\GD_modbus\Weight_F3_CarV1.1.5_ADXL345
#        -1-9\Project\..\Source\System\uCOS-III\Ports\\" -I
#        "C:\Users\macanlin\Desktop\GD_modbus\Weight_F3_CarV1.1.5_ADXL345
#        -1-9\Project\..\Source\System\uCOS-III\Source\\" -I
#        "C:\Users\macanlin\Desktop\GD_modbus\Weight_F3_CarV1.1.5_ADXL345
#        -1-9\Project\..\Source\APP\inc\\" -I
#        "C:\Users\macanlin\Desktop\GD_modbus\Weight_F3_CarV1.1.5_ADXL345
#        -1-9\Project\..\Source\FWLib\\" -I
#        "C:\Users\macanlin\Desktop\GD_modbus\Weight_F3_CarV1.1.5_ADXL345
#        -1-9\Project\..\Source\System\uC-LIB\\" -Ol -I
#        C:\rj\IAR\arm\CMSIS\Core\Include\\ -I
#        C:\rj\IAR\arm\CMSIS\DSP\Include\\)
#    Locale                       =  C
#    List file                    =
#        C:\Users\macanlin\Desktop\GD_modbus\Weight_F3_CarV1.1.5_ADXL345
#        -1-9\Project\Debug\List\LoadTask.lst
#    Object file                  =
#        C:\Users\macanlin\Desktop\GD_modbus\Weight_F3_CarV1.1.5_ADXL345
#        -1-9\Project\Debug\Obj\LoadTask.o
#    Runtime model:                  
#      __SystemLibrary            =  DLib
#      __dlib_file_descriptor     =  0
#      __dlib_full_locale_support =  0
#      __dlib_version             =  6
#
###############################################################################

C:\Users\macanlin\Desktop\GD_modbus\Weight_F3_CarV1.1.5_ADXL345 -1-9\Source\APP\LoadTask.c
      1          /************************************************************************************************************************************************************************
      2          ** 版权：   2015-2025, 深圳市信为科技发展有限公司
      3          ** 文件名:  LoadTask.c
      4          ** 作者:    陈锦
      5          ** 版本:    V1.0.0
      6          ** 日期:    2015-09-30
      7          ** 描述:    载重任务处理
      8          ** 功能:         
      9          *************************************************************************************************************************************************************************
     10          ** 修改者:          No
     11          ** 版本:  		
     12          ** 修改内容:    No 
     13          ** 日期:            No
     14          *************************************************************************************************************************************************************************/
     15          
     16          #include "LoadTask.h"
     17          

   \                                 In section .bss, align 4
     18          u16 g_wEmptyBuffer[LOAD_DATA_FIFO_NUM]; //空载学习保存FIFO
   \                     g_wEmptyBuffer:
   \        0x0                      DS8 20

   \                                 In section .bss, align 4
     19          u16 g_wFullBuffer[LOAD_DATA_FIFO_NUM];  //满载学习保存FIFO
   \                     g_wFullBuffer:
   \        0x0                      DS8 20

   \                                 In section .bss, align 1
     20          u8  g_cyWorkState;                       //工作状态
   \                     g_cyWorkState:
   \        0x0                      DS8 1

   \                                 In section .bss, align 1
     21          u8  g_cyStudyState;                    //学习状态
   \                     g_cyStudyState:
   \        0x0                      DS8 1

   \                                 In section .bss, align 1
     22          u8  g_cyRecordShovelNum;                //记录铲数
   \                     g_cyRecordShovelNum:
   \        0x0                      DS8 1
     23          
     24          extern u8 g_cyCtrlFlag; //控制标准  1：只有速度， 2：有速度，有篷布状态 3：有速度，有篷布状态，有电子围栏
     25          extern u8 g_cyCarState; //车状态 0x00表示停车，0x01表示行驶
     26          extern u8 g_cyPbState;  //篷布状态 0x00表示篷布打开，0x01表示篷布关闭；
     27          extern u8 g_cyElState;  //电子围栏状态 0x00表示车辆停车场，0x01表示渣土装载区，0x02表示渣土卸载区，0x03表示其他区域
     28          

   \                                 In section .bss, align 2
     29          u16 g_wEmptyValue;                      //空载值
   \                     g_wEmptyValue:
   \        0x0                      DS8 2

   \                                 In section .bss, align 2
     30          u16 g_wFullValue;                       //满载值
   \                     g_wFullValue:
   \        0x0                      DS8 2

   \                                 In section .bss, align 4
     31          float g_fVarianceValue;                 //方差值
   \                     g_fVarianceValue:
   \        0x0                      DS8 4

   \                                 In section .bss, align 2
     32          u16 g_wRatedValue;                      //额定满量程
   \                     g_wRatedValue:
   \        0x0                      DS8 2

   \                                 In section .bss, align 4
     33          float g_fOverValueK;                    //超载值系数
   \                     g_fOverValueK:
   \        0x0                      DS8 4
     34          

   \                                 In section .bss, align 1
     35          u8  g_cyCurrentShovelNum = 0;               //当前铲数
   \                     g_cyCurrentShovelNum:
   \        0x0                      DS8 1

   \                                 In section .bss, align 1
     36          u8 g_cyShovelDTime = 0;                  //铲与铲之间延迟时间                        
   \                     g_cyShovelDTime:
   \        0x0                      DS8 1
     37          
     38          #define MAX_FIFO_RECORD_NUM   10        //采集数据
     39          #define MAX_STUDY_NUM         30         //一次状态最大记录

   \                                 In section .bss, align 4
     40          static u16 g_wFifoBuffer[MAX_FIFO_RECORD_NUM];      //采集数据
   \                     g_wFifoBuffer:
   \        0x0                      DS8 20

   \                                 In section .bss, align 1
     41          static u8  g_cyFifoCnt;                 			//采集数据累计
   \                     g_cyFifoCnt:
   \        0x0                      DS8 1

   \                                 In section .bss, align 4
     42          static u16 g_wCurrentStateBuffer[MAX_STUDY_NUM];    //一次状态的学习成功数据
   \                     g_wCurrentStateBuffer:
   \        0x0                      DS8 60

   \                                 In section .bss, align 1
     43          static u8  g_cyCurrentStateCnt;         			//一次状态的学习成功次数
   \                     g_cyCurrentStateCnt:
   \        0x0                      DS8 1

   \                                 In section .bss, align 1
     44          u8  g_cyOverFlag;                			//超载标志
   \                     g_cyOverFlag:
   \        0x0                      DS8 1
     45          
     46          #define MAX_CHECK_NUM   10

   \                                 In section .bss, align 4
     47          static u16 g_wCheckBuffer[MAX_CHECK_NUM];          //检测数据
   \                     g_wCheckBuffer:
   \        0x0                      DS8 20

   \                                 In section .bss, align 1
     48          static u8 g_cyCheckCnt;                            //检测计数
   \                     g_cyCheckCnt:
   \        0x0                      DS8 1
     49          

   \                                 In section .bss, align 1
     50          static u8 g_cyVarianceFlag = false;                 //方差值标志
   \                     g_cyVarianceFlag:
   \        0x0                      DS8 1

   \                                 In section .bss, align 1
     51          static u8 g_cyShovelFlag = false;                   //铲标志
   \                     g_cyShovelFlag:
   \        0x0                      DS8 1

   \                                 In section .bss, align 1
     52          static u8 g_cyShovelWaitCnt;                       //铲延时计数
   \                     g_cyShovelWaitCnt:
   \        0x0                      DS8 1

   \                                 In section .bss, align 2
     53          static u16  g_wUnloadCnt = 0;                        //卸载计数
   \                     g_wUnloadCnt:
   \        0x0                      DS8 2
     54          
     55          #define MAX_LOAD_AD_NUM 600                         //延迟30秒处理数据
     56          #define GET_START_DATA_NUM  10                      //获取数据开始编号

   \                                 In section .bss, align 4
     57          static u16 g_wLoadADBuffer[MAX_LOAD_AD_NUM];        //采集AD数据缓存
   \                     g_wLoadADBuffer:
   \        0x0                      DS8 1'200

   \                                 In section .bss, align 2
     58          static u16 g_wLoadADCnt = 0;                       //采集AD计算器
   \                     g_wLoadADCnt:
   \        0x0                      DS8 2
     59          

   \                                 In section .bss, align 1
     60          static u8 g_cyExitFlag;                            //卸载成功退出标志
   \                     g_cyExitFlag:
   \        0x0                      DS8 1
     61          

   \                                 In section .bss, align 1
     62          static u8 g_cyCheckFullFlag;                       //检测满载值标志
   \                     g_cyCheckFullFlag:
   \        0x0                      DS8 1

   \                                 In section .bss, align 2
     63          static u8 g_cyRunFullCnt[2];
   \                     g_cyRunFullCnt:
   \        0x0                      DS8 2
     64          

   \                                 In section .bss, align 2
     65          static u16 g_wIdleWait100Ms;
   \                     g_wIdleWait100Ms:
   \        0x0                      DS8 2
     66          

   \                                 In section .bss, align 2
     67          u16 g_wDlyMaxTime;      //最大延时时间 0.1S 单位
   \                     g_wDlyMaxTime:
   \        0x0                      DS8 2
     68          
     69          
     70          //**************************************************************************************************
     71          // 名称         : LOAD_GetAverage()
     72          // 创建日期     : 2015-09-30
     73          // 作者         : 陈锦
     74          // 功能         : 求平均值
     75          // 输入参数     : 数据串(u16 *pWBuffer), 数据长度(u8 cyLen)
     76          // 输出参数     : 无
     77          // 返回结果     : 平均值
     78          // 注意和说明   :
     79          // 修改内容     :
     80          //**************************************************************************************************
     81          

   \                                 In section .text, align 2, keep-with-next
     82          u16 LOAD_GetAverage(u16 *pWBuffer, u8 cyLen)
     83          {
   \                     LOAD_GetAverage: (+1)
   \        0x0   0xB530             PUSH     {R4,R5,LR}
     84              u32 dwSum;
     85              u8 i;
     86              
     87              dwSum = 0;
   \        0x2   0x2300             MOVS     R3,#+0
   \        0x4   0x001A             MOVS     R2,R3
     88              for (i = 0; i < cyLen; i++)
   \        0x6   0xE006             B        ??LOAD_GetAverage_0
     89              {
     90                  dwSum += *(pWBuffer + i);
   \                     ??LOAD_GetAverage_1: (+1)
   \        0x8   0x001C             MOVS     R4,R3
   \        0xA   0xB2E4             UXTB     R4,R4
   \        0xC   0x2502             MOVS     R5,#+2
   \        0xE   0x436C             MULS     R4,R5,R4
   \       0x10   0x5B04             LDRH     R4,[R0, R4]
   \       0x12   0x1912             ADDS     R2,R2,R4
     91              }
   \       0x14   0x1C5B             ADDS     R3,R3,#+1
   \                     ??LOAD_GetAverage_0: (+1)
   \       0x16   0x001C             MOVS     R4,R3
   \       0x18   0x000D             MOVS     R5,R1
   \       0x1A   0xB2E4             UXTB     R4,R4
   \       0x1C   0xB2ED             UXTB     R5,R5
   \       0x1E   0x42AC             CMP      R4,R5
   \       0x20   0xD3F2             BCC      ??LOAD_GetAverage_1
     92              
     93              dwSum /= cyLen;
   \       0x22   0x0010             MOVS     R0,R2
   \       0x24   0xB2C9             UXTB     R1,R1
   \       0x26   0x....'....        BL       __aeabi_uidiv
     94              
     95              return ( (u16)dwSum);
   \       0x2A   0xB280             UXTH     R0,R0
   \       0x2C   0xBD30             POP      {R4,R5,PC}       ;; return
     96          }
     97          
     98          //**************************************************************************************************
     99          // 名称         : LOAD_FifoData()
    100          // 创建日期     : 2015-09-30
    101          // 作者         : 陈锦
    102          // 功能         : FIFO
    103          // 输入参数     : 数据串(u16 *pWBuffer), 数据(u16 wData), 数据长度(u16 wLen)
    104          // 输出参数     : 无
    105          // 返回结果     : 无
    106          // 注意和说明   : 把新进来的一个数据放在数组的最后一个位置
    107          // 修改内容     :
    108          //**************************************************************************************************
    109          

   \                                 In section .text, align 2, keep-with-next
    110          static void LOAD_FifoData(u16 *pWBuffer, u16 wData, u16 wLen)
    111          {
   \                     LOAD_FifoData: (+1)
   \        0x0   0xB570             PUSH     {R4-R6,LR}
    112              u16 i;
    113              
    114              for (i = 0; i < (wLen - 1); i++)
   \        0x2   0x2300             MOVS     R3,#+0
   \        0x4   0xE00B             B        ??LOAD_FifoData_0
    115              {
    116                  *(pWBuffer + i) = *(pWBuffer + i + 1);
   \                     ??LOAD_FifoData_1: (+1)
   \        0x6   0x001C             MOVS     R4,R3
   \        0x8   0xB2A4             UXTH     R4,R4
   \        0xA   0x2502             MOVS     R5,#+2
   \        0xC   0x4365             MULS     R5,R4,R5
   \        0xE   0x1944             ADDS     R4,R0,R5
   \       0x10   0x8864             LDRH     R4,[R4, #+2]
   \       0x12   0x001D             MOVS     R5,R3
   \       0x14   0xB2AD             UXTH     R5,R5
   \       0x16   0x2602             MOVS     R6,#+2
   \       0x18   0x436E             MULS     R6,R5,R6
   \       0x1A   0x5384             STRH     R4,[R0, R6]
    117              }
   \       0x1C   0x1C5B             ADDS     R3,R3,#+1
   \                     ??LOAD_FifoData_0: (+1)
   \       0x1E   0x001C             MOVS     R4,R3
   \       0x20   0xB2A4             UXTH     R4,R4
   \       0x22   0x0015             MOVS     R5,R2
   \       0x24   0xB2AD             UXTH     R5,R5
   \       0x26   0x1E6D             SUBS     R5,R5,#+1
   \       0x28   0x42AC             CMP      R4,R5
   \       0x2A   0xDBEC             BLT      ??LOAD_FifoData_1
    118              
    119              *(pWBuffer + i) = wData;
   \       0x2C   0xB29B             UXTH     R3,R3
   \       0x2E   0x2202             MOVS     R2,#+2
   \       0x30   0x435A             MULS     R2,R3,R2
   \       0x32   0x5281             STRH     R1,[R0, R2]
    120          }
   \       0x34   0xBD70             POP      {R4-R6,PC}       ;; return
    121          
    122          //**************************************************************************************************
    123          // 名称         : LOAD_GetPar()
    124          // 创建日期     : 2015-09-30
    125          // 作者         : 陈锦
    126          // 功能         : 获取参数
    127          // 输入参数     : 无
    128          // 输出参数     : 无
    129          // 返回结果     : 无
    130          // 注意和说明   :
    131          // 修改内容     :
    132          //**************************************************************************************************
    133          

   \                                 In section .text, align 2, keep-with-next
    134          void LOAD_GetPar(void)
    135          {	
   \                     LOAD_GetPar: (+1)
   \        0x0   0xB510             PUSH     {R4,LR}
    136              RunVar.LoadADValue = 1;
   \        0x2   0x20FE             MOVS     R0,#+254
   \        0x4   0x0580             LSLS     R0,R0,#+22       ;; #+1065353216
   \        0x6   0x....             LDR      R1,??DataTable2
   \        0x8   0x6008             STR      R0,[R1, #+0]
    137              
    138              g_cyFifoCnt = 0;
   \        0xA   0x2100             MOVS     R1,#+0
   \        0xC   0x....             LDR      R0,??DataTable2_1
   \        0xE   0x7001             STRB     R1,[R0, #+0]
    139              g_cyCurrentStateCnt = 0;
   \       0x10   0x....             LDR      R0,??DataTable2_2
   \       0x12   0x7001             STRB     R1,[R0, #+0]
    140              g_cyCheckCnt = 0;
   \       0x14   0x....             LDR      R0,??DataTable2_3
   \       0x16   0x7001             STRB     R1,[R0, #+0]
    141              
    142              g_cyStudyState = LOAD_NO_STUDY;
   \       0x18   0x....             LDR      R2,??DataTable2_4
   \       0x1A   0x7011             STRB     R1,[R2, #+0]
    143              
    144              if ( (0xFFFF == g_wEmptyBuffer[0]) && (0xFFFF == g_wFullBuffer[0]) )        //buffer中值为0xffff即为没学习过               
   \       0x1C   0x....             LDR      R3,??DataTable2_5  ;; 0xffff
   \       0x1E   0x....             LDR      R0,??DataTable2_6
   \       0x20   0x8804             LDRH     R4,[R0, #+0]
   \       0x22   0x429C             CMP      R4,R3
   \       0x24   0xD10D             BNE      ??LOAD_GetPar_0
   \       0x26   0x....             LDR      R4,??DataTable2_8
   \       0x28   0x8824             LDRH     R4,[R4, #+0]
   \       0x2A   0x429C             CMP      R4,R3
   \       0x2C   0xD109             BNE      ??LOAD_GetPar_0
    145              {
    146                  g_cyStudyState = LOAD_NO_STUDY;                                         //满载空载都没学习过
   \       0x2E   0x7011             STRB     R1,[R2, #+0]
    147                  g_wEmptyValue = 600;                                                    //空载初值600
   \       0x30   0x2096             MOVS     R0,#+150
   \       0x32   0x0080             LSLS     R0,R0,#+2        ;; #+600
   \       0x34   0x....             LDR      R1,??DataTable2_7
   \       0x36   0x8008             STRH     R0,[R1, #+0]
    148                  g_wFullValue = 2800;                                                    //满载初值2800
   \       0x38   0x20AF             MOVS     R0,#+175
   \       0x3A   0x0100             LSLS     R0,R0,#+4        ;; #+2800
   \       0x3C   0x....             LDR      R1,??DataTable2_16
   \       0x3E   0x8008             STRH     R0,[R1, #+0]
    149                  return; 
   \       0x40   0xE030             B        ??LOAD_GetPar_1
    150              }
    151              
    152              if (0xFFFF == g_wEmptyBuffer[0])
   \                     ??LOAD_GetPar_0: (+1)
   \       0x42   0x8801             LDRH     R1,[R0, #+0]
   \       0x44   0x4299             CMP      R1,R3
   \       0x46   0xD10E             BNE      ??LOAD_GetPar_2
    153              {
    154                  g_cyStudyState |= LOAD_FULL_STUDY;                                      //满载没学习过                                   
   \       0x48   0x7810             LDRB     R0,[R2, #+0]
   \       0x4A   0x2102             MOVS     R1,#+2
   \       0x4C   0x4301             ORRS     R1,R1,R0
   \       0x4E   0x7011             STRB     R1,[R2, #+0]
    155                  g_wFullValue = LOAD_GetAverage(g_wFullBuffer, LOAD_DATA_FIFO_NUM);      //我认为是空载没学习过
   \       0x50   0x210A             MOVS     R1,#+10
   \       0x52   0x....             LDR      R0,??DataTable2_8
   \       0x54   0x....'....        BL       LOAD_GetAverage
   \       0x58   0x....             LDR      R1,??DataTable2_16
   \       0x5A   0x8008             STRH     R0,[R1, #+0]
    156                  g_wEmptyValue = 600;                                                    //赋初值600
   \       0x5C   0x2096             MOVS     R0,#+150
   \       0x5E   0x0080             LSLS     R0,R0,#+2        ;; #+600
   \       0x60   0x....             LDR      R1,??DataTable2_7
   \       0x62   0x8008             STRH     R0,[R1, #+0]
    157                  return;
   \       0x64   0xE01E             B        ??LOAD_GetPar_1
    158              }
    159              
    160              if (0xFFFF == g_wFullBuffer[0])
   \                     ??LOAD_GetPar_2: (+1)
   \       0x66   0x....             LDR      R4,??DataTable2_8
   \       0x68   0x8821             LDRH     R1,[R4, #+0]
   \       0x6A   0x4299             CMP      R1,R3
   \       0x6C   0xD10D             BNE      ??LOAD_GetPar_3
    161              {
    162                  g_cyStudyState |= LOAD_EMPTY_STUDY;                                     //空载没学习过
   \       0x6E   0x7811             LDRB     R1,[R2, #+0]
   \       0x70   0x2301             MOVS     R3,#+1
   \       0x72   0x430B             ORRS     R3,R3,R1
   \       0x74   0x7013             STRB     R3,[R2, #+0]
    163                  g_wEmptyValue = LOAD_GetAverage(g_wEmptyBuffer, LOAD_DATA_FIFO_NUM);    //我认为是满载没学习过
   \       0x76   0x210A             MOVS     R1,#+10
   \       0x78   0x....'....        BL       LOAD_GetAverage
   \       0x7C   0x....             LDR      R1,??DataTable2_7
   \       0x7E   0x8008             STRH     R0,[R1, #+0]
    164                  g_wFullValue = 2800;                                                    //赋初值2800
   \       0x80   0x20AF             MOVS     R0,#+175
   \       0x82   0x0100             LSLS     R0,R0,#+4        ;; #+2800
   \       0x84   0x....             LDR      R1,??DataTable2_16
   \       0x86   0x8008             STRH     R0,[R1, #+0]
    165                  return;
   \       0x88   0xE00C             B        ??LOAD_GetPar_1
    166              }
    167              
    168              g_cyStudyState = LOAD_STUDY;                                                //都学习过   
   \                     ??LOAD_GetPar_3: (+1)
   \       0x8A   0x2103             MOVS     R1,#+3
   \       0x8C   0x7011             STRB     R1,[R2, #+0]
    169              g_wEmptyValue = LOAD_GetAverage(g_wEmptyBuffer, LOAD_DATA_FIFO_NUM);
   \       0x8E   0x210A             MOVS     R1,#+10
   \       0x90   0x....'....        BL       LOAD_GetAverage
   \       0x94   0x....             LDR      R1,??DataTable2_7
   \       0x96   0x8008             STRH     R0,[R1, #+0]
    170              g_wFullValue = LOAD_GetAverage(g_wFullBuffer, LOAD_DATA_FIFO_NUM);	
   \       0x98   0x210A             MOVS     R1,#+10
   \       0x9A   0x0020             MOVS     R0,R4
   \       0x9C   0x....'....        BL       LOAD_GetAverage
   \       0xA0   0x....             LDR      R1,??DataTable2_16
   \       0xA2   0x8008             STRH     R0,[R1, #+0]
    171          }
   \                     ??LOAD_GetPar_1: (+1)
   \       0xA4   0xBD10             POP      {R4,PC}          ;; return
    172          
    173          //**************************************************************************************************
    174          // 名称         : GetVariance()
    175          // 创建日期     : 2015-09-30
    176          // 作者         : 陈锦
    177          // 功能         : 计数方差值
    178          // 输入参数     : 数据串(u16 *pWBuffer), 数据长度(u8 cyLen)
    179          // 输出参数     : 无
    180          // 返回结果     : 计数方差值
    181          // 注意和说明   :
    182          // 修改内容     :
    183          //**************************************************************************************************
    184          
    185          //方差公式:
    186          //平均数: M = (x1 + x2 + ...+ x2)/n（n表示这组数据个数，x1、x2、x3……xn表示这组数据具体数值）
    187          //方差公式: S = ( (x1-M)^2 + (x2-M)^2 +...(xn-M)^2 ) / (n - 1)

   \                                 In section .text, align 2, keep-with-next
    188          float GetVariance(u16 *pWBuffer, u8 cyLen)
    189          {
   \                     GetVariance: (+1)
   \        0x0   0xB5F1             PUSH     {R0,R4-R7,LR}
   \        0x2   0xB082             SUB      SP,SP,#+8
   \        0x4   0x000C             MOVS     R4,R1
    190              float fTemp;
    191              float fSum;
    192              u8 i;
    193              
    194              fSum = 0;
   \        0x6   0x2500             MOVS     R5,#+0
    195              for (i = 0; i < cyLen; i++)
   \        0x8   0x2700             MOVS     R7,#+0
   \        0xA   0x003E             MOVS     R6,R7
   \        0xC   0xE00C             B        ??GetVariance_0
    196              {
    197                  fSum += *(pWBuffer + i);
   \                     ??GetVariance_1: (+1)
   \        0xE   0x9802             LDR      R0,[SP, #+8]
   \       0x10   0x0031             MOVS     R1,R6
   \       0x12   0xB2C9             UXTB     R1,R1
   \       0x14   0x2202             MOVS     R2,#+2
   \       0x16   0x4351             MULS     R1,R2,R1
   \       0x18   0x5A40             LDRH     R0,[R0, R1]
   \       0x1A   0x....'....        BL       __aeabi_ui2f
   \       0x1E   0x0029             MOVS     R1,R5
   \       0x20   0x....'....        BL       __aeabi_fadd
   \       0x24   0x0005             MOVS     R5,R0
    198              }
   \       0x26   0x1C76             ADDS     R6,R6,#+1
   \                     ??GetVariance_0: (+1)
   \       0x28   0x0030             MOVS     R0,R6
   \       0x2A   0x0021             MOVS     R1,R4
   \       0x2C   0xB2C0             UXTB     R0,R0
   \       0x2E   0xB2C9             UXTB     R1,R1
   \       0x30   0x4288             CMP      R0,R1
   \       0x32   0xD3EC             BCC      ??GetVariance_1
    199              
    200              fTemp = fSum / cyLen;
   \       0x34   0x0020             MOVS     R0,R4
   \       0x36   0xB2C0             UXTB     R0,R0
   \       0x38   0x....'....        BL       __aeabi_ui2f
   \       0x3C   0x0001             MOVS     R1,R0
   \       0x3E   0x0028             MOVS     R0,R5
   \       0x40   0x....'....        BL       __aeabi_fdiv
   \       0x44   0x0005             MOVS     R5,R0
    201              
    202              fSum = 0;
   \       0x46   0x2600             MOVS     R6,#+0
    203              for (i = 0; i < cyLen; i++)
   \       0x48   0xE01E             B        ??GetVariance_2
    204              {
    205                  fSum += (*(pWBuffer + i) - fTemp) * (*(pWBuffer + i) - fTemp);
   \                     ??GetVariance_3: (+1)
   \       0x4A   0x9802             LDR      R0,[SP, #+8]
   \       0x4C   0x0039             MOVS     R1,R7
   \       0x4E   0xB2C9             UXTB     R1,R1
   \       0x50   0x2202             MOVS     R2,#+2
   \       0x52   0x4351             MULS     R1,R2,R1
   \       0x54   0x5A40             LDRH     R0,[R0, R1]
   \       0x56   0x....'....        BL       __aeabi_ui2f
   \       0x5A   0x0029             MOVS     R1,R5
   \       0x5C   0x....'....        BL       __aeabi_fsub
   \       0x60   0x9000             STR      R0,[SP, #+0]
   \       0x62   0x9802             LDR      R0,[SP, #+8]
   \       0x64   0x0039             MOVS     R1,R7
   \       0x66   0xB2C9             UXTB     R1,R1
   \       0x68   0x2202             MOVS     R2,#+2
   \       0x6A   0x4351             MULS     R1,R2,R1
   \       0x6C   0x5A40             LDRH     R0,[R0, R1]
   \       0x6E   0x....'....        BL       __aeabi_ui2f
   \       0x72   0x0029             MOVS     R1,R5
   \       0x74   0x....'....        BL       __aeabi_fsub
   \       0x78   0x9900             LDR      R1,[SP, #+0]
   \       0x7A   0x....'....        BL       __aeabi_fmul
   \       0x7E   0x0031             MOVS     R1,R6
   \       0x80   0x....'....        BL       __aeabi_fadd
   \       0x84   0x0006             MOVS     R6,R0
    206              }
   \       0x86   0x1C7F             ADDS     R7,R7,#+1
   \                     ??GetVariance_2: (+1)
   \       0x88   0x0038             MOVS     R0,R7
   \       0x8A   0x0021             MOVS     R1,R4
   \       0x8C   0xB2C0             UXTB     R0,R0
   \       0x8E   0xB2C9             UXTB     R1,R1
   \       0x90   0x4288             CMP      R0,R1
   \       0x92   0xD3DA             BCC      ??GetVariance_3
    207              
    208              fSum /= (cyLen - 1);
   \       0x94   0xB2E4             UXTB     R4,R4
   \       0x96   0x1E64             SUBS     R4,R4,#+1
   \       0x98   0x0020             MOVS     R0,R4
   \       0x9A   0x....'....        BL       __aeabi_i2f
   \       0x9E   0x0001             MOVS     R1,R0
   \       0xA0   0x0030             MOVS     R0,R6
   \       0xA2   0x....'....        BL       __aeabi_fdiv
    209              
    210              return (fSum);
   \       0xA6   0xBDFE             POP      {R1-R7,PC}       ;; return
    211          }
    212          
    213          //**************************************************************************************************
    214          // 名称         : LOAD_CheckInstallShovel()
    215          // 创建日期     : 2015-09-30
    216          // 作者         : 陈锦
    217          // 功能         : 检测装车
    218          // 输入参数     : 无
    219          // 输出参数     : 无
    220          // 返回结果     : 成功(true 1, flase 0)
    221          // 注意和说明   :
    222          // 修改内容     :
    223          //**************************************************************************************************
    224          

   \                                 In section .text, align 2, keep-with-next
    225          static u8 LOAD_CheckInstallShovel(void)
    226          {
   \                     LOAD_CheckInstallShovel: (+1)
   \        0x0   0xB570             PUSH     {R4-R6,LR}
    227              float fTemp;
    228              float fTempVarianceValue;
    229              
    230              if (true == g_cyShovelFlag)                                                //铲标志置1，表示装铲成功         
   \        0x2   0x....             LDR      R5,??DataTable2_9
   \        0x4   0x7828             LDRB     R0,[R5, #+0]
   \        0x6   0x2801             CMP      R0,#+1
   \        0x8   0xD110             BNE      ??LOAD_CheckInstallShovel_0
    231              {
    232                  g_cyShovelWaitCnt++;
   \        0xA   0x....             LDR      R0,??DataTable2_17
   \        0xC   0x7801             LDRB     R1,[R0, #+0]
   \        0xE   0x1C49             ADDS     R1,R1,#+1
   \       0x10   0x7001             STRB     R1,[R0, #+0]
    233                  if (g_cyShovelDTime == g_cyShovelWaitCnt)                               //延迟10秒 每增加1 就是100ms  每100ms采集一次
   \       0x12   0x....             LDR      R1,??DataTable2_10
   \       0x14   0x7809             LDRB     R1,[R1, #+0]
   \       0x16   0x7800             LDRB     R0,[R0, #+0]
   \       0x18   0x4281             CMP      R1,R0
   \       0x1A   0xD105             BNE      ??LOAD_CheckInstallShovel_1
    234                  {                                                                       //g_cyShovelDTime=100    
    235                      g_cyShovelFlag = false;                                             //清零，重新检测铲
   \       0x1C   0x2000             MOVS     R0,#+0
   \       0x1E   0x7028             STRB     R0,[R5, #+0]
    236                      g_cyVarianceFlag = false;
   \       0x20   0x....             LDR      R1,??DataTable2_13
   \       0x22   0x7008             STRB     R0,[R1, #+0]
    237                      g_cyCheckCnt = 0;
   \       0x24   0x....             LDR      R1,??DataTable2_3
   \       0x26   0x7008             STRB     R0,[R1, #+0]
    238                  }
    239                  return (false);
   \                     ??LOAD_CheckInstallShovel_1: (+1)
   \       0x28   0x2000             MOVS     R0,#+0
   \       0x2A   0xE05D             B        ??LOAD_CheckInstallShovel_2
    240              }
    241              
    242              if (MAX_CHECK_NUM > g_cyCheckCnt)
   \                     ??LOAD_CheckInstallShovel_0: (+1)
   \       0x2C   0x....             LDR      R4,??DataTable2_3
   \       0x2E   0x7820             LDRB     R0,[R4, #+0]
   \       0x30   0x280A             CMP      R0,#+10
   \       0x32   0xDA0A             BGE      ??LOAD_CheckInstallShovel_3
    243              { 
    244                  g_wCheckBuffer[g_cyCheckCnt] = g_wLoadADBuffer[GET_START_DATA_NUM];     //取第10个值放入buffer
   \       0x34   0x....             LDR      R0,??DataTable2_12
   \       0x36   0x8A80             LDRH     R0,[R0, #+20]
   \       0x38   0x....             LDR      R1,??DataTable2_11
   \       0x3A   0x7822             LDRB     R2,[R4, #+0]
   \       0x3C   0x2302             MOVS     R3,#+2
   \       0x3E   0x435A             MULS     R2,R3,R2
   \       0x40   0x5288             STRH     R0,[R1, R2]
    245                  g_cyCheckCnt++;
   \       0x42   0x7820             LDRB     R0,[R4, #+0]
   \       0x44   0x1C40             ADDS     R0,R0,#+1
   \       0x46   0x7020             STRB     R0,[R4, #+0]
   \       0x48   0xE005             B        ??LOAD_CheckInstallShovel_4
    246              }
    247              else
    248              {                                                                           //FIFO放入buffer
    249                  LOAD_FifoData(g_wCheckBuffer, g_wLoadADBuffer[GET_START_DATA_NUM], MAX_CHECK_NUM);
   \                     ??LOAD_CheckInstallShovel_3: (+1)
   \       0x4A   0x220A             MOVS     R2,#+10
   \       0x4C   0x....             LDR      R0,??DataTable2_12
   \       0x4E   0x8A81             LDRH     R1,[R0, #+20]
   \       0x50   0x....             LDR      R0,??DataTable2_11
   \       0x52   0x....'....        BL       LOAD_FifoData
    250              }
    251              
    252              if ( ( 2 <= g_cyCheckCnt) && ( (g_wCheckBuffer[g_cyCheckCnt - 2] + 10) < g_wCheckBuffer[g_cyCheckCnt - 1] ) )
   \                     ??LOAD_CheckInstallShovel_4: (+1)
   \       0x56   0x7820             LDRB     R0,[R4, #+0]
   \       0x58   0x2802             CMP      R0,#+2
   \       0x5A   0xDB16             BLT      ??LOAD_CheckInstallShovel_5
   \       0x5C   0x....             LDR      R0,??DataTable2_11
   \       0x5E   0x7821             LDRB     R1,[R4, #+0]
   \       0x60   0x2202             MOVS     R2,#+2
   \       0x62   0x4351             MULS     R1,R2,R1
   \       0x64   0x1841             ADDS     R1,R0,R1
   \       0x66   0x1F09             SUBS     R1,R1,#+4
   \       0x68   0x8809             LDRH     R1,[R1, #+0]
   \       0x6A   0x310A             ADDS     R1,R1,#+10
   \       0x6C   0x7822             LDRB     R2,[R4, #+0]
   \       0x6E   0x2302             MOVS     R3,#+2
   \       0x70   0x435A             MULS     R2,R3,R2
   \       0x72   0x1880             ADDS     R0,R0,R2
   \       0x74   0x1E80             SUBS     R0,R0,#+2
   \       0x76   0x8800             LDRH     R0,[R0, #+0]
   \       0x78   0x4281             CMP      R1,R0
   \       0x7A   0xDA06             BGE      ??LOAD_CheckInstallShovel_5
    253              {
    254                  g_cyShovelFlag = true;                                                  //后一个值比前一个值大10，（装）铲成功
   \       0x7C   0x2001             MOVS     R0,#+1
   \       0x7E   0x7028             STRB     R0,[R5, #+0]
    255                  g_cyShovelWaitCnt = 0;
   \       0x80   0x2000             MOVS     R0,#+0
   \       0x82   0x....             LDR      R1,??DataTable2_17
   \       0x84   0x7008             STRB     R0,[R1, #+0]
    256                  return (true);
   \       0x86   0x2001             MOVS     R0,#+1
   \       0x88   0xE02E             B        ??LOAD_CheckInstallShovel_2
    257              }
    258              
    259              if ( ( 2 <= g_cyCheckCnt) && ( (g_wCheckBuffer[g_cyCheckCnt - 2] - 10) > g_wCheckBuffer[g_cyCheckCnt - 1] ) ) 
   \                     ??LOAD_CheckInstallShovel_5: (+1)
   \       0x8A   0x7820             LDRB     R0,[R4, #+0]
   \       0x8C   0x2802             CMP      R0,#+2
   \       0x8E   0xDB16             BLT      ??LOAD_CheckInstallShovel_6
   \       0x90   0x....             LDR      R0,??DataTable2_11
   \       0x92   0x7821             LDRB     R1,[R4, #+0]
   \       0x94   0x2202             MOVS     R2,#+2
   \       0x96   0x4351             MULS     R1,R2,R1
   \       0x98   0x1841             ADDS     R1,R0,R1
   \       0x9A   0x1E89             SUBS     R1,R1,#+2
   \       0x9C   0x8809             LDRH     R1,[R1, #+0]
   \       0x9E   0x7822             LDRB     R2,[R4, #+0]
   \       0xA0   0x2302             MOVS     R3,#+2
   \       0xA2   0x435A             MULS     R2,R3,R2
   \       0xA4   0x1880             ADDS     R0,R0,R2
   \       0xA6   0x1F00             SUBS     R0,R0,#+4
   \       0xA8   0x8800             LDRH     R0,[R0, #+0]
   \       0xAA   0x380A             SUBS     R0,R0,#+10
   \       0xAC   0x4281             CMP      R1,R0
   \       0xAE   0xDA06             BGE      ??LOAD_CheckInstallShovel_6
    260              {
    261                  g_cyShovelFlag = true;                                                  //后一个值比前一个值小10，（卸）铲成功
   \       0xB0   0x2001             MOVS     R0,#+1
   \       0xB2   0x7028             STRB     R0,[R5, #+0]
    262                  g_cyShovelWaitCnt = 0;
   \       0xB4   0x2000             MOVS     R0,#+0
   \       0xB6   0x....             LDR      R1,??DataTable2_17
   \       0xB8   0x7008             STRB     R0,[R1, #+0]
    263                  return (true);
   \       0xBA   0x2001             MOVS     R0,#+1
   \       0xBC   0xE014             B        ??LOAD_CheckInstallShovel_2
    264              }
    265              
    266              if (MAX_CHECK_NUM == g_cyCheckCnt) 
   \                     ??LOAD_CheckInstallShovel_6: (+1)
   \       0xBE   0x7820             LDRB     R0,[R4, #+0]
   \       0xC0   0x280A             CMP      R0,#+10
   \       0xC2   0xD110             BNE      ??LOAD_CheckInstallShovel_7
    267              {
    268                  fTempVarianceValue = GetVariance(g_wCheckBuffer, g_cyCheckCnt);         //求方差
   \       0xC4   0x7821             LDRB     R1,[R4, #+0]
   \       0xC6   0x....             LDR      R0,??DataTable2_11
   \       0xC8   0x....'....        BL       GetVariance
   \       0xCC   0x0006             MOVS     R6,R0
    269                  
    270                  if (false == g_cyVarianceFlag)
   \       0xCE   0x....             LDR      R4,??DataTable2_13
   \       0xD0   0x7820             LDRB     R0,[R4, #+0]
   \       0xD2   0x2800             CMP      R0,#+0
   \       0xD4   0xD109             BNE      ??LOAD_CheckInstallShovel_8
    271                  {
    272                      if (g_fVarianceValue < fTempVarianceValue)                          //给定方差g_fVarianceValue=1.2
   \       0xD6   0x....             LDR      R0,??DataTable2_14
   \       0xD8   0x6800             LDR      R0,[R0, #+0]
   \       0xDA   0x0031             MOVS     R1,R6
   \       0xDC   0x....'....        BL       __aeabi_cfcmple
   \       0xE0   0xD201             BCS      ??LOAD_CheckInstallShovel_7
    273                      {
    274                          g_cyVarianceFlag = true;
   \       0xE2   0x2001             MOVS     R0,#+1
   \       0xE4   0x7020             STRB     R0,[R4, #+0]
    275                      }
    276                  }
    277                  else
    278                  {
    279                      if (g_fVarianceValue > fTempVarianceValue)
    280                      {
    281                          fTemp = g_fVarianceValue;
    282                          fTemp *= 0.4;
    283                          if (fTempVarianceValue < fTemp)
    284                          {
    285                              g_cyVarianceFlag = false;
    286                              g_cyShovelFlag = true;
    287                              g_cyShovelWaitCnt = 0;
    288                              return (true);
    289                          }
    290                      }
    291                  }
    292              }
    293              return (false);
   \                     ??LOAD_CheckInstallShovel_7: (+1)
   \       0xE6   0x2000             MOVS     R0,#+0
   \                     ??LOAD_CheckInstallShovel_2: (+1)
   \       0xE8   0xBD70             POP      {R4-R6,PC}       ;; return
   \                     ??LOAD_CheckInstallShovel_8: (+1)
   \       0xEA   0x....             LDR      R2,??DataTable2_14
   \       0xEC   0x0030             MOVS     R0,R6
   \       0xEE   0x6811             LDR      R1,[R2, #+0]
   \       0xF0   0x....'....        BL       __aeabi_cfcmple
   \       0xF4   0xD2F7             BCS      ??LOAD_CheckInstallShovel_7
   \       0xF6   0x6810             LDR      R0,[R2, #+0]
   \       0xF8   0x....'....        BL       __aeabi_f2d
   \       0xFC   0x....             ADR      R2,??DataTable2_15
   \       0xFE   0xCA0C             LDM      R2,{R2,R3}
   \      0x100   0x....'....        BL       __aeabi_dmul
   \      0x104   0x....'....        BL       __aeabi_d2f
   \      0x108   0x0001             MOVS     R1,R0
   \      0x10A   0x0030             MOVS     R0,R6
   \      0x10C   0x....'....        BL       __aeabi_cfcmple
   \      0x110   0xD2E9             BCS      ??LOAD_CheckInstallShovel_7
   \      0x112   0x2000             MOVS     R0,#+0
   \      0x114   0x7020             STRB     R0,[R4, #+0]
   \      0x116   0x2101             MOVS     R1,#+1
   \      0x118   0x7029             STRB     R1,[R5, #+0]
   \      0x11A   0x....             LDR      R1,??DataTable2_17
   \      0x11C   0x7008             STRB     R0,[R1, #+0]
   \      0x11E   0x2001             MOVS     R0,#+1
   \      0x120   0xE7E2             B        ??LOAD_CheckInstallShovel_2
    294          }
    295          
    296          //**************************************************************************************************
    297          // 名称         : LOAD_HandleEmptyTask()
    298          // 创建日期     : 2015-09-30
    299          // 作者         : 陈锦
    300          // 功能         : 处理空载任务
    301          // 输入参数     : 无
    302          // 输出参数     : 无
    303          // 返回结果     : 无
    304          // 注意和说明   :
    305          // 修改内容     :
    306          //**************************************************************************************************
    307          

   \                                 In section .text, align 2, keep-with-next
    308          static void LOAD_HandleEmptyTask(void)
    309          {
   \                     LOAD_HandleEmptyTask: (+1)
   \        0x0   0xB5F8             PUSH     {R3-R7,LR}
    310              u16 wTemp;
    311              u8  i;
    312              float fTemp;
    313              
    314              if (3 == g_cyCtrlFlag) //控制标准  1：只有速度， 2：有速度，有篷布状态 3：有速度，有篷布状态，有电子围栏
   \        0x2   0x....             LDR      R0,??DataTable3
   \        0x4   0x7801             LDRB     R1,[R0, #+0]
   \        0x6   0x2903             CMP      R1,#+3
   \        0x8   0xD109             BNE      ??LOAD_HandleEmptyTask_0
    315              {
    316                  if (0x01 != g_cyElState) //电子围栏状态 0x00表示车辆停车场，0x01表示渣土装载区，0x02表示渣土卸载区，0x03表示其他区域
   \        0xA   0x....             LDR      R1,??DataTable3_1
   \        0xC   0x7809             LDRB     R1,[R1, #+0]
   \        0xE   0x2901             CMP      R1,#+1
   \       0x10   0xD000             BEQ      .+4
   \       0x12   0xE14F             B        ??LOAD_HandleEmptyTask_1
    317                  {                                                                       
    318                      return;                                                             //不在渣土装载区则返回
    319                  }
    320                  
    321                  if (0x01 == g_cyPbState) //篷布状态 0x00表示篷布打开，0x01表示篷布关闭；
   \                     ??LOAD_HandleEmptyTask_2: (+1)
   \       0x14   0x....             LDR      R1,??DataTable3_2
   \       0x16   0x7809             LDRB     R1,[R1, #+0]
   \       0x18   0x2901             CMP      R1,#+1
   \       0x1A   0xD100             BNE      .+4
   \       0x1C   0xE14A             B        ??LOAD_HandleEmptyTask_1
    322                  {
    323                      return;                                                             //篷布关闭则返回
    324                  }
    325              }
    326              
    327              if (2 == g_cyCtrlFlag) //控制标准  1：只有速度， 2：有速度，有篷布状态 3：有速度，有篷布状态，有电子围栏
   \                     ??LOAD_HandleEmptyTask_0: (+1)
   \       0x1E   0x7800             LDRB     R0,[R0, #+0]
   \       0x20   0x2802             CMP      R0,#+2
   \       0x22   0xD104             BNE      ??LOAD_HandleEmptyTask_3
    328              {
    329                  if (0x01 == g_cyPbState) //篷布状态 0x00表示篷布打开，0x01表示篷布关闭；
   \       0x24   0x....             LDR      R0,??DataTable3_2
   \       0x26   0x7800             LDRB     R0,[R0, #+0]
   \       0x28   0x2801             CMP      R0,#+1
   \       0x2A   0xD100             BNE      .+4
   \       0x2C   0xE142             B        ??LOAD_HandleEmptyTask_1
    330                  {
    331                          return;                                                        //篷布关闭则返回
    332                  }
    333              }
    334              
    335              if (CAR_STOP_STATE != g_cyCarState) //开车状态，数据清零
   \                     ??LOAD_HandleEmptyTask_3: (+1)
   \       0x2E   0x....             LDR      R0,??DataTable3_3
   \       0x30   0x7800             LDRB     R0,[R0, #+0]
   \       0x32   0x2801             CMP      R0,#+1
   \       0x34   0xD00F             BEQ      ??LOAD_HandleEmptyTask_4
    336              {
    337                  g_cyFifoCnt = 0;
   \       0x36   0x2000             MOVS     R0,#+0
   \       0x38   0x0001             MOVS     R1,R0
   \       0x3A   0x....             LDR      R2,??DataTable3_4
   \       0x3C   0x7011             STRB     R1,[R2, #+0]
    338                  g_cyShovelFlag = false;
   \       0x3E   0x0001             MOVS     R1,R0
   \       0x40   0x....             LDR      R2,??DataTable3_5
   \       0x42   0x7011             STRB     R1,[R2, #+0]
    339                  g_cyVarianceFlag = false;
   \       0x44   0x0001             MOVS     R1,R0
   \       0x46   0x....             LDR      R2,??DataTable3_6
   \       0x48   0x7011             STRB     R1,[R2, #+0]
    340                  g_cyCheckCnt = 0;
   \       0x4A   0x0001             MOVS     R1,R0
   \       0x4C   0x....             LDR      R2,??DataTable3_7
   \       0x4E   0x7011             STRB     R1,[R2, #+0]
    341                  g_cyCurrentShovelNum = 0;
   \       0x50   0x....             LDR      R1,??DataTable3_8
   \       0x52   0x7008             STRB     R0,[R1, #+0]
    342                  return;
   \       0x54   0xE12E             B        ??LOAD_HandleEmptyTask_1
    343              }
    344              
    345              if (true == LOAD_CheckInstallShovel())                                    //装铲成功
   \                     ??LOAD_HandleEmptyTask_4: (+1)
   \       0x56   0x....'....        BL       LOAD_CheckInstallShovel
   \       0x5A   0x2801             CMP      R0,#+1
   \       0x5C   0xD000             BEQ      .+4
   \       0x5E   0xE0FB             B        ??LOAD_HandleEmptyTask_5
    346              {
    347                  g_cyCurrentShovelNum++;                                                 //当前铲数+1
   \       0x60   0x....             LDR      R4,??DataTable3_8
   \       0x62   0x7820             LDRB     R0,[R4, #+0]
   \       0x64   0x1C40             ADDS     R0,R0,#+1
   \       0x66   0x7020             STRB     R0,[R4, #+0]
    348                  if (5 == g_cyCurrentShovelNum)                                          //3铲才算成功装载（5铲）
   \       0x68   0x7820             LDRB     R0,[R4, #+0]
   \       0x6A   0x2805             CMP      R0,#+5
   \       0x6C   0xD000             BEQ      .+4
   \       0x6E   0xE0F3             B        ??LOAD_HandleEmptyTask_5
    349                  {
    350                      if ( (LOAD_STUDY == g_cyStudyState) && (0 != g_cyRecordShovelNum) && (g_wEmptyValue < g_wFullValue) )
   \       0x70   0x....             LDR      R7,??DataTable3_9
   \       0x72   0x7838             LDRB     R0,[R7, #+0]
   \       0x74   0x2803             CMP      R0,#+3
   \       0x76   0xD118             BNE      ??LOAD_HandleEmptyTask_6
   \       0x78   0x....             LDR      R5,??DataTable3_10
   \       0x7A   0x7828             LDRB     R0,[R5, #+0]
   \       0x7C   0x2800             CMP      R0,#+0
   \       0x7E   0xD014             BEQ      ??LOAD_HandleEmptyTask_6
   \       0x80   0x....             LDR      R0,??DataTable3_11
   \       0x82   0x....             LDR      R1,??DataTable3_12
   \       0x84   0x880A             LDRH     R2,[R1, #+0]
   \       0x86   0x8803             LDRH     R3,[R0, #+0]
   \       0x88   0x429A             CMP      R2,R3
   \       0x8A   0xD20E             BCS      ??LOAD_HandleEmptyTask_6
    351                      {
    352                          fTemp = g_wFullValue - g_wEmptyValue;
   \       0x8C   0x8800             LDRH     R0,[R0, #+0]
   \       0x8E   0x8809             LDRH     R1,[R1, #+0]
   \       0x90   0x1A40             SUBS     R0,R0,R1
   \       0x92   0x....'....        BL       __aeabi_i2f
   \       0x96   0x0006             MOVS     R6,R0
    353                          fTemp /= g_cyRecordShovelNum;                                   //每铲的重量
   \       0x98   0x7828             LDRB     R0,[R5, #+0]
   \       0x9A   0x....'....        BL       __aeabi_ui2f
   \       0x9E   0x0001             MOVS     R1,R0
   \       0xA0   0x0030             MOVS     R0,R6
   \       0xA2   0x....'....        BL       __aeabi_fdiv
   \       0xA6   0x0005             MOVS     R5,R0
   \       0xA8   0xE000             B        ??LOAD_HandleEmptyTask_7
    354                      }
    355                      else
    356                      {
    357                          fTemp = 25;                                                     //每铲重量默认25
   \                     ??LOAD_HandleEmptyTask_6: (+1)
   \       0xAA   0x....             LDR      R5,??DataTable3_13  ;; 0x41c80000
    358                      }
    359                      
    360                      fTemp *= g_cyCurrentShovelNum;
   \                     ??LOAD_HandleEmptyTask_7: (+1)
   \       0xAC   0x7820             LDRB     R0,[R4, #+0]
   \       0xAE   0x....'....        BL       __aeabi_ui2f
   \       0xB2   0x0029             MOVS     R1,R5
   \       0xB4   0x....'....        BL       __aeabi_fmul
   \       0xB8   0x0004             MOVS     R4,R0
    361                      if ( (fTemp > (g_wFullValue - g_wEmptyValue) ) && (g_wEmptyValue < g_wFullValue) )
   \       0xBA   0x....             LDR      R0,??DataTable3_11
   \       0xBC   0x8800             LDRH     R0,[R0, #+0]
   \       0xBE   0x....             LDR      R1,??DataTable3_12
   \       0xC0   0x8809             LDRH     R1,[R1, #+0]
   \       0xC2   0x1A40             SUBS     R0,R0,R1
   \       0xC4   0x....'....        BL       __aeabi_i2f
   \       0xC8   0x0021             MOVS     R1,R4
   \       0xCA   0x....'....        BL       __aeabi_cfcmple
   \       0xCE   0xD20C             BCS      ??LOAD_HandleEmptyTask_8
   \       0xD0   0x....             LDR      R0,??DataTable3_12
   \       0xD2   0x8800             LDRH     R0,[R0, #+0]
   \       0xD4   0x....             LDR      R1,??DataTable3_11
   \       0xD6   0x8809             LDRH     R1,[R1, #+0]
   \       0xD8   0x4288             CMP      R0,R1
   \       0xDA   0xD206             BCS      ??LOAD_HandleEmptyTask_8
    362                      {
    363                          RunVar.LoadADValue += 3;
   \       0xDC   0x....             LDR      R4,??DataTable3_14
   \       0xDE   0x6821             LDR      R1,[R4, #+0]
   \       0xE0   0x....             LDR      R0,??DataTable3_15  ;; 0x40400000
   \       0xE2   0x....'....        BL       __aeabi_fadd
   \       0xE6   0x6020             STR      R0,[R4, #+0]
   \       0xE8   0xE00A             B        ??LOAD_HandleEmptyTask_9
    364                      }
    365                      else if (fTemp < 1000)
   \                     ??LOAD_HandleEmptyTask_8: (+1)
   \       0xEA   0x0020             MOVS     R0,R4
   \       0xEC   0x....             LDR      R1,??DataTable3_16  ;; 0x447a0000
   \       0xEE   0x....'....        BL       __aeabi_cfcmple
   \       0xF2   0xD202             BCS      ??LOAD_HandleEmptyTask_10
    366                      {
    367                          RunVar.LoadADValue = fTemp;
   \       0xF4   0x....             LDR      R0,??DataTable3_14
   \       0xF6   0x6004             STR      R4,[R0, #+0]
   \       0xF8   0xE002             B        ??LOAD_HandleEmptyTask_9
    368                      }
    369                      else 
    370                      {
    371                          RunVar.LoadADValue = 300;
   \                     ??LOAD_HandleEmptyTask_10: (+1)
   \       0xFA   0x....             LDR      R0,??DataTable3_17  ;; 0x43960000
   \       0xFC   0x....             LDR      R1,??DataTable3_14
   \       0xFE   0x6008             STR      R0,[R1, #+0]
    372                      }
    373              
    374                      g_cyWorkState = LOAD_INSTALL_STATE;                                 //装载状态
   \                     ??LOAD_HandleEmptyTask_9: (+1)
   \      0x100   0x....             LDR      R3,??LOAD_HandleInstallTask_0
   \      0x102   0x2001             MOVS     R0,#+1
   \      0x104   0x7018             STRB     R0,[R3, #+0]
    375                      ProductPara.bFlashWEn = FLASH_WR_ENABLE;
   \      0x106   0x2001             MOVS     R0,#+1
   \      0x108   0x....             LDR      R1,??DataTable3_18
   \      0x10A   0x70C8             STRB     R0,[R1, #+3]
    376                      I2C1_WNBytesMul3T(EEPROM_ADDRESS, LOAD_WORK_STATE, 1,  &g_cyWorkState);
   \      0x10C   0x2201             MOVS     R2,#+1
   \      0x10E   0x213C             MOVS     R1,#+60
   \      0x110   0x20A0             MOVS     R0,#+160
   \      0x112   0x....'....        BL       I2C1_WNBytesMul3T
    377                      ProductPara.bFlashWEn = FLASH_WR_DISABLE;
   \      0x116   0x2400             MOVS     R4,#+0
   \      0x118   0x0020             MOVS     R0,R4
   \      0x11A   0x....             LDR      R1,??DataTable3_18
   \      0x11C   0x70C8             STRB     R0,[R1, #+3]
    378                      
    379                      g_cyFifoCnt = 0;
   \      0x11E   0x0020             MOVS     R0,R4
   \      0x120   0x....             LDR      R1,??DataTable3_4
   \      0x122   0x7008             STRB     R0,[R1, #+0]
    380                      g_cyCheckCnt = 0;
   \      0x124   0x0020             MOVS     R0,R4
   \      0x126   0x....             LDR      R1,??DataTable3_7
   \      0x128   0x7008             STRB     R0,[R1, #+0]
    381                      g_cyVarianceFlag = false;
   \      0x12A   0x0020             MOVS     R0,R4
   \      0x12C   0x....             LDR      R1,??DataTable3_6
   \      0x12E   0x7008             STRB     R0,[R1, #+0]
    382                          
    383                      if (2 < g_cyCurrentStateCnt)                                        //有学习成功数据
   \      0x130   0x....             LDR      R0,??DataTable3_19
   \      0x132   0x7800             LDRB     R0,[R0, #+0]
   \      0x134   0x2803             CMP      R0,#+3
   \      0x136   0xDA00             BGE      .+4
   \      0x138   0xE08B             B        ??LOAD_HandleEmptyTask_11
    384                      {
    385                          if (100 < GetVariance(g_wCurrentStateBuffer, g_cyCurrentStateCnt) )
   \      0x13A   0x....             LDR      R5,??DataTable3_19
   \      0x13C   0x7829             LDRB     R1,[R5, #+0]
   \      0x13E   0x....             LDR      R0,??DataTable3_20
   \      0x140   0x....'....        BL       GetVariance
   \      0x144   0x....             LDR      R1,??DataTable3_21  ;; 0x42c80001
   \      0x146   0x....'....        BL       __aeabi_cfrcmple
   \      0x14A   0xD801             BHI      ??LOAD_HandleEmptyTask_12
    386                          {
    387                              g_cyCurrentStateCnt = 0;
   \      0x14C   0x702C             STRB     R4,[R5, #+0]
    388                              return;
   \      0x14E   0xE0B1             B        ??LOAD_HandleEmptyTask_1
    389                          }
    390                          
    391                          wTemp = LOAD_GetAverage(g_wCurrentStateBuffer, g_cyCurrentStateCnt);
   \                     ??LOAD_HandleEmptyTask_12: (+1)
   \      0x150   0x....             LDR      R6,??DataTable3_19
   \      0x152   0x7831             LDRB     R1,[R6, #+0]
   \      0x154   0x....             LDR      R0,??DataTable3_20
   \      0x156   0x....'....        BL       LOAD_GetAverage
   \      0x15A   0x0005             MOVS     R5,R0
    392                          
    393                          if ( (wTemp > (g_wFullValue - 100) ) || (wTemp > 1500) )
   \      0x15C   0x....             LDR      R0,??DataTable3_11
   \      0x15E   0x8801             LDRH     R1,[R0, #+0]
   \      0x160   0x3964             SUBS     R1,R1,#+100
   \      0x162   0x002A             MOVS     R2,R5
   \      0x164   0xB292             UXTH     R2,R2
   \      0x166   0x4291             CMP      R1,R2
   \      0x168   0xDB04             BLT      ??LOAD_HandleEmptyTask_13
   \      0x16A   0x0029             MOVS     R1,R5
   \      0x16C   0xB289             UXTH     R1,R1
   \      0x16E   0x....             LDR      R2,??DataTable3_22  ;; 0x5dd
   \      0x170   0x4291             CMP      R1,R2
   \      0x172   0xDB01             BLT      ??LOAD_HandleEmptyTask_14
    394                          {
    395                              g_cyCurrentStateCnt = 0;
   \                     ??LOAD_HandleEmptyTask_13: (+1)
   \      0x174   0x7034             STRB     R4,[R6, #+0]
    396                              return;
   \      0x176   0xE09D             B        ??LOAD_HandleEmptyTask_1
    397                          }
    398                                  
    399                          if (LOAD_EMPTY_STUDY != (g_cyStudyState & LOAD_EMPTY_STUDY) )   //空载值没有学习成功 不受限制
   \                     ??LOAD_HandleEmptyTask_14: (+1)
   \      0x178   0x7839             LDRB     R1,[R7, #+0]
   \      0x17A   0x07C9             LSLS     R1,R1,#+31
   \      0x17C   0xD413             BMI      ??LOAD_HandleEmptyTask_15
    400                          {
    401                              g_wEmptyValue = wTemp;
   \      0x17E   0x....             LDR      R0,??DataTable3_12
   \      0x180   0x8005             STRH     R5,[R0, #+0]
    402                              for (i = 0; i < LOAD_DATA_FIFO_NUM; i++)
   \      0x182   0x0020             MOVS     R0,R4
   \      0x184   0xE006             B        ??LOAD_HandleEmptyTask_16
    403                              {
    404                                      g_wEmptyBuffer[i] = wTemp;
   \                     ??LOAD_HandleEmptyTask_17: (+1)
   \      0x186   0x....             LDR      R1,??DataTable3_23
   \      0x188   0x0002             MOVS     R2,R0
   \      0x18A   0xB2D2             UXTB     R2,R2
   \      0x18C   0x2302             MOVS     R3,#+2
   \      0x18E   0x435A             MULS     R2,R3,R2
   \      0x190   0x528D             STRH     R5,[R1, R2]
    405                              }
   \      0x192   0x1C40             ADDS     R0,R0,#+1
   \                     ??LOAD_HandleEmptyTask_16: (+1)
   \      0x194   0x0001             MOVS     R1,R0
   \      0x196   0xB2C9             UXTB     R1,R1
   \      0x198   0x290A             CMP      R1,#+10
   \      0x19A   0xDBF4             BLT      ??LOAD_HandleEmptyTask_17
    406                              
    407                              g_cyStudyState |= LOAD_EMPTY_STUDY;
   \      0x19C   0x7838             LDRB     R0,[R7, #+0]
   \      0x19E   0x2101             MOVS     R1,#+1
   \      0x1A0   0x4301             ORRS     R1,R1,R0
   \      0x1A2   0x7039             STRB     R1,[R7, #+0]
   \      0x1A4   0xE043             B        ??LOAD_HandleEmptyTask_18
    408                          }
    409                          else
    410                          {
    411                              if (LOAD_STUDY == g_cyStudyState)  //都学习成功 不受限制
   \                     ??LOAD_HandleEmptyTask_15: (+1)
   \      0x1A6   0x7839             LDRB     R1,[R7, #+0]
   \      0x1A8   0x2903             CMP      R1,#+3
   \      0x1AA   0xD13A             BNE      ??LOAD_HandleEmptyTask_19
    412                              {
    413                                  //新空载值如果大于(原满载值-原来空载值）*50% + 原来空载值，那么按(原满载值-原来空载值）*50% + 原来空载值作为新的空载值。
    414                                  //新空载值如果小于原来空载值 - (原满载值-原来空载值）* 50%，那么按原来空载值 - (原满载值-原来空载值）* 50%作为新的空载值
    415                                  fTemp = g_wFullValue - g_wEmptyValue;
   \      0x1AC   0x....             LDR      R6,??DataTable3_12
   \      0x1AE   0x8800             LDRH     R0,[R0, #+0]
   \      0x1B0   0x8831             LDRH     R1,[R6, #+0]
   \      0x1B2   0x1A40             SUBS     R0,R0,R1
   \      0x1B4   0x....'....        BL       __aeabi_i2f
    416                                  fTemp *= 0.5;
   \      0x1B8   0x....'....        BL       __aeabi_f2d
   \      0x1BC   0x2200             MOVS     R2,#+0
   \      0x1BE   0x....             LDR      R3,??DataTable3_24  ;; 0x3fe00000
   \      0x1C0   0x....'....        BL       __aeabi_dmul
   \      0x1C4   0x....'....        BL       __aeabi_d2f
   \      0x1C8   0x0007             MOVS     R7,R0
    417                                  if (wTemp > (g_wEmptyValue + fTemp) )
   \      0x1CA   0x0028             MOVS     R0,R5
   \      0x1CC   0xB280             UXTH     R0,R0
   \      0x1CE   0x....'....        BL       __aeabi_ui2f
   \      0x1D2   0x0001             MOVS     R1,R0
   \      0x1D4   0x9100             STR      R1,[SP, #+0]
   \      0x1D6   0x8830             LDRH     R0,[R6, #+0]
   \      0x1D8   0x....'....        BL       __aeabi_ui2f
   \      0x1DC   0x0039             MOVS     R1,R7
   \      0x1DE   0x....'....        BL       __aeabi_fadd
   \      0x1E2   0x9900             LDR      R1,[SP, #+0]
   \      0x1E4   0x....'....        BL       __aeabi_cfcmple
   \      0x1E8   0xD205             BCS      ??LOAD_HandleEmptyTask_20
    418                                  {
    419                                      wTemp = g_wEmptyValue + (u16)fTemp;
   \      0x1EA   0x8835             LDRH     R5,[R6, #+0]
   \      0x1EC   0x0038             MOVS     R0,R7
   \      0x1EE   0x....'....        BL       __aeabi_f2iz
   \      0x1F2   0x182D             ADDS     R5,R5,R0
   \      0x1F4   0xE015             B        ??LOAD_HandleEmptyTask_19
    420                                  }
    421                                  else if (wTemp < (g_wEmptyValue - fTemp) )
   \                     ??LOAD_HandleEmptyTask_20: (+1)
   \      0x1F6   0x....             LDR      R6,??DataTable3_12
   \      0x1F8   0x8830             LDRH     R0,[R6, #+0]
   \      0x1FA   0x....'....        BL       __aeabi_ui2f
   \      0x1FE   0x0039             MOVS     R1,R7
   \      0x200   0x....'....        BL       __aeabi_fsub
   \      0x204   0x0001             MOVS     R1,R0
   \      0x206   0x9100             STR      R1,[SP, #+0]
   \      0x208   0x0028             MOVS     R0,R5
   \      0x20A   0xB280             UXTH     R0,R0
   \      0x20C   0x....'....        BL       __aeabi_ui2f
   \      0x210   0x9900             LDR      R1,[SP, #+0]
   \      0x212   0x....'....        BL       __aeabi_cfcmple
   \      0x216   0xD204             BCS      ??LOAD_HandleEmptyTask_19
    422                                  {
    423                                      wTemp = g_wEmptyValue - (u16)fTemp;
   \      0x218   0x8835             LDRH     R5,[R6, #+0]
   \      0x21A   0x0038             MOVS     R0,R7
   \      0x21C   0x....'....        BL       __aeabi_f2iz
   \      0x220   0x1A2D             SUBS     R5,R5,R0
    424                                  }       
    425                              }
    426                              LOAD_FifoData(g_wEmptyBuffer, wTemp, LOAD_DATA_FIFO_NUM);
   \                     ??LOAD_HandleEmptyTask_19: (+1)
   \      0x222   0x220A             MOVS     R2,#+10
   \      0x224   0x0029             MOVS     R1,R5
   \      0x226   0xB289             UXTH     R1,R1
   \      0x228   0x....             LDR      R0,??DataTable3_23
   \      0x22A   0x....'....        BL       LOAD_FifoData
    427                          }
    428                          g_wEmptyValue = LOAD_GetAverage(g_wEmptyBuffer, LOAD_DATA_FIFO_NUM);
   \                     ??LOAD_HandleEmptyTask_18: (+1)
   \      0x22E   0x....             LDR      R5,??DataTable3_23
   \      0x230   0x210A             MOVS     R1,#+10
   \      0x232   0x0028             MOVS     R0,R5
   \      0x234   0x....'....        BL       LOAD_GetAverage
   \      0x238   0x....             LDR      R1,??DataTable3_12
   \      0x23A   0x8008             STRH     R0,[R1, #+0]
    429                          ProductPara.bFlashWEn = FLASH_WR_ENABLE;
   \      0x23C   0x....             LDR      R6,??DataTable4_2
   \      0x23E   0x2001             MOVS     R0,#+1
   \      0x240   0x7030             STRB     R0,[R6, #+0]
    430                          I2C1_WNBytesMul3T(EEPROM_ADDRESS, LOAD_EMPTY_FIFO, 20, (u8 *)&g_wEmptyBuffer);
   \      0x242   0x002B             MOVS     R3,R5
   \      0x244   0x2214             MOVS     R2,#+20
   \      0x246   0x2109             MOVS     R1,#+9
   \      0x248   0x20A0             MOVS     R0,#+160
   \      0x24A   0x....'....        BL       I2C1_WNBytesMul3T
    431                          ProductPara.bFlashWEn = FLASH_WR_DISABLE;
   \      0x24E   0x0020             MOVS     R0,R4
   \      0x250   0x7030             STRB     R0,[R6, #+0]
    432                      }  
    433                      g_cyCurrentStateCnt = 0;         
   \                     ??LOAD_HandleEmptyTask_11: (+1)
   \      0x252   0x....             LDR      R0,??DataTable3_19
   \      0x254   0x7004             STRB     R4,[R0, #+0]
    434                      return;
   \      0x256   0xE02D             B        ??LOAD_HandleEmptyTask_1
    435                  }
    436              }
    437              g_wFifoBuffer[g_cyFifoCnt] = g_wLoadADBuffer[GET_START_DATA_NUM];
   \                     ??LOAD_HandleEmptyTask_5: (+1)
   \      0x258   0x....             LDR      R4,??DataTable4_10
   \      0x25A   0x....             LDR      R0,??DataTable3_4
   \      0x25C   0x....             LDR      R1,??LOAD_CheckUnload_0
   \      0x25E   0x8A89             LDRH     R1,[R1, #+20]
   \      0x260   0x7802             LDRB     R2,[R0, #+0]
   \      0x262   0x2302             MOVS     R3,#+2
   \      0x264   0x435A             MULS     R2,R3,R2
   \      0x266   0x52A1             STRH     R1,[R4, R2]
    438              g_cyFifoCnt++;
   \      0x268   0x7801             LDRB     R1,[R0, #+0]
   \      0x26A   0x1C49             ADDS     R1,R1,#+1
   \      0x26C   0x7001             STRB     R1,[R0, #+0]
    439              if (MAX_FIFO_RECORD_NUM == g_cyFifoCnt)
   \      0x26E   0x7801             LDRB     R1,[R0, #+0]
   \      0x270   0x290A             CMP      R1,#+10
   \      0x272   0xD11F             BNE      ??LOAD_HandleEmptyTask_21
    440              {
    441                  g_cyFifoCnt = 0;
   \      0x274   0x2100             MOVS     R1,#+0
   \      0x276   0x7001             STRB     R1,[R0, #+0]
    442                  if (100 < GetVariance(g_wFifoBuffer, MAX_FIFO_RECORD_NUM) )
   \      0x278   0x210A             MOVS     R1,#+10
   \      0x27A   0x0020             MOVS     R0,R4
   \      0x27C   0x....'....        BL       GetVariance
   \      0x280   0x....             LDR      R1,??DataTable3_21  ;; 0x42c80001
   \      0x282   0x....'....        BL       __aeabi_cfrcmple
   \      0x286   0xD915             BLS      ??LOAD_HandleEmptyTask_1
    443                  {
    444                      return;
    445                  }
    446          
    447                  wTemp = LOAD_GetAverage(g_wFifoBuffer, MAX_FIFO_RECORD_NUM);
   \                     ??LOAD_HandleEmptyTask_22: (+1)
   \      0x288   0x210A             MOVS     R1,#+10
   \      0x28A   0x0020             MOVS     R0,R4
   \      0x28C   0x....'....        BL       LOAD_GetAverage
    448                  if (wTemp > g_wFullValue)
   \      0x290   0x....             LDR      R1,??DataTable3_11
   \      0x292   0x8809             LDRH     R1,[R1, #+0]
   \      0x294   0x0002             MOVS     R2,R0
   \      0x296   0xB292             UXTH     R2,R2
   \      0x298   0x4291             CMP      R1,R2
   \      0x29A   0xD30B             BCC      ??LOAD_HandleEmptyTask_1
    449                  {
    450                      return;
    451                  }
    452                  
    453                  if (MAX_STUDY_NUM > g_cyCurrentStateCnt)
   \                     ??LOAD_HandleEmptyTask_23: (+1)
   \      0x29C   0x....             LDR      R1,??DataTable3_19
   \      0x29E   0x780A             LDRB     R2,[R1, #+0]
   \      0x2A0   0x2A1E             CMP      R2,#+30
   \      0x2A2   0xDA07             BGE      ??LOAD_HandleEmptyTask_21
    454                  {
    455                      g_wCurrentStateBuffer[g_cyCurrentStateCnt] = wTemp;
   \      0x2A4   0x....             LDR      R2,??DataTable3_20
   \      0x2A6   0x780B             LDRB     R3,[R1, #+0]
   \      0x2A8   0x2402             MOVS     R4,#+2
   \      0x2AA   0x4363             MULS     R3,R4,R3
   \      0x2AC   0x52D0             STRH     R0,[R2, R3]
    456                      g_cyCurrentStateCnt++;
   \      0x2AE   0x7808             LDRB     R0,[R1, #+0]
   \      0x2B0   0x1C40             ADDS     R0,R0,#+1
   \      0x2B2   0x7008             STRB     R0,[R1, #+0]
    457                  }
    458              }
    459          }
   \                     ??LOAD_HandleEmptyTask_21: (+1)
   \                     ??LOAD_HandleEmptyTask_1: (+1)
   \      0x2B4   0xBDF1             POP      {R0,R4-R7,PC}    ;; return
    460          
    461          //**************************************************************************************************
    462          // 名称         : LOAD_HandleInstallTask()
    463          // 创建日期     : 2015-09-30
    464          // 作者         : 陈锦
    465          // 功能         : 处理装载任务
    466          // 输入参数     : 无
    467          // 输出参数     : 无
    468          // 返回结果     : 无
    469          // 注意和说明   :
    470          // 修改内容     :
    471          //**************************************************************************************************
    472          

   \                                 In section .text, align 4, keep-with-next
    473          static void LOAD_HandleInstallTask(void)
    474          {
   \                     LOAD_HandleInstallTask: (+1)
   \        0x0   0xB570             PUSH     {R4-R6,LR}
    475          	float fTemp;
    476          	//u16 wTemp;
    477          	
    478          	if (CAR_RUN_STATE == g_cyCarState) //开车
   \        0x2   0x....             LDR      R0,??DataTable4
   \        0x4   0x7800             LDRB     R0,[R0, #+0]
   \        0x6   0x2800             CMP      R0,#+0
   \        0x8   0xD13F             BNE      ??LOAD_HandleInstallTask_1
    479          	{
    480          		g_wIdleWait100Ms = 0;
   \        0xA   0x2400             MOVS     R4,#+0
   \        0xC   0x0020             MOVS     R0,R4
   \        0xE   0x....             LDR      R1,??DataTable4_1
   \       0x10   0x8008             STRH     R0,[R1, #+0]
    481          		g_cyWorkState = LOAD_IN_FULL_STATE;
   \       0x12   0x4B3B             LDR      R3,??LOAD_HandleInstallTask_0
   \       0x14   0x2002             MOVS     R0,#+2
   \       0x16   0x7018             STRB     R0,[R3, #+0]
    482          		
    483          		ProductPara.bFlashWEn = FLASH_WR_ENABLE;
   \       0x18   0x....             LDR      R6,??DataTable4_2
   \       0x1A   0x2501             MOVS     R5,#+1
   \       0x1C   0x0028             MOVS     R0,R5
   \       0x1E   0x7030             STRB     R0,[R6, #+0]
    484          		I2C1_WNBytesMul3T(EEPROM_ADDRESS, LOAD_WORK_STATE, 1,  &g_cyWorkState);
   \       0x20   0x2201             MOVS     R2,#+1
   \       0x22   0x213C             MOVS     R1,#+60
   \       0x24   0x20A0             MOVS     R0,#+160
   \       0x26   0x....'....        BL       I2C1_WNBytesMul3T
    485          		ProductPara.bFlashWEn = FLASH_WR_DISABLE;
   \       0x2A   0x0020             MOVS     R0,R4
   \       0x2C   0x7030             STRB     R0,[R6, #+0]
    486          		
    487          		g_cyFifoCnt = 0;
   \       0x2E   0x0020             MOVS     R0,R4
   \       0x30   0x....             LDR      R1,??DataTable4_9
   \       0x32   0x7008             STRB     R0,[R1, #+0]
    488          		g_cyCheckCnt = 0;
   \       0x34   0x0020             MOVS     R0,R4
   \       0x36   0x....             LDR      R1,??DataTable5
   \       0x38   0x7008             STRB     R0,[R1, #+0]
    489          		g_cyVarianceFlag = false;
   \       0x3A   0x0020             MOVS     R0,R4
   \       0x3C   0x....             LDR      R1,??DataTable4_3
   \       0x3E   0x7008             STRB     R0,[R1, #+0]
    490          		g_cyShovelFlag = false;
   \       0x40   0x0020             MOVS     R0,R4
   \       0x42   0x....             LDR      R1,??DataTable4_4
   \       0x44   0x7008             STRB     R0,[R1, #+0]
    491          		g_cyExitFlag = false;
   \       0x46   0x0020             MOVS     R0,R4
   \       0x48   0x....             LDR      R1,??DataTable4_5
   \       0x4A   0x7008             STRB     R0,[R1, #+0]
    492          		
    493          		fTemp = g_wFullValue - g_wEmptyValue;
   \       0x4C   0x....             LDR      R0,??DataTable4_12
   \       0x4E   0x8800             LDRH     R0,[R0, #+0]
   \       0x50   0x....             LDR      R1,??DataTable4_11
   \       0x52   0x8809             LDRH     R1,[R1, #+0]
   \       0x54   0x1A40             SUBS     R0,R0,R1
   \       0x56   0x....'....        BL       __aeabi_i2f
    494          		fTemp *= 0.85;
   \       0x5A   0x....'....        BL       __aeabi_f2d
   \       0x5E   0x....             ADR      R2,??DataTable4_6
   \       0x60   0xCA0C             LDM      R2,{R2,R3}
   \       0x62   0x....'....        BL       __aeabi_dmul
   \       0x66   0x....'....        BL       __aeabi_d2f
    495          		if (fTemp < RunVar.LoadADValue)  //大于满载值85% 就不检查值
   \       0x6A   0x....             LDR      R1,??DataTable5_1
   \       0x6C   0x6809             LDR      R1,[R1, #+0]
   \       0x6E   0x....'....        BL       __aeabi_cfcmple
   \       0x72   0xD202             BCS      ??LOAD_HandleInstallTask_2
    496          		{
    497          			g_cyCheckFullFlag = true;
   \       0x74   0x....             LDR      R0,??DataTable4_7
   \       0x76   0x7005             STRB     R5,[R0, #+0]
   \       0x78   0xE002             B        ??LOAD_HandleInstallTask_3
    498          		}
    499          		else
    500          		{
    501          			g_cyCheckFullFlag = false;
   \                     ??LOAD_HandleInstallTask_2: (+1)
   \       0x7A   0x0020             MOVS     R0,R4
   \       0x7C   0x....             LDR      R1,??DataTable4_7
   \       0x7E   0x7008             STRB     R0,[R1, #+0]
    502          		}
    503          		g_cyRunFullCnt[0] = 0;
   \                     ??LOAD_HandleInstallTask_3: (+1)
   \       0x80   0x....             LDR      R0,??DataTable4_8
   \       0x82   0x0021             MOVS     R1,R4
   \       0x84   0x7001             STRB     R1,[R0, #+0]
    504          		g_cyRunFullCnt[1] = 0;
   \       0x86   0x7044             STRB     R4,[R0, #+1]
    505          		return;
   \       0x88   0xE062             B        ??LOAD_HandleInstallTask_4
    506          	}
    507          	
    508          	if (MAX_FIFO_RECORD_NUM < g_cyFifoCnt)
   \                     ??LOAD_HandleInstallTask_1: (+1)
   \       0x8A   0x....             LDR      R0,??DataTable4_9
   \       0x8C   0x7801             LDRB     R1,[R0, #+0]
   \       0x8E   0x290B             CMP      R1,#+11
   \       0x90   0xDB0A             BLT      ??LOAD_HandleInstallTask_5
    509          	{
    510          		g_wFifoBuffer[g_cyFifoCnt] = g_wLoadADBuffer[GET_START_DATA_NUM];
   \       0x92   0x....             LDR      R1,??LOAD_CheckUnload_0
   \       0x94   0x8A89             LDRH     R1,[R1, #+20]
   \       0x96   0x....             LDR      R2,??DataTable4_10
   \       0x98   0x7803             LDRB     R3,[R0, #+0]
   \       0x9A   0x2402             MOVS     R4,#+2
   \       0x9C   0x4363             MULS     R3,R4,R3
   \       0x9E   0x52D1             STRH     R1,[R2, R3]
    511          		g_cyFifoCnt++;
   \       0xA0   0x7801             LDRB     R1,[R0, #+0]
   \       0xA2   0x1C49             ADDS     R1,R1,#+1
   \       0xA4   0x7001             STRB     R1,[R0, #+0]
   \       0xA6   0xE005             B        ??LOAD_HandleInstallTask_6
    512          	}
    513          	else
    514          	{
    515          		LOAD_FifoData(g_wFifoBuffer, g_wLoadADBuffer[GET_START_DATA_NUM], MAX_FIFO_RECORD_NUM);
   \                     ??LOAD_HandleInstallTask_5: (+1)
   \       0xA8   0x220A             MOVS     R2,#+10
   \       0xAA   0x....             LDR      R0,??LOAD_CheckUnload_0
   \       0xAC   0x8A81             LDRH     R1,[R0, #+20]
   \       0xAE   0x....             LDR      R0,??DataTable4_10
   \       0xB0   0x....'....        BL       LOAD_FifoData
    516          	}	
    517          	//wTemp = LOAD_GetAverage(g_wFifoBuffer, g_cyFifoCnt);
    518          	
    519          	if (true == LOAD_CheckInstallShovel() )  //装铲成功
   \                     ??LOAD_HandleInstallTask_6: (+1)
   \       0xB4   0x....'....        BL       LOAD_CheckInstallShovel
   \       0xB8   0x2801             CMP      R0,#+1
   \       0xBA   0xD149             BNE      ??LOAD_HandleInstallTask_7
    520          	{
    521          		g_cyCurrentShovelNum++;
   \       0xBC   0x....             LDR      R4,??DataTable5_2
   \       0xBE   0x7820             LDRB     R0,[R4, #+0]
   \       0xC0   0x1C40             ADDS     R0,R0,#+1
   \       0xC2   0x7020             STRB     R0,[R4, #+0]
    522          		
    523          		if ( (LOAD_STUDY == g_cyStudyState) && (0 != g_cyRecordShovelNum) && (g_wEmptyValue < g_wFullValue) )
   \       0xC4   0x....             LDR      R0,??DataTable5_3
   \       0xC6   0x7800             LDRB     R0,[R0, #+0]
   \       0xC8   0x2803             CMP      R0,#+3
   \       0xCA   0xD11B             BNE      ??LOAD_HandleInstallTask_8
   \       0xCC   0x....             LDR      R5,??DataTable5_4
   \       0xCE   0x7828             LDRB     R0,[R5, #+0]
   \       0xD0   0x2800             CMP      R0,#+0
   \       0xD2   0xD017             BEQ      ??LOAD_HandleInstallTask_8
   \       0xD4   0x....             LDR      R0,??DataTable4_11
   \       0xD6   0x....             LDR      R1,??DataTable4_12
   \       0xD8   0x8802             LDRH     R2,[R0, #+0]
   \       0xDA   0x880B             LDRH     R3,[R1, #+0]
   \       0xDC   0x429A             CMP      R2,R3
   \       0xDE   0xD211             BCS      ??LOAD_HandleInstallTask_8
    524          		{
    525          			fTemp = g_wFullValue - g_wEmptyValue;
   \       0xE0   0x8809             LDRH     R1,[R1, #+0]
   \       0xE2   0x8800             LDRH     R0,[R0, #+0]
   \       0xE4   0x1A08             SUBS     R0,R1,R0
   \       0xE6   0x....'....        BL       __aeabi_i2f
   \       0xEA   0x0006             MOVS     R6,R0
    526          			fTemp /= g_cyRecordShovelNum;
   \       0xEC   0x7828             LDRB     R0,[R5, #+0]
   \       0xEE   0x....'....        BL       __aeabi_ui2f
   \       0xF2   0x0001             MOVS     R1,R0
   \       0xF4   0x0030             MOVS     R0,R6
   \       0xF6   0x....'....        BL       __aeabi_fdiv
   \       0xFA   0x0005             MOVS     R5,R0
   \       0xFC   0xE003             B        ??LOAD_HandleInstallTask_9
   \       0xFE   0xBF00             Nop
   \                     ??LOAD_HandleInstallTask_0:
   \      0x100   0x....'....        DC32     g_cyWorkState
    527          		}
    528          		else
    529          		{
    530          			fTemp = 25;
   \                     ??LOAD_HandleInstallTask_8: (+1)
   \      0x104   0x....             LDR      R5,??DataTable5_5  ;; 0x41c80000
    531          		}
    532          			
    533          		fTemp *= g_cyCurrentShovelNum;
   \                     ??LOAD_HandleInstallTask_9: (+1)
   \      0x106   0x7820             LDRB     R0,[R4, #+0]
   \      0x108   0x....'....        BL       __aeabi_ui2f
   \      0x10C   0x0001             MOVS     R1,R0
   \      0x10E   0x0028             MOVS     R0,R5
   \      0x110   0x....'....        BL       __aeabi_fmul
   \      0x114   0x0004             MOVS     R4,R0
    534          		if ( (fTemp > (g_wFullValue - g_wEmptyValue) ) && (g_wEmptyValue < g_wFullValue) ) 
   \      0x116   0x....             LDR      R5,??DataTable4_11
   \      0x118   0x....             LDR      R6,??DataTable4_12
   \      0x11A   0x8830             LDRH     R0,[R6, #+0]
   \      0x11C   0x8829             LDRH     R1,[R5, #+0]
   \      0x11E   0x1A40             SUBS     R0,R0,R1
   \      0x120   0x....'....        BL       __aeabi_i2f
   \      0x124   0x0021             MOVS     R1,R4
   \      0x126   0x....'....        BL       __aeabi_cfcmple
   \      0x12A   0xD20A             BCS      ??LOAD_HandleInstallTask_10
   \      0x12C   0x8828             LDRH     R0,[R5, #+0]
   \      0x12E   0x8831             LDRH     R1,[R6, #+0]
   \      0x130   0x4288             CMP      R0,R1
   \      0x132   0xD206             BCS      ??LOAD_HandleInstallTask_10
    535          		{
    536          			RunVar.LoadADValue += 3;
   \      0x134   0x....             LDR      R4,??DataTable5_1
   \      0x136   0x6820             LDR      R0,[R4, #+0]
   \      0x138   0x....             LDR      R1,??DataTable5_6  ;; 0x40400000
   \      0x13A   0x....'....        BL       __aeabi_fadd
   \      0x13E   0x6020             STR      R0,[R4, #+0]
   \      0x140   0xE006             B        ??LOAD_HandleInstallTask_7
    537          		}
    538          		else if (fTemp < 1000)
   \                     ??LOAD_HandleInstallTask_10: (+1)
   \      0x142   0x0020             MOVS     R0,R4
   \      0x144   0x....             LDR      R1,??DataTable5_7  ;; 0x447a0000
   \      0x146   0x....'....        BL       __aeabi_cfcmple
   \      0x14A   0xD201             BCS      ??LOAD_HandleInstallTask_7
    539          		{
    540          			RunVar.LoadADValue = fTemp;
   \      0x14C   0x....             LDR      R0,??DataTable5_1
   \      0x14E   0x6004             STR      R4,[R0, #+0]
    541          		}	
    542          	}
    543          	
    544          	/*wTemp -= g_wEmptyValue;
    545          	
    546          	if (wTemp > (g_wRatedValue * (1 + g_fOverValueK) ) )
    547          	{
    548          		g_cyOverFlag = true;
    549          	}
    550          	else
    551          	{
    552          		g_cyOverFlag = false;
    553          	}*/
    554          }
   \                     ??LOAD_HandleInstallTask_7: (+1)
   \                     ??LOAD_HandleInstallTask_4: (+1)
   \      0x150   0xBD70             POP      {R4-R6,PC}       ;; return
    555          
    556          //**************************************************************************************************
    557          // 名称         : LOAD_CheckUnload()
    558          // 创建日期     : 2015-09-30
    559          // 作者         : 陈锦
    560          // 功能         : 检测卸载
    561          // 输入参数     : 无
    562          // 输出参数     : 无
    563          // 返回结果     : 成功(true 1, flase 0)
    564          // 注意和说明   :
    565          // 修改内容     :
    566          //**************************************************************************************************
    567          
    568          #define MAX_RUN_UNLOAD_NUM 10
    569          #define MAX_UNLOAD_NUM     10

   \                                 In section .bss, align 4
    570          static u16 g_wUnLoadBuffer[MAX_RUN_UNLOAD_NUM];
   \                     g_wUnLoadBuffer:
   \        0x0                      DS8 20

   \                                 In section .bss, align 1
    571          static u8  g_cyUnLoadDataCnt = 0;
   \                     g_cyUnLoadDataCnt:
   \        0x0                      DS8 1

   \                                 In section .bss, align 2
    572          static u16 g_wOldUnLoadValue;
   \                     g_wOldUnLoadValue:
   \        0x0                      DS8 2

   \                                 In section .bss, align 2
    573          static u8  g_cyCUBuffer[2];
   \                     g_cyCUBuffer:
   \        0x0                      DS8 2
    574          

   \                                 In section .text, align 4, keep-with-next
    575          static u8 LOAD_CheckUnload(void)
    576          {
   \                     LOAD_CheckUnload: (+1)
   \        0x0   0xB5FE             PUSH     {R1-R7,LR}
    577          	//u8 cyCnt;
    578          	//u8 i;
    579          	u16 wTemp;
    580          	float fTemp;
    581          	u16 wUpValue;
    582          	u16 wDownValue;
    583          	
    584          	if (3 == g_cyCtrlFlag) //控制标准  1：只有速度， 2：有速度，有篷布状态 3：有速度，有篷布状态，有电子围栏
   \        0x2   0x....             LDR      R0,??DataTable5_8
   \        0x4   0x7801             LDRB     R1,[R0, #+0]
   \        0x6   0x2903             CMP      R1,#+3
   \        0x8   0xD10B             BNE      ??LOAD_CheckUnload_1
    585          	{
    586          		if (0x01 == g_cyElState) //电子围栏状态 0x00表示车辆停车场，0x01表示渣土装载区，0x02表示渣土卸载区，0x03表示其他区域
   \        0xA   0x....             LDR      R1,??DataTable5_9
   \        0xC   0x7809             LDRB     R1,[R1, #+0]
   \        0xE   0x2901             CMP      R1,#+1
   \       0x10   0xD101             BNE      ??LOAD_CheckUnload_2
    587          		{
    588          			return (false);
   \       0x12   0x2000             MOVS     R0,#+0
   \       0x14   0xE0C6             B        ??LOAD_CheckUnload_3
    589          		}
    590          		
    591          		if (0x01 == g_cyPbState) //篷布状态 0x00表示篷布打开，0x01表示篷布关闭；
   \                     ??LOAD_CheckUnload_2: (+1)
   \       0x16   0x....             LDR      R1,??DataTable5_10
   \       0x18   0x7809             LDRB     R1,[R1, #+0]
   \       0x1A   0x2901             CMP      R1,#+1
   \       0x1C   0xD101             BNE      ??LOAD_CheckUnload_1
    592          		{
    593          			return (false);
   \       0x1E   0x2000             MOVS     R0,#+0
   \       0x20   0xE0C0             B        ??LOAD_CheckUnload_3
    594          		}
    595          	}
    596          	
    597          	if (2 == g_cyCtrlFlag) //控制标准  1：只有速度， 2：有速度，有篷布状态 3：有速度，有篷布状态，有电子围栏
   \                     ??LOAD_CheckUnload_1: (+1)
   \       0x22   0x7800             LDRB     R0,[R0, #+0]
   \       0x24   0x2802             CMP      R0,#+2
   \       0x26   0xD105             BNE      ??LOAD_CheckUnload_4
    598          	{
    599          		if (0x01 == g_cyPbState) //篷布状态 0x00表示篷布打开，0x01表示篷布关闭；
   \       0x28   0x....             LDR      R0,??DataTable5_10
   \       0x2A   0x7800             LDRB     R0,[R0, #+0]
   \       0x2C   0x2801             CMP      R0,#+1
   \       0x2E   0xD101             BNE      ??LOAD_CheckUnload_4
    600          		{
    601          			return (false);
   \       0x30   0x2000             MOVS     R0,#+0
   \       0x32   0xE0B7             B        ??LOAD_CheckUnload_3
    602          		}
    603          	}
    604          	
    605          	g_wCheckBuffer[g_cyCheckCnt] = g_wLoadADBuffer[GET_START_DATA_NUM];
   \                     ??LOAD_CheckUnload_4: (+1)
   \       0x34   0x....             LDR      R1,??DataTable5
   \       0x36   0x....             LDR      R0,??DataTable5_11
   \       0x38   0x4A2D             LDR      R2,??LOAD_CheckUnload_0
   \       0x3A   0x8A92             LDRH     R2,[R2, #+20]
   \       0x3C   0x780B             LDRB     R3,[R1, #+0]
   \       0x3E   0x2402             MOVS     R4,#+2
   \       0x40   0x4363             MULS     R3,R4,R3
   \       0x42   0x52C2             STRH     R2,[R0, R3]
    606          	g_cyCheckCnt++;
   \       0x44   0x780A             LDRB     R2,[R1, #+0]
   \       0x46   0x1C52             ADDS     R2,R2,#+1
   \       0x48   0x700A             STRB     R2,[R1, #+0]
    607          	if (MAX_CHECK_NUM == g_cyCheckCnt)
   \       0x4A   0x780A             LDRB     R2,[R1, #+0]
   \       0x4C   0x2A0A             CMP      R2,#+10
   \       0x4E   0xD000             BEQ      .+4
   \       0x50   0xE0A7             B        ??LOAD_CheckUnload_5
    608          	{
    609          		g_cyCheckCnt = 0;
   \       0x52   0x2500             MOVS     R5,#+0
   \       0x54   0x002A             MOVS     R2,R5
   \       0x56   0x700A             STRB     R2,[R1, #+0]
    610          		wTemp = LOAD_GetAverage(g_wCheckBuffer, MAX_CHECK_NUM);
   \       0x58   0x210A             MOVS     R1,#+10
   \       0x5A   0x....'....        BL       LOAD_GetAverage
   \       0x5E   0x0006             MOVS     R6,R0
    611          		
    612          		if (MAX_UNLOAD_NUM > g_cyUnLoadDataCnt)
   \       0x60   0x....             LDR      R4,??DataTable6
   \       0x62   0x7820             LDRB     R0,[R4, #+0]
   \       0x64   0x280A             CMP      R0,#+10
   \       0x66   0xDA08             BGE      ??LOAD_CheckUnload_6
    613          		{
    614          			g_wUnLoadBuffer[g_cyUnLoadDataCnt] = wTemp;
   \       0x68   0x....             LDR      R0,??DataTable6_1
   \       0x6A   0x7821             LDRB     R1,[R4, #+0]
   \       0x6C   0x2202             MOVS     R2,#+2
   \       0x6E   0x4351             MULS     R1,R2,R1
   \       0x70   0x5246             STRH     R6,[R0, R1]
    615          			g_cyUnLoadDataCnt++;
   \       0x72   0x7820             LDRB     R0,[R4, #+0]
   \       0x74   0x1C40             ADDS     R0,R0,#+1
   \       0x76   0x7020             STRB     R0,[R4, #+0]
   \       0x78   0xE005             B        ??LOAD_CheckUnload_7
    616          		}
    617          		else
    618          		{
    619          			LOAD_FifoData(g_wUnLoadBuffer, wTemp, MAX_UNLOAD_NUM);
   \                     ??LOAD_CheckUnload_6: (+1)
   \       0x7A   0x220A             MOVS     R2,#+10
   \       0x7C   0x0031             MOVS     R1,R6
   \       0x7E   0xB289             UXTH     R1,R1
   \       0x80   0x....             LDR      R0,??DataTable6_1
   \       0x82   0x....'....        BL       LOAD_FifoData
    620          		}
    621          		/*
    622          		if (MAX_UNLOAD_NUM == g_cyUnLoadDataCnt)
    623          		{
    624          			cyCnt = 0;
    625          			for (i = 0; i < MAX_UNLOAD_NUM - 1; i++)
    626          			{
    627          				if (g_wUnLoadBuffer[i] > g_wUnLoadBuffer[i + 1] )
    628          				{
    629          					cyCnt++;
    630          				}
    631          			}
    632          			
    633          			if (5 <= cyCnt)
    634          			{
    635          				return (true);
    636          			}
    637          		}*/
    638          		
    639          		if (1 < g_cyUnLoadDataCnt)
   \                     ??LOAD_CheckUnload_7: (+1)
   \       0x86   0x7820             LDRB     R0,[R4, #+0]
   \       0x88   0x2802             CMP      R0,#+2
   \       0x8A   0xDB33             BLT      ??LOAD_CheckUnload_8
    640          		{
    641          			if ( (g_wUnLoadBuffer[g_cyUnLoadDataCnt - 2] + 5) > g_wUnLoadBuffer[g_cyUnLoadDataCnt - 1] )
   \       0x8C   0x....             LDR      R0,??DataTable6_1
   \       0x8E   0x7821             LDRB     R1,[R4, #+0]
   \       0x90   0x2202             MOVS     R2,#+2
   \       0x92   0x4351             MULS     R1,R2,R1
   \       0x94   0x1841             ADDS     R1,R0,R1
   \       0x96   0x1E89             SUBS     R1,R1,#+2
   \       0x98   0x8809             LDRH     R1,[R1, #+0]
   \       0x9A   0x7822             LDRB     R2,[R4, #+0]
   \       0x9C   0x2302             MOVS     R3,#+2
   \       0x9E   0x435A             MULS     R2,R3,R2
   \       0xA0   0x1882             ADDS     R2,R0,R2
   \       0xA2   0x1F12             SUBS     R2,R2,#+4
   \       0xA4   0x8812             LDRH     R2,[R2, #+0]
   \       0xA6   0x1D52             ADDS     R2,R2,#+5
   \       0xA8   0x4291             CMP      R1,R2
   \       0xAA   0xDA04             BGE      ??LOAD_CheckUnload_9
    642          			{
    643          				g_cyCUBuffer[1]++;
   \       0xAC   0x....             LDR      R0,??DataTable6_2
   \       0xAE   0x7841             LDRB     R1,[R0, #+1]
   \       0xB0   0x1C49             ADDS     R1,R1,#+1
   \       0xB2   0x7041             STRB     R1,[R0, #+1]
   \       0xB4   0xE012             B        ??LOAD_CheckUnload_10
    644          			}
    645          			else if ( (g_wUnLoadBuffer[g_cyUnLoadDataCnt - 2] + 5) < g_wUnLoadBuffer[g_cyUnLoadDataCnt - 1] )
   \                     ??LOAD_CheckUnload_9: (+1)
   \       0xB6   0x7821             LDRB     R1,[R4, #+0]
   \       0xB8   0x2202             MOVS     R2,#+2
   \       0xBA   0x4351             MULS     R1,R2,R1
   \       0xBC   0x1841             ADDS     R1,R0,R1
   \       0xBE   0x1F09             SUBS     R1,R1,#+4
   \       0xC0   0x8809             LDRH     R1,[R1, #+0]
   \       0xC2   0x1D49             ADDS     R1,R1,#+5
   \       0xC4   0x7822             LDRB     R2,[R4, #+0]
   \       0xC6   0x2302             MOVS     R3,#+2
   \       0xC8   0x435A             MULS     R2,R3,R2
   \       0xCA   0x1880             ADDS     R0,R0,R2
   \       0xCC   0x1E80             SUBS     R0,R0,#+2
   \       0xCE   0x8800             LDRH     R0,[R0, #+0]
   \       0xD0   0x4281             CMP      R1,R0
   \       0xD2   0xDA03             BGE      ??LOAD_CheckUnload_10
    646          			{
    647          				g_cyCUBuffer[0]++;
   \       0xD4   0x....             LDR      R0,??DataTable6_2
   \       0xD6   0x7801             LDRB     R1,[R0, #+0]
   \       0xD8   0x1C49             ADDS     R1,R1,#+1
   \       0xDA   0x7001             STRB     R1,[R0, #+0]
    648          			}
    649          			
    650          			
    651          			if ( (4 <= g_cyCUBuffer[1]) && (3 <= g_cyCUBuffer[0]) )
   \                     ??LOAD_CheckUnload_10: (+1)
   \       0xDC   0x....             LDR      R0,??DataTable6_2
   \       0xDE   0x7841             LDRB     R1,[R0, #+1]
   \       0xE0   0x2904             CMP      R1,#+4
   \       0xE2   0xDB07             BLT      ??LOAD_CheckUnload_8
   \       0xE4   0x7800             LDRB     R0,[R0, #+0]
   \       0xE6   0x2803             CMP      R0,#+3
   \       0xE8   0xDB04             BLT      ??LOAD_CheckUnload_8
    652          			{
    653          				return (true);
   \       0xEA   0x2001             MOVS     R0,#+1
   \       0xEC   0xE05A             B        ??LOAD_CheckUnload_3
   \       0xEE   0xBF00             Nop
   \                     ??LOAD_CheckUnload_0:
   \       0xF0   0x....'....        DC32     g_wLoadADBuffer
    654          			}
    655          		} 
    656          		
    657          		//小于(空载值 + (满载值 C 空载值) * 30%)
    658          		//大于(空载值 + (满载值 C 空载值) * 20%)
    659          		fTemp = g_wFullValue - g_wEmptyValue;
   \                     ??LOAD_CheckUnload_8: (+1)
   \       0xF4   0x....             LDR      R7,??DataTable6_6
   \       0xF6   0x....             LDR      R0,??DataTable6_7
   \       0xF8   0x8800             LDRH     R0,[R0, #+0]
   \       0xFA   0x8839             LDRH     R1,[R7, #+0]
   \       0xFC   0x1A40             SUBS     R0,R0,R1
   \       0xFE   0x....'....        BL       __aeabi_i2f
   \      0x102   0x9002             STR      R0,[SP, #+8]
    660          		wUpValue = (u16)(g_wEmptyValue + fTemp * 0.3);
   \      0x104   0x8838             LDRH     R0,[R7, #+0]
   \      0x106   0x....'....        BL       __aeabi_ui2d
   \      0x10A   0x9000             STR      R0,[SP, #+0]
   \      0x10C   0x9101             STR      R1,[SP, #+4]
   \      0x10E   0x9802             LDR      R0,[SP, #+8]
   \      0x110   0x....'....        BL       __aeabi_f2d
   \      0x114   0x....             ADR      R2,??DataTable6_3
   \      0x116   0xCA0C             LDM      R2,{R2,R3}
   \      0x118   0x....'....        BL       __aeabi_dmul
   \      0x11C   0x9A00             LDR      R2,[SP, #+0]
   \      0x11E   0x9B01             LDR      R3,[SP, #+4]
   \      0x120   0x....'....        BL       __aeabi_dadd
   \      0x124   0x....'....        BL       __aeabi_d2iz
   \      0x128   0x0004             MOVS     R4,R0
    661          		wDownValue = (u16)(g_wEmptyValue - fTemp * 0.2);
   \      0x12A   0x8838             LDRH     R0,[R7, #+0]
   \      0x12C   0x....'....        BL       __aeabi_ui2d
   \      0x130   0x9000             STR      R0,[SP, #+0]
   \      0x132   0x9101             STR      R1,[SP, #+4]
   \      0x134   0x9802             LDR      R0,[SP, #+8]
   \      0x136   0x....'....        BL       __aeabi_f2d
   \      0x13A   0x....             ADR      R2,??DataTable6_4
   \      0x13C   0xCA0C             LDM      R2,{R2,R3}
   \      0x13E   0x....'....        BL       __aeabi_dmul
   \      0x142   0x0002             MOVS     R2,R0
   \      0x144   0x000B             MOVS     R3,R1
   \      0x146   0x9800             LDR      R0,[SP, #+0]
   \      0x148   0x9901             LDR      R1,[SP, #+4]
   \      0x14A   0x....'....        BL       __aeabi_dsub
   \      0x14E   0x....'....        BL       __aeabi_d2iz
    662          			
    663          		if ( (wDownValue < wTemp) && (wTemp < wUpValue) )
   \      0x152   0x0031             MOVS     R1,R6
   \      0x154   0xB280             UXTH     R0,R0
   \      0x156   0xB289             UXTH     R1,R1
   \      0x158   0x4288             CMP      R0,R1
   \      0x15A   0xD220             BCS      ??LOAD_CheckUnload_11
   \      0x15C   0x0030             MOVS     R0,R6
   \      0x15E   0xB280             UXTH     R0,R0
   \      0x160   0xB2A4             UXTH     R4,R4
   \      0x162   0x42A0             CMP      R0,R4
   \      0x164   0xD21B             BCS      ??LOAD_CheckUnload_11
    664          		{
    665          			g_wUnloadCnt++;
   \      0x166   0x....             LDR      R0,??DataTable7
   \      0x168   0x8801             LDRH     R1,[R0, #+0]
   \      0x16A   0x1C49             ADDS     R1,R1,#+1
   \      0x16C   0x8001             STRH     R1,[R0, #+0]
    666          			if (1 < g_wUnloadCnt)
   \      0x16E   0x8801             LDRH     R1,[R0, #+0]
   \      0x170   0x2902             CMP      R1,#+2
   \      0x172   0xDB0D             BLT      ??LOAD_CheckUnload_12
    667          			{
    668          				if ( ( (g_wOldUnLoadValue - 3) < wTemp) && (wTemp < (g_wOldUnLoadValue + 3) ) )  //斜波停车
   \      0x174   0x....             LDR      R1,??DataTable6_5
   \      0x176   0x880A             LDRH     R2,[R1, #+0]
   \      0x178   0x1ED2             SUBS     R2,R2,#+3
   \      0x17A   0x0033             MOVS     R3,R6
   \      0x17C   0xB29B             UXTH     R3,R3
   \      0x17E   0x429A             CMP      R2,R3
   \      0x180   0xDA06             BGE      ??LOAD_CheckUnload_12
   \      0x182   0x0032             MOVS     R2,R6
   \      0x184   0xB292             UXTH     R2,R2
   \      0x186   0x8809             LDRH     R1,[R1, #+0]
   \      0x188   0x1CC9             ADDS     R1,R1,#+3
   \      0x18A   0x428A             CMP      R2,R1
   \      0x18C   0xDA00             BGE      ??LOAD_CheckUnload_12
    669          				{
    670          					g_wUnloadCnt = 0;
   \      0x18E   0x8005             STRH     R5,[R0, #+0]
    671          				}
    672          			}
    673          			
    674          			g_wOldUnLoadValue = wTemp;
   \                     ??LOAD_CheckUnload_12: (+1)
   \      0x190   0x....             LDR      R1,??DataTable6_5
   \      0x192   0x800E             STRH     R6,[R1, #+0]
    675          			
    676          			if (4 == g_wUnloadCnt)  //连续4秒钟都小于50% 判断卸载成功
   \      0x194   0x8800             LDRH     R0,[R0, #+0]
   \      0x196   0x2804             CMP      R0,#+4
   \      0x198   0xD103             BNE      ??LOAD_CheckUnload_5
    677          			{
    678          				return (true);
   \      0x19A   0x2001             MOVS     R0,#+1
   \      0x19C   0xE002             B        ??LOAD_CheckUnload_3
    679          			}
    680          		}
    681          		else
    682          		{
    683          			g_wUnloadCnt = 0;
   \                     ??LOAD_CheckUnload_11: (+1)
   \      0x19E   0x....             LDR      R0,??DataTable7
   \      0x1A0   0x8005             STRH     R5,[R0, #+0]
    684          		}
    685          	}
    686          	
    687          	return (false);
   \                     ??LOAD_CheckUnload_5: (+1)
   \      0x1A2   0x2000             MOVS     R0,#+0
   \                     ??LOAD_CheckUnload_3: (+1)
   \      0x1A4   0xBDFE             POP      {R1-R7,PC}       ;; return
    688          }
    689          
    690          
    691          //**************************************************************************************************
    692          // 名称         : LOAD_HandleSuccessUnload()
    693          // 创建日期     : 2015-09-30
    694          // 作者         : 陈锦
    695          // 功能         : 卸载成功处理
    696          // 输入参数     : 无
    697          // 输出参数     : 无
    698          // 返回结果     : 无
    699          // 注意和说明   :
    700          // 修改内容     :
    701          //**************************************************************************************************
    702          

   \                                 In section .text, align 2, keep-with-next
    703          static void LOAD_HandleSuccessUnload(void)
    704          {
   \                     LOAD_HandleSuccessUnload: (+1)
   \        0x0   0xB5F8             PUSH     {R3-R7,LR}
    705          	u16 wTemp;
    706          	u8  i;
    707          	float fTemp;
    708          		
    709          	g_cyExitFlag = true;
   \        0x2   0x2601             MOVS     R6,#+1
   \        0x4   0x....             LDR      R0,??DataTable7_1
   \        0x6   0x7006             STRB     R6,[R0, #+0]
    710          	
    711          	if (2 < g_cyCurrentStateCnt) //有学习成功数据
   \        0x8   0x....             LDR      R4,??DataTable7_2
   \        0xA   0x7820             LDRB     R0,[R4, #+0]
   \        0xC   0x2803             CMP      R0,#+3
   \        0xE   0xDA00             BGE      .+4
   \       0x10   0xE08F             B        ??LOAD_HandleSuccessUnload_0
    712          	{
    713          		if (100 < GetVariance(g_wCurrentStateBuffer, g_cyCurrentStateCnt) )
   \       0x12   0x....             LDR      R5,??DataTable7_3
   \       0x14   0x7821             LDRB     R1,[R4, #+0]
   \       0x16   0x0028             MOVS     R0,R5
   \       0x18   0x....'....        BL       GetVariance
   \       0x1C   0x....             LDR      R1,??DataTable7_4  ;; 0x42c80001
   \       0x1E   0x....'....        BL       __aeabi_cfrcmple
   \       0x22   0xD800             BHI      .+4
   \       0x24   0xE085             B        ??LOAD_HandleSuccessUnload_1
    714          		{
    715          			return;
    716          		}
    717          			
    718          		wTemp = LOAD_GetAverage(g_wCurrentStateBuffer, g_cyCurrentStateCnt);
   \                     ??LOAD_HandleSuccessUnload_2: (+1)
   \       0x26   0x7821             LDRB     R1,[R4, #+0]
   \       0x28   0x0028             MOVS     R0,R5
   \       0x2A   0x....'....        BL       LOAD_GetAverage
   \       0x2E   0x0004             MOVS     R4,R0
    719          		if ( (g_wEmptyValue + 100) > wTemp )
   \       0x30   0x....             LDR      R2,??DataTable6_6
   \       0x32   0x0020             MOVS     R0,R4
   \       0x34   0xB280             UXTH     R0,R0
   \       0x36   0x8811             LDRH     R1,[R2, #+0]
   \       0x38   0x3164             ADDS     R1,R1,#+100
   \       0x3A   0x4288             CMP      R0,R1
   \       0x3C   0xDB79             BLT      ??LOAD_HandleSuccessUnload_1
    720          		{
    721          			return;
    722          		}
    723          		
    724          		if (LOAD_FULL_STUDY != (g_cyStudyState & LOAD_FULL_STUDY) ) //满载值没有学习成功 不受限制
   \                     ??LOAD_HandleSuccessUnload_3: (+1)
   \       0x3E   0x2002             MOVS     R0,#+2
   \       0x40   0x....             LDR      R1,??DataTable7_5
   \       0x42   0x780B             LDRB     R3,[R1, #+0]
   \       0x44   0x4003             ANDS     R3,R3,R0
   \       0x46   0x2B00             CMP      R3,#+0
   \       0x48   0xD11E             BNE      ??LOAD_HandleSuccessUnload_4
    725          		{
    726          			g_wFullValue = wTemp;
   \       0x4A   0x....             LDR      R2,??DataTable6_7
   \       0x4C   0x8014             STRH     R4,[R2, #+0]
    727          			for (i = 0; i < LOAD_DATA_FIFO_NUM; i++)
   \       0x4E   0x2500             MOVS     R5,#+0
   \       0x50   0x002A             MOVS     R2,R5
   \       0x52   0xE008             B        ??LOAD_HandleSuccessUnload_5
    728          			{
    729          				g_wFullBuffer[i] = wTemp;
   \                     ??LOAD_HandleSuccessUnload_6: (+1)
   \       0x54   0x....             LDR      R3,??DataTable7_6
   \       0x56   0x469C             MOV      R12,R3
   \       0x58   0x0017             MOVS     R7,R2
   \       0x5A   0xB2FF             UXTB     R7,R7
   \       0x5C   0x2302             MOVS     R3,#+2
   \       0x5E   0x435F             MULS     R7,R3,R7
   \       0x60   0x4663             MOV      R3,R12
   \       0x62   0x53DC             STRH     R4,[R3, R7]
    730          			}
   \       0x64   0x1C52             ADDS     R2,R2,#+1
   \                     ??LOAD_HandleSuccessUnload_5: (+1)
   \       0x66   0x0013             MOVS     R3,R2
   \       0x68   0xB2DB             UXTB     R3,R3
   \       0x6A   0x2B0A             CMP      R3,#+10
   \       0x6C   0xDBF2             BLT      ??LOAD_HandleSuccessUnload_6
    731          				
    732          			g_cyStudyState |= LOAD_FULL_STUDY;
   \       0x6E   0x780A             LDRB     R2,[R1, #+0]
   \       0x70   0x4310             ORRS     R0,R0,R2
   \       0x72   0x7008             STRB     R0,[R1, #+0]
    733          			ProductPara.bFlashWEn = FLASH_WR_ENABLE;
   \       0x74   0x....             LDR      R4,??DataTable8_10
   \       0x76   0x7026             STRB     R6,[R4, #+0]
    734          			I2C1_WNBytesMul3T(EEPROM_ADDRESS, LOAD_FULL_FIFO, 20,  (u8 *)&g_wFullBuffer);
   \       0x78   0x....             LDR      R3,??DataTable7_6
   \       0x7A   0x2214             MOVS     R2,#+20
   \       0x7C   0x211D             MOVS     R1,#+29
   \       0x7E   0x20A0             MOVS     R0,#+160
   \       0x80   0x....'....        BL       I2C1_WNBytesMul3T
    735          			ProductPara.bFlashWEn = FLASH_WR_DISABLE;
   \       0x84   0x7025             STRB     R5,[R4, #+0]
   \       0x86   0xE054             B        ??LOAD_HandleSuccessUnload_0
    736          		}
    737          		else
    738          		{
    739          			if (LOAD_STUDY == g_cyStudyState)  //都学习成功 不受限制
   \                     ??LOAD_HandleSuccessUnload_4: (+1)
   \       0x88   0x7808             LDRB     R0,[R1, #+0]
   \       0x8A   0x2803             CMP      R0,#+3
   \       0x8C   0xD13A             BNE      ??LOAD_HandleSuccessUnload_7
    740          			{
    741          				//新满载值如果大于(原满载值-原来空载值）*50% + 原来满载值，那么按(原满载值-原来空载值）*50% + 原来满载值作为新的满载值。
    742          				//新满载值如果小于原来满载值 - (原满载值-原来空载值）* 50%，那么按原来满载值 - (原满载值-原来空载值）* 50%作为新的满载值
    743          				fTemp = g_wFullValue - g_wEmptyValue;
   \       0x8E   0x....             LDR      R5,??DataTable6_7
   \       0x90   0x8828             LDRH     R0,[R5, #+0]
   \       0x92   0x8811             LDRH     R1,[R2, #+0]
   \       0x94   0x1A40             SUBS     R0,R0,R1
   \       0x96   0x....'....        BL       __aeabi_i2f
    744          				fTemp *= 0.5;
   \       0x9A   0x....'....        BL       __aeabi_f2d
   \       0x9E   0x2200             MOVS     R2,#+0
   \       0xA0   0x....             LDR      R3,??DataTable7_7  ;; 0x3fe00000
   \       0xA2   0x....'....        BL       __aeabi_dmul
   \       0xA6   0x....'....        BL       __aeabi_d2f
   \       0xAA   0x0007             MOVS     R7,R0
    745          				if (wTemp > (g_wFullValue + fTemp) )
   \       0xAC   0x0020             MOVS     R0,R4
   \       0xAE   0xB280             UXTH     R0,R0
   \       0xB0   0x....'....        BL       __aeabi_ui2f
   \       0xB4   0x0001             MOVS     R1,R0
   \       0xB6   0x9100             STR      R1,[SP, #+0]
   \       0xB8   0x8828             LDRH     R0,[R5, #+0]
   \       0xBA   0x....'....        BL       __aeabi_ui2f
   \       0xBE   0x0001             MOVS     R1,R0
   \       0xC0   0x0038             MOVS     R0,R7
   \       0xC2   0x....'....        BL       __aeabi_fadd
   \       0xC6   0x9900             LDR      R1,[SP, #+0]
   \       0xC8   0x....'....        BL       __aeabi_cfcmple
   \       0xCC   0xD205             BCS      ??LOAD_HandleSuccessUnload_8
    746          				{
    747          					wTemp = g_wFullValue + (u16)fTemp;
   \       0xCE   0x882C             LDRH     R4,[R5, #+0]
   \       0xD0   0x0038             MOVS     R0,R7
   \       0xD2   0x....'....        BL       __aeabi_f2iz
   \       0xD6   0x1824             ADDS     R4,R4,R0
   \       0xD8   0xE014             B        ??LOAD_HandleSuccessUnload_7
    748          				}
    749          				else if (wTemp < (g_wFullValue - fTemp) )
   \                     ??LOAD_HandleSuccessUnload_8: (+1)
   \       0xDA   0x8828             LDRH     R0,[R5, #+0]
   \       0xDC   0x....'....        BL       __aeabi_ui2f
   \       0xE0   0x0039             MOVS     R1,R7
   \       0xE2   0x....'....        BL       __aeabi_fsub
   \       0xE6   0x0001             MOVS     R1,R0
   \       0xE8   0x9100             STR      R1,[SP, #+0]
   \       0xEA   0x0020             MOVS     R0,R4
   \       0xEC   0xB280             UXTH     R0,R0
   \       0xEE   0x....'....        BL       __aeabi_ui2f
   \       0xF2   0x9900             LDR      R1,[SP, #+0]
   \       0xF4   0x....'....        BL       __aeabi_cfcmple
   \       0xF8   0xD204             BCS      ??LOAD_HandleSuccessUnload_7
    750          				{
    751          					wTemp = g_wFullValue - (u16)fTemp;
   \       0xFA   0x882C             LDRH     R4,[R5, #+0]
   \       0xFC   0x0038             MOVS     R0,R7
   \       0xFE   0x....'....        BL       __aeabi_f2iz
   \      0x102   0x1A24             SUBS     R4,R4,R0
    752          				}					
    753          			}
    754          				
    755          			//if (false == g_cyOverFlag) //不超载
    756          			//{
    757          				LOAD_FifoData(g_wFullBuffer, wTemp, LOAD_DATA_FIFO_NUM);
   \                     ??LOAD_HandleSuccessUnload_7: (+1)
   \      0x104   0x....             LDR      R5,??DataTable7_6
   \      0x106   0x220A             MOVS     R2,#+10
   \      0x108   0x0021             MOVS     R1,R4
   \      0x10A   0xB289             UXTH     R1,R1
   \      0x10C   0x0028             MOVS     R0,R5
   \      0x10E   0x....'....        BL       LOAD_FifoData
    758          				g_wFullValue = LOAD_GetAverage(g_wFullBuffer, LOAD_DATA_FIFO_NUM);
   \      0x112   0x210A             MOVS     R1,#+10
   \      0x114   0x0028             MOVS     R0,R5
   \      0x116   0x....'....        BL       LOAD_GetAverage
   \      0x11A   0x....             LDR      R1,??DataTable6_7
   \      0x11C   0x8008             STRH     R0,[R1, #+0]
    759          				ProductPara.bFlashWEn = FLASH_WR_ENABLE;
   \      0x11E   0x....             LDR      R4,??DataTable8_10
   \      0x120   0x7026             STRB     R6,[R4, #+0]
    760          				I2C1_WNBytesMul3T(EEPROM_ADDRESS, LOAD_FULL_FIFO, 20,  (u8 *)&g_wFullBuffer);
   \      0x122   0x002B             MOVS     R3,R5
   \      0x124   0x2214             MOVS     R2,#+20
   \      0x126   0x211D             MOVS     R1,#+29
   \      0x128   0x20A0             MOVS     R0,#+160
   \      0x12A   0x....'....        BL       I2C1_WNBytesMul3T
    761          				ProductPara.bFlashWEn = FLASH_WR_DISABLE;
   \      0x12E   0x2000             MOVS     R0,#+0
   \      0x130   0x7020             STRB     R0,[R4, #+0]
    762          			//}
    763          		}
    764          	} 
    765          }
   \                     ??LOAD_HandleSuccessUnload_0: (+1)
   \                     ??LOAD_HandleSuccessUnload_1: (+1)
   \      0x132   0xBDF1             POP      {R0,R4-R7,PC}    ;; return
    766          
    767          //**************************************************************************************************
    768          // 名称         : LOAD_CheckRunUnload()
    769          // 创建日期     : 2015-09-30
    770          // 作者         : 陈锦
    771          // 功能         : 检查运行中卸载
    772          // 输入参数     : 无
    773          // 输出参数     : 无
    774          // 返回结果     : 无
    775          // 注意和说明   :
    776          // 修改内容     :
    777          //**************************************************************************************************
    778          

   \                                 In section .bss, align 1
    779          static u8 g_cyFifiCntRun;
   \                     g_cyFifiCntRun:
   \        0x0                      DS8 1

   \                                 In section .bss, align 1
    780          static u8  g_cyRunUnLoadDataCnt;
   \                     g_cyRunUnLoadDataCnt:
   \        0x0                      DS8 1

   \                                 In section .bss, align 1
    781          static u8  g_cyRunUnloadCnt;
   \                     g_cyRunUnloadCnt:
   \        0x0                      DS8 1
    782          

   \                                 In section .text, align 2, keep-with-next
    783          void LOAD_CheckRunUnload(void)
    784          {
   \                     LOAD_CheckRunUnload: (+1)
   \        0x0   0xB5FE             PUSH     {R1-R7,LR}
    785          	u16 wTemp;
    786          	float fTemp;
    787          	u16 wUpValue;
    788          	u16 wDownValue;
    789          	
    790          	g_wFifoBuffer[g_cyFifiCntRun] = g_wLoadADBuffer[GET_START_DATA_NUM];
   \        0x2   0x....             LDR      R0,??DataTable8
   \        0x4   0x....             LDR      R5,??DataTable8_1
   \        0x6   0x....             LDR      R1,??DataTable8_2
   \        0x8   0x8A89             LDRH     R1,[R1, #+20]
   \        0xA   0x7802             LDRB     R2,[R0, #+0]
   \        0xC   0x2302             MOVS     R3,#+2
   \        0xE   0x435A             MULS     R2,R3,R2
   \       0x10   0x52A9             STRH     R1,[R5, R2]
    791          	g_cyFifiCntRun++;
   \       0x12   0x7801             LDRB     R1,[R0, #+0]
   \       0x14   0x1C49             ADDS     R1,R1,#+1
   \       0x16   0x7001             STRB     R1,[R0, #+0]
    792          	if (MAX_FIFO_RECORD_NUM == g_cyFifiCntRun)
   \       0x18   0x7801             LDRB     R1,[R0, #+0]
   \       0x1A   0x290A             CMP      R1,#+10
   \       0x1C   0xD172             BNE      ??LOAD_CheckRunUnload_0
    793          	{
    794          		g_cyFifiCntRun = 0;
   \       0x1E   0x2400             MOVS     R4,#+0
   \       0x20   0x7004             STRB     R4,[R0, #+0]
    795          		
    796          		if (300 < GetVariance(g_wFifoBuffer, MAX_FIFO_RECORD_NUM) )
   \       0x22   0x....             LDR      R6,??DataTable8_3  ;; 0x43960001
   \       0x24   0x210A             MOVS     R1,#+10
   \       0x26   0x0028             MOVS     R0,R5
   \       0x28   0x....'....        BL       GetVariance
   \       0x2C   0x0031             MOVS     R1,R6
   \       0x2E   0x....'....        BL       __aeabi_cfrcmple
   \       0x32   0xD802             BHI      ??LOAD_CheckRunUnload_1
    797          		{
    798          			g_cyRunUnloadCnt = 0;
   \       0x34   0x....             LDR      R0,??DataTable8_11
   \       0x36   0x7004             STRB     R4,[R0, #+0]
    799          			return;
   \       0x38   0xE064             B        ??LOAD_CheckRunUnload_2
    800          		}
    801          		
    802          		g_wUnLoadBuffer[g_cyRunUnLoadDataCnt] = LOAD_GetAverage(g_wFifoBuffer, MAX_FIFO_RECORD_NUM);
   \                     ??LOAD_CheckRunUnload_1: (+1)
   \       0x3A   0x210A             MOVS     R1,#+10
   \       0x3C   0x0028             MOVS     R0,R5
   \       0x3E   0x....'....        BL       LOAD_GetAverage
   \       0x42   0x....             LDR      R1,??DataTable8_4
   \       0x44   0x....             LDR      R5,??DataTable8_5
   \       0x46   0x780A             LDRB     R2,[R1, #+0]
   \       0x48   0x2302             MOVS     R3,#+2
   \       0x4A   0x435A             MULS     R2,R3,R2
   \       0x4C   0x52A8             STRH     R0,[R5, R2]
    803          		g_cyRunUnLoadDataCnt++;
   \       0x4E   0x7808             LDRB     R0,[R1, #+0]
   \       0x50   0x1C40             ADDS     R0,R0,#+1
   \       0x52   0x7008             STRB     R0,[R1, #+0]
    804          		if (MAX_RUN_UNLOAD_NUM == g_cyRunUnLoadDataCnt)
   \       0x54   0x7808             LDRB     R0,[R1, #+0]
   \       0x56   0x280A             CMP      R0,#+10
   \       0x58   0xD154             BNE      ??LOAD_CheckRunUnload_0
    805          		{
    806          			g_cyRunUnLoadDataCnt = 0;
   \       0x5A   0x700C             STRB     R4,[R1, #+0]
    807          			if (300 < GetVariance(g_wUnLoadBuffer, MAX_RUN_UNLOAD_NUM) )
   \       0x5C   0x210A             MOVS     R1,#+10
   \       0x5E   0x0028             MOVS     R0,R5
   \       0x60   0x....'....        BL       GetVariance
   \       0x64   0x0031             MOVS     R1,R6
   \       0x66   0x....'....        BL       __aeabi_cfrcmple
   \       0x6A   0xD802             BHI      ??LOAD_CheckRunUnload_3
    808          			{
    809          				g_cyRunUnloadCnt = 0;
   \       0x6C   0x....             LDR      R0,??DataTable8_11
   \       0x6E   0x7004             STRB     R4,[R0, #+0]
    810          				return;
   \       0x70   0xE048             B        ??LOAD_CheckRunUnload_2
    811          			}
    812          			
    813          			//小于(空载值 + (满载值 C 空载值) * 30%)
    814          			//大于(空载值 + (满载值 C 空载值) * 20%)
    815          			wTemp = LOAD_GetAverage(g_wUnLoadBuffer, MAX_RUN_UNLOAD_NUM);
   \                     ??LOAD_CheckRunUnload_3: (+1)
   \       0x72   0x210A             MOVS     R1,#+10
   \       0x74   0x0028             MOVS     R0,R5
   \       0x76   0x....'....        BL       LOAD_GetAverage
   \       0x7A   0x0005             MOVS     R5,R0
    816          			fTemp = g_wFullValue - g_wEmptyValue;
   \       0x7C   0x....             LDR      R7,??DataTable8_6
   \       0x7E   0x....             LDR      R0,??DataTable8_7
   \       0x80   0x8800             LDRH     R0,[R0, #+0]
   \       0x82   0x8839             LDRH     R1,[R7, #+0]
   \       0x84   0x1A40             SUBS     R0,R0,R1
   \       0x86   0x....'....        BL       __aeabi_i2f
   \       0x8A   0x9002             STR      R0,[SP, #+8]
    817          			wUpValue = (u16)(g_wEmptyValue + fTemp * 0.3);
   \       0x8C   0x8838             LDRH     R0,[R7, #+0]
   \       0x8E   0x....'....        BL       __aeabi_ui2d
   \       0x92   0x9000             STR      R0,[SP, #+0]
   \       0x94   0x9101             STR      R1,[SP, #+4]
   \       0x96   0x9802             LDR      R0,[SP, #+8]
   \       0x98   0x....'....        BL       __aeabi_f2d
   \       0x9C   0x....             ADR      R2,??DataTable8_8
   \       0x9E   0xCA0C             LDM      R2,{R2,R3}
   \       0xA0   0x....'....        BL       __aeabi_dmul
   \       0xA4   0x9A00             LDR      R2,[SP, #+0]
   \       0xA6   0x9B01             LDR      R3,[SP, #+4]
   \       0xA8   0x....'....        BL       __aeabi_dadd
   \       0xAC   0x....'....        BL       __aeabi_d2iz
   \       0xB0   0x0006             MOVS     R6,R0
    818          			wDownValue = (u16)(g_wEmptyValue - fTemp * 0.2);
   \       0xB2   0x8838             LDRH     R0,[R7, #+0]
   \       0xB4   0x....'....        BL       __aeabi_ui2d
   \       0xB8   0x9000             STR      R0,[SP, #+0]
   \       0xBA   0x9101             STR      R1,[SP, #+4]
   \       0xBC   0x9802             LDR      R0,[SP, #+8]
   \       0xBE   0x....'....        BL       __aeabi_f2d
   \       0xC2   0x....             ADR      R2,??DataTable8_9
   \       0xC4   0xCA0C             LDM      R2,{R2,R3}
   \       0xC6   0x....'....        BL       __aeabi_dmul
   \       0xCA   0x0002             MOVS     R2,R0
   \       0xCC   0x000B             MOVS     R3,R1
   \       0xCE   0x9800             LDR      R0,[SP, #+0]
   \       0xD0   0x9901             LDR      R1,[SP, #+4]
   \       0xD2   0x....'....        BL       __aeabi_dsub
   \       0xD6   0x....'....        BL       __aeabi_d2iz
    819          			
    820          			if ( (wDownValue < wTemp) && (wTemp < wUpValue) )
   \       0xDA   0x0029             MOVS     R1,R5
   \       0xDC   0xB280             UXTH     R0,R0
   \       0xDE   0xB289             UXTH     R1,R1
   \       0xE0   0x4288             CMP      R0,R1
   \       0xE2   0xD20D             BCS      ??LOAD_CheckRunUnload_4
   \       0xE4   0xB2AD             UXTH     R5,R5
   \       0xE6   0xB2B6             UXTH     R6,R6
   \       0xE8   0x42B5             CMP      R5,R6
   \       0xEA   0xD209             BCS      ??LOAD_CheckRunUnload_4
    821          			{
    822          				g_cyRunUnloadCnt++;
   \       0xEC   0x....             LDR      R0,??DataTable8_11
   \       0xEE   0x7801             LDRB     R1,[R0, #+0]
   \       0xF0   0x1C49             ADDS     R1,R1,#+1
   \       0xF2   0x7001             STRB     R1,[R0, #+0]
    823          				if (5 == g_cyRunUnloadCnt)  //连续5秒钟都符合条件 判断卸载成功
   \       0xF4   0x7800             LDRB     R0,[R0, #+0]
   \       0xF6   0x2805             CMP      R0,#+5
   \       0xF8   0xD104             BNE      ??LOAD_CheckRunUnload_0
    824          				{
    825          					LOAD_HandleSuccessUnload();
   \       0xFA   0x....'....        BL       LOAD_HandleSuccessUnload
   \       0xFE   0xE001             B        ??LOAD_CheckRunUnload_0
    826          				}
    827          			}
    828          			else
    829          			{
    830          				g_cyRunUnloadCnt = 0;
   \                     ??LOAD_CheckRunUnload_4: (+1)
   \      0x100   0x....             LDR      R0,??DataTable8_11
   \      0x102   0x7004             STRB     R4,[R0, #+0]
    831          			}
    832          		}
    833          	}
    834          }
   \                     ??LOAD_CheckRunUnload_0: (+1)
   \                     ??LOAD_CheckRunUnload_2: (+1)
   \      0x104   0xBDF7             POP      {R0-R2,R4-R7,PC}  ;; return
    835          
    836          //**************************************************************************************************
    837          // 名称         : LOAD_CheckFullValue()
    838          // 创建日期     : 2015-09-30
    839          // 作者         : 陈锦
    840          // 功能         : 检查运行中满载值
    841          // 输入参数     : 无
    842          // 输出参数     : 无
    843          // 返回结果     : 无
    844          // 注意和说明   :
    845          // 修改内容     :
    846          //**************************************************************************************************
    847          
    848          #define MAX_CHECK_FULL  10

   \                                 In section .bss, align 4
    849          static u16 g_wRunFull[2][MAX_CHECK_FULL];          //检测数据
   \                     g_wRunFull:
   \        0x0                      DS8 40
    850          

   \                                 In section .text, align 2, keep-with-next
    851          void LOAD_CheckFullValue(void)
    852          {
   \                     LOAD_CheckFullValue: (+1)
   \        0x0   0xB5F8             PUSH     {R3-R7,LR}
    853          	u16 wTemp;
    854          	float fTemp;
    855          	
    856          	if (true == g_cyCheckFullFlag)
   \        0x2   0x....             LDR      R7,??DataTable9
   \        0x4   0x7838             LDRB     R0,[R7, #+0]
   \        0x6   0x2801             CMP      R0,#+1
   \        0x8   0xD068             BEQ      ??LOAD_CheckFullValue_0
    857          	{
    858          		return;
    859          	}
    860          	
    861          	g_wRunFull[0][g_cyRunFullCnt[0]] = g_wLoadADBuffer[GET_START_DATA_NUM];
   \                     ??LOAD_CheckFullValue_1: (+1)
   \        0xA   0x....             LDR      R4,??DataTable9_1
   \        0xC   0x....             LDR      R5,??DataTable9_2
   \        0xE   0x....             LDR      R0,??DataTable8_2
   \       0x10   0x8A80             LDRH     R0,[R0, #+20]
   \       0x12   0x7821             LDRB     R1,[R4, #+0]
   \       0x14   0x2202             MOVS     R2,#+2
   \       0x16   0x4351             MULS     R1,R2,R1
   \       0x18   0x5268             STRH     R0,[R5, R1]
    862          	g_cyRunFullCnt[0]++;
   \       0x1A   0x7820             LDRB     R0,[R4, #+0]
   \       0x1C   0x1C40             ADDS     R0,R0,#+1
   \       0x1E   0x7020             STRB     R0,[R4, #+0]
    863          	if (MAX_CHECK_FULL == g_cyRunFullCnt[0])
   \       0x20   0x7820             LDRB     R0,[R4, #+0]
   \       0x22   0x280A             CMP      R0,#+10
   \       0x24   0xD15A             BNE      ??LOAD_CheckFullValue_2
    864          	{
    865          		g_cyRunFullCnt[0] = 0;
   \       0x26   0x2000             MOVS     R0,#+0
   \       0x28   0x7020             STRB     R0,[R4, #+0]
    866          		
    867          		if (300 < GetVariance((u16 *)&g_wRunFull[0][0], MAX_CHECK_FULL) )
   \       0x2A   0x....             LDR      R6,??DataTable8_3  ;; 0x43960001
   \       0x2C   0x210A             MOVS     R1,#+10
   \       0x2E   0x0028             MOVS     R0,R5
   \       0x30   0x....'....        BL       GetVariance
   \       0x34   0x0031             MOVS     R1,R6
   \       0x36   0x....'....        BL       __aeabi_cfrcmple
   \       0x3A   0xD94F             BLS      ??LOAD_CheckFullValue_0
    868          		{
    869          			return;
    870          		}
    871          		
    872          		wTemp = LOAD_GetAverage((u16 *)&g_wRunFull[0][0], MAX_CHECK_FULL);
   \                     ??LOAD_CheckFullValue_3: (+1)
   \       0x3C   0x210A             MOVS     R1,#+10
   \       0x3E   0x0028             MOVS     R0,R5
   \       0x40   0x....'....        BL       LOAD_GetAverage
   \       0x44   0x0001             MOVS     R1,R0
    873          		if (MAX_CHECK_FULL > g_cyRunFullCnt[1])
   \       0x46   0x7860             LDRB     R0,[R4, #+1]
   \       0x48   0x280A             CMP      R0,#+10
   \       0x4A   0xDA08             BGE      ??LOAD_CheckFullValue_4
    874          		{
    875          			g_wRunFull[1][g_cyRunFullCnt[1]] = wTemp;
   \       0x4C   0x7860             LDRB     R0,[R4, #+1]
   \       0x4E   0x2202             MOVS     R2,#+2
   \       0x50   0x4350             MULS     R0,R2,R0
   \       0x52   0x1828             ADDS     R0,R5,R0
   \       0x54   0x8281             STRH     R1,[R0, #+20]
    876          			g_cyRunFullCnt[1]++;
   \       0x56   0x7860             LDRB     R0,[R4, #+1]
   \       0x58   0x1C40             ADDS     R0,R0,#+1
   \       0x5A   0x7060             STRB     R0,[R4, #+1]
   \       0x5C   0xE005             B        ??LOAD_CheckFullValue_5
    877          		}
    878          		else
    879          		{
    880          			LOAD_FifoData((u16 *)&g_wRunFull[1][0], wTemp, MAX_CHECK_FULL);
   \                     ??LOAD_CheckFullValue_4: (+1)
   \       0x5E   0x220A             MOVS     R2,#+10
   \       0x60   0xB289             UXTH     R1,R1
   \       0x62   0x0028             MOVS     R0,R5
   \       0x64   0x3014             ADDS     R0,R0,#+20
   \       0x66   0x....'....        BL       LOAD_FifoData
    881          		}
    882          		
    883          		if (MAX_CHECK_FULL == g_cyRunFullCnt[1])
   \                     ??LOAD_CheckFullValue_5: (+1)
   \       0x6A   0x7860             LDRB     R0,[R4, #+1]
   \       0x6C   0x280A             CMP      R0,#+10
   \       0x6E   0xD135             BNE      ??LOAD_CheckFullValue_2
    884          		{
    885          			if (300 < GetVariance((u16 *)&g_wRunFull[1][0], MAX_CHECK_FULL) )
   \       0x70   0x002C             MOVS     R4,R5
   \       0x72   0x3414             ADDS     R4,R4,#+20
   \       0x74   0x210A             MOVS     R1,#+10
   \       0x76   0x0020             MOVS     R0,R4
   \       0x78   0x....'....        BL       GetVariance
   \       0x7C   0x0031             MOVS     R1,R6
   \       0x7E   0x....'....        BL       __aeabi_cfrcmple
   \       0x82   0xD92B             BLS      ??LOAD_CheckFullValue_0
    886          			{
    887          				//g_cyRunFullCnt[0] = 0;
    888          				return;
    889          			}
    890          			
    891          			wTemp = LOAD_GetAverage((u16 *)&g_wRunFull[1][0], MAX_CHECK_FULL);
   \                     ??LOAD_CheckFullValue_6: (+1)
   \       0x84   0x210A             MOVS     R1,#+10
   \       0x86   0x0020             MOVS     R0,R4
   \       0x88   0x....'....        BL       LOAD_GetAverage
    892          			if (g_wEmptyValue < wTemp)
   \       0x8C   0x....             LDR      R1,??DataTable8_6
   \       0x8E   0x880A             LDRH     R2,[R1, #+0]
   \       0x90   0x0003             MOVS     R3,R0
   \       0x92   0xB29B             UXTH     R3,R3
   \       0x94   0x429A             CMP      R2,R3
   \       0x96   0xD221             BCS      ??LOAD_CheckFullValue_2
    893          			{
    894          				wTemp -= g_wEmptyValue;
   \       0x98   0x880A             LDRH     R2,[R1, #+0]
   \       0x9A   0x1A84             SUBS     R4,R0,R2
    895          				fTemp = g_wFullValue - g_wEmptyValue;
   \       0x9C   0x....             LDR      R0,??DataTable8_7
   \       0x9E   0x8800             LDRH     R0,[R0, #+0]
   \       0xA0   0x8809             LDRH     R1,[R1, #+0]
   \       0xA2   0x1A40             SUBS     R0,R0,R1
   \       0xA4   0x....'....        BL       __aeabi_i2f
    896          				fTemp *= 0.85;
   \       0xA8   0x....'....        BL       __aeabi_f2d
   \       0xAC   0x....             ADR      R2,??DataTable9_3
   \       0xAE   0xCA0C             LDM      R2,{R2,R3}
   \       0xB0   0x....'....        BL       __aeabi_dmul
   \       0xB4   0x....'....        BL       __aeabi_d2f
   \       0xB8   0x0005             MOVS     R5,R0
    897          				if (wTemp > fTemp)
   \       0xBA   0x0020             MOVS     R0,R4
   \       0xBC   0xB280             UXTH     R0,R0
   \       0xBE   0x....'....        BL       __aeabi_ui2f
   \       0xC2   0x0001             MOVS     R1,R0
   \       0xC4   0x0028             MOVS     R0,R5
   \       0xC6   0x....'....        BL       __aeabi_cfcmple
   \       0xCA   0xD207             BCS      ??LOAD_CheckFullValue_2
    898          				{
    899          					RunVar.LoadADValue = wTemp;
   \       0xCC   0xB2A4             UXTH     R4,R4
   \       0xCE   0x0020             MOVS     R0,R4
   \       0xD0   0x....'....        BL       __aeabi_ui2f
   \       0xD4   0x....             LDR      R1,??DataTable10
   \       0xD6   0x6008             STR      R0,[R1, #+0]
    900          					g_cyCheckFullFlag = true;
   \       0xD8   0x2001             MOVS     R0,#+1
   \       0xDA   0x7038             STRB     R0,[R7, #+0]
    901          				}
    902          				
    903          				/*fTemp = g_wFullValue - g_wEmptyValue;
    904          				fTemp *= 0.25;
    905          				if (wTemp < fTemp)   //卸载成功，并且不记录铲数
    906          				{
    907          					g_cyExitFlag = true;
    908          					g_cyOverFlag = true;
    909          				}*/
    910          			}
    911          			/*else    //卸载成功，并且不记录铲数
    912          			{
    913          				g_cyExitFlag = true;
    914          				g_cyOverFlag = true;
    915          			}*/
    916          		}
    917          	}
    918          }
   \                     ??LOAD_CheckFullValue_2: (+1)
   \                     ??LOAD_CheckFullValue_0: (+1)
   \       0xDC   0xBDF1             POP      {R0,R4-R7,PC}    ;; return
    919          
    920          //**************************************************************************************************
    921          // 名称         : LOAD_HandleFullTask()
    922          // 创建日期     : 2015-09-30
    923          // 作者         : 陈锦
    924          // 功能         : 处理满载任务
    925          // 输入参数     : 无
    926          // 输出参数     : 无
    927          // 返回结果     : 无
    928          // 注意和说明   :
    929          // 修改内容     :
    930          //**************************************************************************************************
    931          

   \                                 In section .text, align 2, keep-with-next
    932          static void LOAD_HandleFullTask(void)
    933          {
   \                     LOAD_HandleFullTask: (+1)
   \        0x0   0xB5F8             PUSH     {R3-R7,LR}
    934          	u16 wTemp;
    935          	float fTemp;
    936          	
    937          	if (CAR_RUN_STATE == g_cyCarState) //开车
   \        0x2   0x....             LDR      R0,??DataTable10_1
   \        0x4   0x7800             LDRB     R0,[R0, #+0]
   \        0x6   0x2800             CMP      R0,#+0
   \        0x8   0xD144             BNE      ??LOAD_HandleFullTask_0
    938          	{
    939          		g_cyFifoCnt = 0;
   \        0xA   0x2400             MOVS     R4,#+0
   \        0xC   0x0020             MOVS     R0,R4
   \        0xE   0x....             LDR      R1,??DataTable10_2
   \       0x10   0x7008             STRB     R0,[R1, #+0]
    940          		g_wUnloadCnt = 0;
   \       0x12   0x....             LDR      R0,??DataTable10_3
   \       0x14   0x8004             STRH     R4,[R0, #+0]
    941          		g_cyCheckCnt = 0;
   \       0x16   0x....             LDR      R7,??DataTable10_4
   \       0x18   0x0020             MOVS     R0,R4
   \       0x1A   0x7038             STRB     R0,[R7, #+0]
    942          		g_cyUnLoadDataCnt = 0;
   \       0x1C   0x0020             MOVS     R0,R4
   \       0x1E   0x....             LDR      R1,??DataTable10_5
   \       0x20   0x7008             STRB     R0,[R1, #+0]
    943          		g_cyCUBuffer[0] = 0;
   \       0x22   0x....             LDR      R0,??DataTable10_6
   \       0x24   0x0021             MOVS     R1,R4
   \       0x26   0x7001             STRB     R1,[R0, #+0]
    944          		g_cyCUBuffer[1] = 0;
   \       0x28   0x0021             MOVS     R1,R4
   \       0x2A   0x7041             STRB     R1,[R0, #+1]
    945          		if (true == g_cyExitFlag)
   \       0x2C   0x....             LDR      R0,??DataTable10_7
   \       0x2E   0x7801             LDRB     R1,[R0, #+0]
   \       0x30   0x2901             CMP      R1,#+1
   \       0x32   0xD12E             BNE      ??LOAD_HandleFullTask_1
    946          		{
    947          			g_cyExitFlag = false;
   \       0x34   0x0021             MOVS     R1,R4
   \       0x36   0x7001             STRB     R1,[R0, #+0]
    948          			RunVar.LoadADValue = 1;
   \       0x38   0x20FE             MOVS     R0,#+254
   \       0x3A   0x0580             LSLS     R0,R0,#+22       ;; #+1065353216
   \       0x3C   0x....             LDR      R1,??DataTable10
   \       0x3E   0x6008             STR      R0,[R1, #+0]
    949          			
    950          			//if ( (false == g_cyOverFlag) && (g_cyCurrentShovelNum > 5) ) //5铲以下不作记录
    951          			if (g_cyCurrentShovelNum > 8)  //5铲以下不作记录
   \       0x40   0x....             LDR      R6,??DataTable10_8
   \       0x42   0x7830             LDRB     R0,[R6, #+0]
   \       0x44   0x2809             CMP      R0,#+9
   \       0x46   0xDB0C             BLT      ??LOAD_HandleFullTask_2
    952          			{
    953          				g_cyRecordShovelNum = g_cyCurrentShovelNum;
   \       0x48   0x....             LDR      R3,??DataTable10_9
   \       0x4A   0x7830             LDRB     R0,[R6, #+0]
   \       0x4C   0x7018             STRB     R0,[R3, #+0]
    954          				ProductPara.bFlashWEn = FLASH_WR_ENABLE;
   \       0x4E   0x....             LDR      R5,??DataTable10_10
   \       0x50   0x2001             MOVS     R0,#+1
   \       0x52   0x7028             STRB     R0,[R5, #+0]
    955          				I2C1_WNBytesMul3T(EEPROM_ADDRESS, LOAD_SHOVEL_NUM, 1,  &g_cyRecordShovelNum);
   \       0x54   0x2201             MOVS     R2,#+1
   \       0x56   0x213B             MOVS     R1,#+59
   \       0x58   0x20A0             MOVS     R0,#+160
   \       0x5A   0x....'....        BL       I2C1_WNBytesMul3T
    956          				ProductPara.bFlashWEn = FLASH_WR_DISABLE;
   \       0x5E   0x0020             MOVS     R0,R4
   \       0x60   0x7028             STRB     R0,[R5, #+0]
    957          			}
    958          			
    959          			
    960          			g_cyFifoCnt = 0;
   \                     ??LOAD_HandleFullTask_2: (+1)
   \       0x62   0x0020             MOVS     R0,R4
   \       0x64   0x....             LDR      R1,??DataTable10_2
   \       0x66   0x7008             STRB     R0,[R1, #+0]
    961          			g_cyCurrentStateCnt = 0;
   \       0x68   0x0020             MOVS     R0,R4
   \       0x6A   0x....             LDR      R1,??DataTable10_11
   \       0x6C   0x7008             STRB     R0,[R1, #+0]
    962          			g_cyCheckCnt = 0;
   \       0x6E   0x0020             MOVS     R0,R4
   \       0x70   0x7038             STRB     R0,[R7, #+0]
    963          			g_cyCurrentShovelNum = 0;
   \       0x72   0x0020             MOVS     R0,R4
   \       0x74   0x7030             STRB     R0,[R6, #+0]
    964          			g_cyWorkState = LOAD_IDLE_STATE;
   \       0x76   0x....             LDR      R3,??DataTable11_13
   \       0x78   0x2004             MOVS     R0,#+4
   \       0x7A   0x7018             STRB     R0,[R3, #+0]
    965          			g_wIdleWait100Ms = 0;
   \       0x7C   0x....             LDR      R0,??DataTable10_12
   \       0x7E   0x8004             STRH     R4,[R0, #+0]
    966          			
    967          			ProductPara.bFlashWEn = FLASH_WR_ENABLE;
   \       0x80   0x....             LDR      R5,??DataTable10_10
   \       0x82   0x2001             MOVS     R0,#+1
   \       0x84   0x7028             STRB     R0,[R5, #+0]
    968          			I2C1_WNBytesMul3T(EEPROM_ADDRESS, LOAD_WORK_STATE, 1,  &g_cyWorkState);
   \       0x86   0x2201             MOVS     R2,#+1
   \       0x88   0x213C             MOVS     R1,#+60
   \       0x8A   0x20A0             MOVS     R0,#+160
   \       0x8C   0x....'....        BL       I2C1_WNBytesMul3T
    969          			ProductPara.bFlashWEn = FLASH_WR_DISABLE;
   \       0x90   0x702C             STRB     R4,[R5, #+0]
    970          		}
    971          		/*else
    972          		{
    973          			//LOAD_CheckRunUnload();
    974          			//LOAD_CheckFullValue();
    975          		}*/
    976          		return;
   \                     ??LOAD_HandleFullTask_1: (+1)
   \       0x92   0xE07C             B        ??LOAD_HandleFullTask_3
    977          	}
    978          	
    979          	if (true == g_cyExitFlag)
   \                     ??LOAD_HandleFullTask_0: (+1)
   \       0x94   0x....             LDR      R0,??DataTable10_7
   \       0x96   0x7800             LDRB     R0,[R0, #+0]
   \       0x98   0x2801             CMP      R0,#+1
   \       0x9A   0xD078             BEQ      ??LOAD_HandleFullTask_3
    980          	{
    981          		return;
    982          	}
    983          	
    984          	g_cyFifiCntRun = 0;
   \                     ??LOAD_HandleFullTask_4: (+1)
   \       0x9C   0x2500             MOVS     R5,#+0
   \       0x9E   0x0028             MOVS     R0,R5
   \       0xA0   0x....             LDR      R1,??DataTable10_13
   \       0xA2   0x7008             STRB     R0,[R1, #+0]
    985          	g_cyRunUnLoadDataCnt = 0;
   \       0xA4   0x0028             MOVS     R0,R5
   \       0xA6   0x....             LDR      R1,??DataTable10_14
   \       0xA8   0x7008             STRB     R0,[R1, #+0]
    986          	g_cyRunUnloadCnt = 0;
   \       0xAA   0x0028             MOVS     R0,R5
   \       0xAC   0x....             LDR      R1,??DataTable10_15
   \       0xAE   0x7008             STRB     R0,[R1, #+0]
    987          	
    988          	g_cyRunFullCnt[0] = 0;
   \       0xB0   0x....             LDR      R0,??DataTable9_1
   \       0xB2   0x0029             MOVS     R1,R5
   \       0xB4   0x7001             STRB     R1,[R0, #+0]
    989          	g_cyRunFullCnt[1] = 0;
   \       0xB6   0x0029             MOVS     R1,R5
   \       0xB8   0x7041             STRB     R1,[R0, #+1]
    990          	
    991          	if (true == LOAD_CheckUnload() )  //卸载成功
   \       0xBA   0x....'....        BL       LOAD_CheckUnload
   \       0xBE   0x2801             CMP      R0,#+1
   \       0xC0   0xD102             BNE      ??LOAD_HandleFullTask_5
    992          	{
    993          		LOAD_HandleSuccessUnload();
   \       0xC2   0x....'....        BL       LOAD_HandleSuccessUnload
    994          		return;
   \       0xC6   0xE062             B        ??LOAD_HandleFullTask_3
    995          	}
    996          	
    997          	g_wFifoBuffer[g_cyFifoCnt] = g_wLoadADBuffer[GET_START_DATA_NUM];
   \                     ??LOAD_HandleFullTask_5: (+1)
   \       0xC8   0x....             LDR      R4,??DataTable10_16
   \       0xCA   0x....             LDR      R0,??DataTable10_2
   \       0xCC   0x....             LDR      R1,??DataTable11_7
   \       0xCE   0x8A89             LDRH     R1,[R1, #+20]
   \       0xD0   0x7802             LDRB     R2,[R0, #+0]
   \       0xD2   0x2302             MOVS     R3,#+2
   \       0xD4   0x435A             MULS     R2,R3,R2
   \       0xD6   0x52A1             STRH     R1,[R4, R2]
    998          	g_cyFifoCnt++;
   \       0xD8   0x7801             LDRB     R1,[R0, #+0]
   \       0xDA   0x1C49             ADDS     R1,R1,#+1
   \       0xDC   0x7001             STRB     R1,[R0, #+0]
    999          	if (MAX_FIFO_RECORD_NUM == g_cyFifoCnt)
   \       0xDE   0x7801             LDRB     R1,[R0, #+0]
   \       0xE0   0x290A             CMP      R1,#+10
   \       0xE2   0xD154             BNE      ??LOAD_HandleFullTask_6
   1000          	{
   1001          		g_cyFifoCnt = 0;
   \       0xE4   0x7005             STRB     R5,[R0, #+0]
   1002          		
   1003          		if (100 < GetVariance(g_wFifoBuffer, MAX_FIFO_RECORD_NUM) )
   \       0xE6   0x210A             MOVS     R1,#+10
   \       0xE8   0x0020             MOVS     R0,R4
   \       0xEA   0x....'....        BL       GetVariance
   \       0xEE   0x....             LDR      R1,??DataTable11  ;; 0x42c80001
   \       0xF0   0x....'....        BL       __aeabi_cfrcmple
   \       0xF4   0xD94B             BLS      ??LOAD_HandleFullTask_3
   1004          		{
   1005          			return;
   1006          		}
   1007          		
   1008          		wTemp = LOAD_GetAverage(g_wFifoBuffer, MAX_FIFO_RECORD_NUM);
   \                     ??LOAD_HandleFullTask_7: (+1)
   \       0xF6   0x210A             MOVS     R1,#+10
   \       0xF8   0x0020             MOVS     R0,R4
   \       0xFA   0x....'....        BL       LOAD_GetAverage
   1009          		if (wTemp < g_wEmptyValue)
   \       0xFE   0x....             LDR      R6,??DataTable11_1
   \      0x100   0x8831             LDRH     R1,[R6, #+0]
   \      0x102   0xB280             UXTH     R0,R0
   \      0x104   0x4288             CMP      R0,R1
   \      0x106   0xD342             BCC      ??LOAD_HandleFullTask_3
   1010          		{
   1011          			return;
   1012          		}
   1013          		
   1014          		if (MAX_STUDY_NUM > g_cyCurrentStateCnt)
   \                     ??LOAD_HandleFullTask_8: (+1)
   \      0x108   0x....             LDR      R5,??DataTable10_11
   \      0x10A   0x7828             LDRB     R0,[R5, #+0]
   \      0x10C   0x281E             CMP      R0,#+30
   \      0x10E   0xDA0B             BGE      ??LOAD_HandleFullTask_9
   1015          		{
   1016          			g_wCurrentStateBuffer[g_cyCurrentStateCnt] = LOAD_GetAverage(g_wFifoBuffer, MAX_FIFO_RECORD_NUM);
   \      0x110   0x210A             MOVS     R1,#+10
   \      0x112   0x0020             MOVS     R0,R4
   \      0x114   0x....'....        BL       LOAD_GetAverage
   \      0x118   0x....             LDR      R1,??DataTable11_2
   \      0x11A   0x782A             LDRB     R2,[R5, #+0]
   \      0x11C   0x2302             MOVS     R3,#+2
   \      0x11E   0x435A             MULS     R2,R3,R2
   \      0x120   0x5288             STRH     R0,[R1, R2]
   1017          			g_cyCurrentStateCnt++;
   \      0x122   0x7828             LDRB     R0,[R5, #+0]
   \      0x124   0x1C40             ADDS     R0,R0,#+1
   \      0x126   0x7028             STRB     R0,[R5, #+0]
   1018          		}
   1019          		
   1020          		if (10 > g_cyCurrentStateCnt)  //10秒平均值
   \                     ??LOAD_HandleFullTask_9: (+1)
   \      0x128   0x7828             LDRB     R0,[R5, #+0]
   \      0x12A   0x280A             CMP      R0,#+10
   \      0x12C   0xDB2F             BLT      ??LOAD_HandleFullTask_3
   1021          		{
   1022          			return;
   1023          		} 
   1024          		
   1025          		wTemp = LOAD_GetAverage(g_wCurrentStateBuffer, g_cyCurrentStateCnt);
   \                     ??LOAD_HandleFullTask_10: (+1)
   \      0x12E   0x7829             LDRB     R1,[R5, #+0]
   \      0x130   0x....             LDR      R0,??DataTable11_2
   \      0x132   0x....'....        BL       LOAD_GetAverage
   1026          		wTemp -= g_wEmptyValue;
   \      0x136   0x8831             LDRH     R1,[R6, #+0]
   \      0x138   0x1A45             SUBS     R5,R0,R1
   1027          		
   1028          		/*if (wTemp  > (g_wRatedValue * (1 + g_fOverValueK) ) )
   1029          		{
   1030          			g_cyOverFlag = true;
   1031          		}
   1032          		else
   1033          		{
   1034          			g_cyOverFlag = false;
   1035          		}*/
   1036          		
   1037          		if (false == g_cyCheckFullFlag)
   \      0x13A   0x....             LDR      R4,??DataTable9
   \      0x13C   0x7820             LDRB     R0,[R4, #+0]
   \      0x13E   0x2800             CMP      R0,#+0
   \      0x140   0xD125             BNE      ??LOAD_HandleFullTask_6
   1038          		{
   1039          			fTemp = g_wFullValue - g_wEmptyValue;
   \      0x142   0x....             LDR      R0,??DataTable11_4
   \      0x144   0x8800             LDRH     R0,[R0, #+0]
   \      0x146   0x8831             LDRH     R1,[R6, #+0]
   \      0x148   0x1A40             SUBS     R0,R0,R1
   \      0x14A   0x....'....        BL       __aeabi_i2f
   1040          			fTemp *= 0.85;
   \      0x14E   0x....'....        BL       __aeabi_f2d
   \      0x152   0x....             ADR      R2,??DataTable9_3
   \      0x154   0xCA0C             LDM      R2,{R2,R3}
   \      0x156   0x....'....        BL       __aeabi_dmul
   \      0x15A   0x....'....        BL       __aeabi_d2f
   \      0x15E   0x0006             MOVS     R6,R0
   1041          			if ( (wTemp > fTemp) && (wTemp < 1000) )
   \      0x160   0x0028             MOVS     R0,R5
   \      0x162   0xB280             UXTH     R0,R0
   \      0x164   0x....'....        BL       __aeabi_ui2f
   \      0x168   0x0001             MOVS     R1,R0
   \      0x16A   0x0030             MOVS     R0,R6
   \      0x16C   0x....'....        BL       __aeabi_cfcmple
   \      0x170   0xD20D             BCS      ??LOAD_HandleFullTask_6
   \      0x172   0x0028             MOVS     R0,R5
   \      0x174   0xB280             UXTH     R0,R0
   \      0x176   0x21FA             MOVS     R1,#+250
   \      0x178   0x0089             LSLS     R1,R1,#+2        ;; #+1000
   \      0x17A   0x4288             CMP      R0,R1
   \      0x17C   0xDA07             BGE      ??LOAD_HandleFullTask_6
   1042          			{
   1043          				RunVar.LoadADValue = wTemp;
   \      0x17E   0xB2AD             UXTH     R5,R5
   \      0x180   0x0028             MOVS     R0,R5
   \      0x182   0x....'....        BL       __aeabi_ui2f
   \      0x186   0x....             LDR      R1,??DataTable10
   \      0x188   0x6008             STR      R0,[R1, #+0]
   1044          				g_cyCheckFullFlag = true;
   \      0x18A   0x2001             MOVS     R0,#+1
   \      0x18C   0x7020             STRB     R0,[R4, #+0]
   1045          			}
   1046          		}
   1047          	}
   1048          }
   \                     ??LOAD_HandleFullTask_6: (+1)
   \                     ??LOAD_HandleFullTask_3: (+1)
   \      0x18E   0xBDF1             POP      {R0,R4-R7,PC}    ;; return
   1049          
   1050          //**************************************************************************************************
   1051          // 名称         : LOAD_HandleInFullTask()
   1052          // 创建日期     : 2015-09-30
   1053          // 作者         : 陈锦
   1054          // 功能         : 处理装载到满载任务
   1055          // 输入参数     : 无
   1056          // 输出参数     : 无
   1057          // 返回结果     : 无
   1058          // 注意和说明   :
   1059          // 修改内容     :
   1060          //**************************************************************************************************
   1061          

   \                                 In section .text, align 2, keep-with-next
   1062          static void LOAD_HandleInFullTask(void)
   1063          {
   \                     LOAD_HandleInFullTask: (+1)
   \        0x0   0xB570             PUSH     {R4-R6,LR}
   1064          	u16 wTemp;
   1065          	float fTemp;
   1066          	
   1067          	if (CAR_RUN_STATE == g_cyCarState) //开车
   \        0x2   0x....             LDR      R0,??DataTable10_1
   \        0x4   0x7800             LDRB     R0,[R0, #+0]
   \        0x6   0x2800             CMP      R0,#+0
   \        0x8   0xD103             BNE      ??LOAD_HandleInFullTask_0
   1068          	{
   1069          		g_cyFifoCnt = 0;
   \        0xA   0x2000             MOVS     R0,#+0
   \        0xC   0x....             LDR      R1,??DataTable10_2
   \        0xE   0x7008             STRB     R0,[R1, #+0]
   1070          		return;
   \       0x10   0xE063             B        ??LOAD_HandleInFullTask_1
   1071          	}
   1072          	
   1073          	g_wFifoBuffer[g_cyFifoCnt] = g_wLoadADBuffer[GET_START_DATA_NUM];
   \                     ??LOAD_HandleInFullTask_0: (+1)
   \       0x12   0x....             LDR      R4,??DataTable10_16
   \       0x14   0x....             LDR      R0,??DataTable10_2
   \       0x16   0x....             LDR      R1,??DataTable11_7
   \       0x18   0x8A89             LDRH     R1,[R1, #+20]
   \       0x1A   0x7802             LDRB     R2,[R0, #+0]
   \       0x1C   0x2302             MOVS     R3,#+2
   \       0x1E   0x435A             MULS     R2,R3,R2
   \       0x20   0x52A1             STRH     R1,[R4, R2]
   1074          	g_cyFifoCnt++;
   \       0x22   0x7801             LDRB     R1,[R0, #+0]
   \       0x24   0x1C49             ADDS     R1,R1,#+1
   \       0x26   0x7001             STRB     R1,[R0, #+0]
   1075          	if (MAX_FIFO_RECORD_NUM == g_cyFifoCnt)
   \       0x28   0x7801             LDRB     R1,[R0, #+0]
   \       0x2A   0x290A             CMP      R1,#+10
   \       0x2C   0xD155             BNE      ??LOAD_HandleInFullTask_2
   1076          	{
   1077          		g_cyFifoCnt = 0;
   \       0x2E   0x2100             MOVS     R1,#+0
   \       0x30   0x7001             STRB     R1,[R0, #+0]
   1078          		
   1079          		if (100 < GetVariance(g_wFifoBuffer, MAX_FIFO_RECORD_NUM) )
   \       0x32   0x210A             MOVS     R1,#+10
   \       0x34   0x0020             MOVS     R0,R4
   \       0x36   0x....'....        BL       GetVariance
   \       0x3A   0x....             LDR      R1,??DataTable11  ;; 0x42c80001
   \       0x3C   0x....'....        BL       __aeabi_cfrcmple
   \       0x40   0xD94B             BLS      ??LOAD_HandleInFullTask_1
   1080          		{
   1081          			return;
   1082          		}
   1083          		
   1084          		wTemp = LOAD_GetAverage(g_wFifoBuffer, MAX_FIFO_RECORD_NUM);
   \                     ??LOAD_HandleInFullTask_3: (+1)
   \       0x42   0x210A             MOVS     R1,#+10
   \       0x44   0x0020             MOVS     R0,R4
   \       0x46   0x....'....        BL       LOAD_GetAverage
   1085          		if (wTemp < g_wEmptyValue)
   \       0x4A   0x....             LDR      R6,??DataTable11_1
   \       0x4C   0x8831             LDRH     R1,[R6, #+0]
   \       0x4E   0xB280             UXTH     R0,R0
   \       0x50   0x4288             CMP      R0,R1
   \       0x52   0xD342             BCC      ??LOAD_HandleInFullTask_1
   1086          		{
   1087          			return;
   1088          		}
   1089          		
   1090          		if (MAX_STUDY_NUM > g_cyCurrentStateCnt)
   \                     ??LOAD_HandleInFullTask_4: (+1)
   \       0x54   0x....             LDR      R5,??DataTable10_11
   \       0x56   0x7828             LDRB     R0,[R5, #+0]
   \       0x58   0x281E             CMP      R0,#+30
   \       0x5A   0xDA0B             BGE      ??LOAD_HandleInFullTask_5
   1091          		{
   1092          			g_wCurrentStateBuffer[g_cyCurrentStateCnt] = LOAD_GetAverage(g_wFifoBuffer, MAX_FIFO_RECORD_NUM);
   \       0x5C   0x210A             MOVS     R1,#+10
   \       0x5E   0x0020             MOVS     R0,R4
   \       0x60   0x....'....        BL       LOAD_GetAverage
   \       0x64   0x....             LDR      R1,??DataTable11_2
   \       0x66   0x782A             LDRB     R2,[R5, #+0]
   \       0x68   0x2302             MOVS     R3,#+2
   \       0x6A   0x435A             MULS     R2,R3,R2
   \       0x6C   0x5288             STRH     R0,[R1, R2]
   1093          			g_cyCurrentStateCnt++;
   \       0x6E   0x7828             LDRB     R0,[R5, #+0]
   \       0x70   0x1C40             ADDS     R0,R0,#+1
   \       0x72   0x7028             STRB     R0,[R5, #+0]
   1094          		}
   1095          		
   1096          		if (10 > g_cyCurrentStateCnt)  //10秒平均值
   \                     ??LOAD_HandleInFullTask_5: (+1)
   \       0x74   0x7828             LDRB     R0,[R5, #+0]
   \       0x76   0x280A             CMP      R0,#+10
   \       0x78   0xDB2F             BLT      ??LOAD_HandleInFullTask_1
   1097          		{
   1098          			return;
   1099          		} 
   1100          		
   1101          		wTemp = LOAD_GetAverage(g_wCurrentStateBuffer, g_cyCurrentStateCnt);
   \                     ??LOAD_HandleInFullTask_6: (+1)
   \       0x7A   0x7829             LDRB     R1,[R5, #+0]
   \       0x7C   0x....             LDR      R0,??DataTable11_2
   \       0x7E   0x....'....        BL       LOAD_GetAverage
   1102          		wTemp -= g_wEmptyValue;
   \       0x82   0x8831             LDRH     R1,[R6, #+0]
   \       0x84   0x1A45             SUBS     R5,R0,R1
   1103          		
   1104          		if (false == g_cyCheckFullFlag)
   \       0x86   0x....             LDR      R4,??DataTable11_3
   \       0x88   0x7820             LDRB     R0,[R4, #+0]
   \       0x8A   0x2800             CMP      R0,#+0
   \       0x8C   0xD125             BNE      ??LOAD_HandleInFullTask_2
   1105          		{
   1106          			fTemp = g_wFullValue - g_wEmptyValue;
   \       0x8E   0x....             LDR      R0,??DataTable11_4
   \       0x90   0x8800             LDRH     R0,[R0, #+0]
   \       0x92   0x8831             LDRH     R1,[R6, #+0]
   \       0x94   0x1A40             SUBS     R0,R0,R1
   \       0x96   0x....'....        BL       __aeabi_i2f
   1107          			fTemp *= 0.85;
   \       0x9A   0x....'....        BL       __aeabi_f2d
   \       0x9E   0x....             ADR      R2,??DataTable11_5
   \       0xA0   0xCA0C             LDM      R2,{R2,R3}
   \       0xA2   0x....'....        BL       __aeabi_dmul
   \       0xA6   0x....'....        BL       __aeabi_d2f
   \       0xAA   0x0006             MOVS     R6,R0
   1108          			if ( (wTemp > fTemp) && (wTemp < 1000) )
   \       0xAC   0x0028             MOVS     R0,R5
   \       0xAE   0xB280             UXTH     R0,R0
   \       0xB0   0x....'....        BL       __aeabi_ui2f
   \       0xB4   0x0001             MOVS     R1,R0
   \       0xB6   0x0030             MOVS     R0,R6
   \       0xB8   0x....'....        BL       __aeabi_cfcmple
   \       0xBC   0xD20D             BCS      ??LOAD_HandleInFullTask_2
   \       0xBE   0x0028             MOVS     R0,R5
   \       0xC0   0xB280             UXTH     R0,R0
   \       0xC2   0x21FA             MOVS     R1,#+250
   \       0xC4   0x0089             LSLS     R1,R1,#+2        ;; #+1000
   \       0xC6   0x4288             CMP      R0,R1
   \       0xC8   0xDA07             BGE      ??LOAD_HandleInFullTask_2
   1109          			{
   1110          				RunVar.LoadADValue = wTemp;
   \       0xCA   0xB2AD             UXTH     R5,R5
   \       0xCC   0x0028             MOVS     R0,R5
   \       0xCE   0x....'....        BL       __aeabi_ui2f
   \       0xD2   0x....             LDR      R1,??DataTable11_8
   \       0xD4   0x6008             STR      R0,[R1, #+0]
   1111          				g_cyCheckFullFlag = true;
   \       0xD6   0x2001             MOVS     R0,#+1
   \       0xD8   0x7020             STRB     R0,[R4, #+0]
   1112          			}
   1113          		}
   1114          	}
   1115          }
   \                     ??LOAD_HandleInFullTask_2: (+1)
   \                     ??LOAD_HandleInFullTask_1: (+1)
   \       0xDA   0xBD70             POP      {R4-R6,PC}       ;; return
   1116          
   1117          
   1118          //**************************************************************************************************
   1119          // 名称         : LOAD_LoadTask()
   1120          // 创建日期     : 2015-09-30
   1121          // 作者         : 陈锦
   1122          // 功能         : 处理载重任务
   1123          // 输入参数     : 无
   1124          // 输出参数     : 无
   1125          // 返回结果     : 无
   1126          // 注意和说明   :
   1127          // 修改内容     :
   1128          //**************************************************************************************************
   1129          

   \                                 In section .text, align 2, keep-with-next
   1130          void LOAD_LoadTask(void)
   1131          {
   \                     LOAD_LoadTask: (+1)
   \        0x0   0xB538             PUSH     {R3-R5,LR}
   1132              if (MAX_LOAD_AD_NUM > g_wLoadADCnt)  //车机发送车的状态最晚需要1秒(100ms一次，采集600次需要1分钟)
   \        0x2   0x2196             MOVS     R1,#+150
   \        0x4   0x0089             LSLS     R1,R1,#+2        ;; #+600
   \        0x6   0x....             LDR      R0,??DataTable11_6
   \        0x8   0x8802             LDRH     R2,[R0, #+0]
   \        0xA   0x428A             CMP      R2,R1
   \        0xC   0xDA0A             BGE      ??LOAD_LoadTask_0
   1133              {
   1134                  g_wLoadADBuffer[g_wLoadADCnt] = RunVar.uiAI[0];
   \        0xE   0x....             LDR      R1,??DataTable11_8
   \       0x10   0x8889             LDRH     R1,[R1, #+4]
   \       0x12   0x....             LDR      R2,??DataTable11_7
   \       0x14   0x8803             LDRH     R3,[R0, #+0]
   \       0x16   0x2402             MOVS     R4,#+2
   \       0x18   0x435C             MULS     R4,R3,R4
   \       0x1A   0x5311             STRH     R1,[R2, R4]
   1135                  g_wLoadADCnt++;
   \       0x1C   0x8801             LDRH     R1,[R0, #+0]
   \       0x1E   0x1C49             ADDS     R1,R1,#+1
   \       0x20   0x8001             STRH     R1,[R0, #+0]
   1136                  return;
   \       0x22   0xE04E             B        ??LOAD_LoadTask_1
   1137              }
   1138              else
   1139              {
   1140                  LOAD_FifoData(g_wLoadADBuffer, RunVar.uiAI[0], MAX_LOAD_AD_NUM);        //采集满600个以后采用FIFO方式填数组
   \                     ??LOAD_LoadTask_0: (+1)
   \       0x24   0x000A             MOVS     R2,R1
   \       0x26   0x....             LDR      R0,??DataTable11_8
   \       0x28   0x8881             LDRH     R1,[R0, #+4]
   \       0x2A   0x....             LDR      R0,??DataTable11_7
   \       0x2C   0x....'....        BL       LOAD_FifoData
   1141              }
   1142              
   1143              if (LOAD_EMPTY_STATE == g_cyWorkState)                                      //空载状态
   \       0x30   0x....             LDR      R3,??DataTable11_13
   \       0x32   0x7818             LDRB     R0,[R3, #+0]
   \       0x34   0x2800             CMP      R0,#+0
   \       0x36   0xD102             BNE      ??LOAD_LoadTask_2
   1144              {
   1145                  LOAD_HandleEmptyTask();                                                 //处理空载任务
   \       0x38   0x....'....        BL       LOAD_HandleEmptyTask
   \       0x3C   0xE041             B        ??LOAD_LoadTask_3
   1146              }
   1147              else if (LOAD_INSTALL_STATE == g_cyWorkState)                              //装载状态
   \                     ??LOAD_LoadTask_2: (+1)
   \       0x3E   0x7818             LDRB     R0,[R3, #+0]
   \       0x40   0x2801             CMP      R0,#+1
   \       0x42   0xD102             BNE      ??LOAD_LoadTask_4
   1148              {
   1149                  LOAD_HandleInstallTask();                                               //处理装载任务
   \       0x44   0x....'....        BL       LOAD_HandleInstallTask
   \       0x48   0xE03B             B        ??LOAD_LoadTask_3
   1150              }
   1151              else if (LOAD_IN_FULL_STATE == g_cyWorkState)                              //装载到满载状态
   \                     ??LOAD_LoadTask_4: (+1)
   \       0x4A   0x7818             LDRB     R0,[R3, #+0]
   \       0x4C   0x2802             CMP      R0,#+2
   \       0x4E   0xD11C             BNE      ??LOAD_LoadTask_5
   1152              {
   1153                  g_wIdleWait100Ms++;
   \       0x50   0x....             LDR      R0,??DataTable11_11
   \       0x52   0x8801             LDRH     R1,[R0, #+0]
   \       0x54   0x1C49             ADDS     R1,R1,#+1
   \       0x56   0x8001             STRH     R1,[R0, #+0]
   1154                  if (g_wDlyMaxTime <= g_wIdleWait100Ms)
   \       0x58   0x8800             LDRH     R0,[R0, #+0]
   \       0x5A   0x....             LDR      R1,??DataTable11_12
   \       0x5C   0x8809             LDRH     R1,[R1, #+0]
   \       0x5E   0x4288             CMP      R0,R1
   \       0x60   0xD310             BCC      ??LOAD_LoadTask_6
   1155                  {
   1156                      g_cyWorkState = LOAD_FULL_STATE;
   \       0x62   0x2003             MOVS     R0,#+3
   \       0x64   0x7018             STRB     R0,[R3, #+0]
   1157                      ProductPara.bFlashWEn = FLASH_WR_ENABLE;
   \       0x66   0x....             LDR      R4,??DataTable11_14
   \       0x68   0x2001             MOVS     R0,#+1
   \       0x6A   0x7020             STRB     R0,[R4, #+0]
   1158                      
   1159                      I2C1_WNBytesMul3T(EEPROM_ADDRESS, LOAD_WORK_STATE, 1,  &g_cyWorkState);
   \       0x6C   0x2201             MOVS     R2,#+1
   \       0x6E   0x213C             MOVS     R1,#+60
   \       0x70   0x20A0             MOVS     R0,#+160
   \       0x72   0x....'....        BL       I2C1_WNBytesMul3T
   1160                      
   1161                      ProductPara.bFlashWEn = FLASH_WR_DISABLE;
   \       0x76   0x2000             MOVS     R0,#+0
   \       0x78   0x7020             STRB     R0,[R4, #+0]
   1162                      
   1163                      g_cyUnLoadDataCnt = 0;
   \       0x7A   0x....             LDR      R1,??DataTable11_9
   \       0x7C   0x7008             STRB     R0,[R1, #+0]
   1164                      g_cyCUBuffer[0] = 0;
   \       0x7E   0x....             LDR      R1,??DataTable11_10
   \       0x80   0x7008             STRB     R0,[R1, #+0]
   1165                      g_cyCUBuffer[1] = 0;
   \       0x82   0x7048             STRB     R0,[R1, #+1]
   1166                  }
   1167                  LOAD_HandleInFullTask();                                                //处理装载到满载状态
   \                     ??LOAD_LoadTask_6: (+1)
   \       0x84   0x....'....        BL       LOAD_HandleInFullTask
   \       0x88   0xE01B             B        ??LOAD_LoadTask_3
   1168              }
   1169              else if (LOAD_FULL_STATE == g_cyWorkState)                                 //满载状态
   \                     ??LOAD_LoadTask_5: (+1)
   \       0x8A   0x7818             LDRB     R0,[R3, #+0]
   \       0x8C   0x2803             CMP      R0,#+3
   \       0x8E   0xD102             BNE      ??LOAD_LoadTask_7
   1170              {
   1171                  LOAD_HandleFullTask();                                                  //处理满载任务
   \       0x90   0x....'....        BL       LOAD_HandleFullTask
   \       0x94   0xE015             B        ??LOAD_LoadTask_3
   1172              }
   1173              else
   1174              {
   1175                  g_cyWorkState = LOAD_IDLE_STATE;                                        //空闲状态
   \                     ??LOAD_LoadTask_7: (+1)
   \       0x96   0x2004             MOVS     R0,#+4
   \       0x98   0x7018             STRB     R0,[R3, #+0]
   1176                  g_wIdleWait100Ms++;
   \       0x9A   0x....             LDR      R0,??DataTable11_11
   \       0x9C   0x8801             LDRH     R1,[R0, #+0]
   \       0x9E   0x1C49             ADDS     R1,R1,#+1
   \       0xA0   0x8001             STRH     R1,[R0, #+0]
   1177                  if (g_wDlyMaxTime <= g_wIdleWait100Ms)
   \       0xA2   0x8800             LDRH     R0,[R0, #+0]
   \       0xA4   0x....             LDR      R1,??DataTable11_12
   \       0xA6   0x8809             LDRH     R1,[R1, #+0]
   \       0xA8   0x4288             CMP      R0,R1
   \       0xAA   0xD30A             BCC      ??LOAD_LoadTask_3
   1178                  {
   1179                      g_cyWorkState = LOAD_EMPTY_STATE;
   \       0xAC   0x2400             MOVS     R4,#+0
   \       0xAE   0x701C             STRB     R4,[R3, #+0]
   1180                      ProductPara.bFlashWEn = FLASH_WR_ENABLE;
   \       0xB0   0x....             LDR      R5,??DataTable11_14
   \       0xB2   0x2001             MOVS     R0,#+1
   \       0xB4   0x7028             STRB     R0,[R5, #+0]
   1181                      I2C1_WNBytesMul3T(EEPROM_ADDRESS, LOAD_WORK_STATE, 1,  &g_cyWorkState);
   \       0xB6   0x2201             MOVS     R2,#+1
   \       0xB8   0x213C             MOVS     R1,#+60
   \       0xBA   0x20A0             MOVS     R0,#+160
   \       0xBC   0x....'....        BL       I2C1_WNBytesMul3T
   1182                      ProductPara.bFlashWEn = FLASH_WR_DISABLE;
   \       0xC0   0x702C             STRB     R4,[R5, #+0]
   1183                  }
   1184              }
   1185          }
   \                     ??LOAD_LoadTask_3: (+1)
   \                     ??LOAD_LoadTask_1: (+1)
   \       0xC2   0xBD31             POP      {R0,R4,R5,PC}    ;; return

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable2:
   \        0x0   0x....'....        DC32     RunVar

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable2_1:
   \        0x0   0x....'....        DC32     g_cyFifoCnt

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable2_2:
   \        0x0   0x....'....        DC32     g_cyCurrentStateCnt

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable2_3:
   \        0x0   0x....'....        DC32     g_cyCheckCnt

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable2_4:
   \        0x0   0x....'....        DC32     g_cyStudyState

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable2_5:
   \        0x0   0x0000'FFFF        DC32     0xffff

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable2_6:
   \        0x0   0x....'....        DC32     g_wEmptyBuffer

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable2_7:
   \        0x0   0x....'....        DC32     g_wEmptyValue

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable2_8:
   \        0x0   0x....'....        DC32     g_wFullBuffer

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable2_9:
   \        0x0   0x....'....        DC32     g_cyShovelFlag

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable2_10:
   \        0x0   0x....'....        DC32     g_cyShovelDTime

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable2_11:
   \        0x0   0x....'....        DC32     g_wCheckBuffer

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable2_12:
   \        0x0   0x....'....        DC32     g_wLoadADBuffer

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable2_13:
   \        0x0   0x....'....        DC32     g_cyVarianceFlag

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable2_14:
   \        0x0   0x....'....        DC32     g_fVarianceValue

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable2_15:
   \        0x0   0x9999'999A        DC32     0x9999999A,0x3FD99999

   \              0x3FD9'9999

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable2_16:
   \        0x0   0x....'....        DC32     g_wFullValue

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable2_17:
   \        0x0   0x....'....        DC32     g_cyShovelWaitCnt

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable3:
   \        0x0   0x....'....        DC32     g_cyCtrlFlag

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable3_1:
   \        0x0   0x....'....        DC32     g_cyElState

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable3_2:
   \        0x0   0x....'....        DC32     g_cyPbState

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable3_3:
   \        0x0   0x....'....        DC32     g_cyCarState

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable3_4:
   \        0x0   0x....'....        DC32     g_cyFifoCnt

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable3_5:
   \        0x0   0x....'....        DC32     g_cyShovelFlag

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable3_6:
   \        0x0   0x....'....        DC32     g_cyVarianceFlag

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable3_7:
   \        0x0   0x....'....        DC32     g_cyCheckCnt

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable3_8:
   \        0x0   0x....'....        DC32     g_cyCurrentShovelNum

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable3_9:
   \        0x0   0x....'....        DC32     g_cyStudyState

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable3_10:
   \        0x0   0x....'....        DC32     g_cyRecordShovelNum

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable3_11:
   \        0x0   0x....'....        DC32     g_wFullValue

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable3_12:
   \        0x0   0x....'....        DC32     g_wEmptyValue

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable3_13:
   \        0x0   0x41C8'0000        DC32     0x41c80000

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable3_14:
   \        0x0   0x....'....        DC32     RunVar

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable3_15:
   \        0x0   0x4040'0000        DC32     0x40400000

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable3_16:
   \        0x0   0x447A'0000        DC32     0x447a0000

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable3_17:
   \        0x0   0x4396'0000        DC32     0x43960000

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable3_18:
   \        0x0   0x....'....        DC32     ProductPara

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable3_19:
   \        0x0   0x....'....        DC32     g_cyCurrentStateCnt

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable3_20:
   \        0x0   0x....'....        DC32     g_wCurrentStateBuffer

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable3_21:
   \        0x0   0x42C8'0001        DC32     0x42c80001

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable3_22:
   \        0x0   0x0000'05DD        DC32     0x5dd

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable3_23:
   \        0x0   0x....'....        DC32     g_wEmptyBuffer

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable3_24:
   \        0x0   0x3FE0'0000        DC32     0x3fe00000

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable4:
   \        0x0   0x....'....        DC32     g_cyCarState

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable4_1:
   \        0x0   0x....'....        DC32     g_wIdleWait100Ms

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable4_2:
   \        0x0   0x....'....        DC32     ProductPara+0x3

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable4_3:
   \        0x0   0x....'....        DC32     g_cyVarianceFlag

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable4_4:
   \        0x0   0x....'....        DC32     g_cyShovelFlag

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable4_5:
   \        0x0   0x....'....        DC32     g_cyExitFlag

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable4_6:
   \        0x0   0x3333'3333        DC32     0x33333333,0x3FEB3333

   \              0x3FEB'3333

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable4_7:
   \        0x0   0x....'....        DC32     g_cyCheckFullFlag

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable4_8:
   \        0x0   0x....'....        DC32     g_cyRunFullCnt

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable4_9:
   \        0x0   0x....'....        DC32     g_cyFifoCnt

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable4_10:
   \        0x0   0x....'....        DC32     g_wFifoBuffer

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable4_11:
   \        0x0   0x....'....        DC32     g_wEmptyValue

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable4_12:
   \        0x0   0x....'....        DC32     g_wFullValue

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable5:
   \        0x0   0x....'....        DC32     g_cyCheckCnt

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable5_1:
   \        0x0   0x....'....        DC32     RunVar

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable5_2:
   \        0x0   0x....'....        DC32     g_cyCurrentShovelNum

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable5_3:
   \        0x0   0x....'....        DC32     g_cyStudyState

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable5_4:
   \        0x0   0x....'....        DC32     g_cyRecordShovelNum

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable5_5:
   \        0x0   0x41C8'0000        DC32     0x41c80000

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable5_6:
   \        0x0   0x4040'0000        DC32     0x40400000

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable5_7:
   \        0x0   0x447A'0000        DC32     0x447a0000

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable5_8:
   \        0x0   0x....'....        DC32     g_cyCtrlFlag

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable5_9:
   \        0x0   0x....'....        DC32     g_cyElState

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable5_10:
   \        0x0   0x....'....        DC32     g_cyPbState

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable5_11:
   \        0x0   0x....'....        DC32     g_wCheckBuffer

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable6:
   \        0x0   0x....'....        DC32     g_cyUnLoadDataCnt

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable6_1:
   \        0x0   0x....'....        DC32     g_wUnLoadBuffer

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable6_2:
   \        0x0   0x....'....        DC32     g_cyCUBuffer

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable6_3:
   \        0x0   0x3333'3333        DC32     0x33333333,0x3FD33333

   \              0x3FD3'3333

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable6_4:
   \        0x0   0x9999'999A        DC32     0x9999999A,0x3FC99999

   \              0x3FC9'9999

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable6_5:
   \        0x0   0x....'....        DC32     g_wOldUnLoadValue

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable6_6:
   \        0x0   0x....'....        DC32     g_wEmptyValue

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable6_7:
   \        0x0   0x....'....        DC32     g_wFullValue

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable7:
   \        0x0   0x....'....        DC32     g_wUnloadCnt

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable7_1:
   \        0x0   0x....'....        DC32     g_cyExitFlag

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable7_2:
   \        0x0   0x....'....        DC32     g_cyCurrentStateCnt

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable7_3:
   \        0x0   0x....'....        DC32     g_wCurrentStateBuffer

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable7_4:
   \        0x0   0x42C8'0001        DC32     0x42c80001

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable7_5:
   \        0x0   0x....'....        DC32     g_cyStudyState

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable7_6:
   \        0x0   0x....'....        DC32     g_wFullBuffer

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable7_7:
   \        0x0   0x3FE0'0000        DC32     0x3fe00000

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable8:
   \        0x0   0x....'....        DC32     g_cyFifiCntRun

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable8_1:
   \        0x0   0x....'....        DC32     g_wFifoBuffer

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable8_2:
   \        0x0   0x....'....        DC32     g_wLoadADBuffer

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable8_3:
   \        0x0   0x4396'0001        DC32     0x43960001

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable8_4:
   \        0x0   0x....'....        DC32     g_cyRunUnLoadDataCnt

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable8_5:
   \        0x0   0x....'....        DC32     g_wUnLoadBuffer

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable8_6:
   \        0x0   0x....'....        DC32     g_wEmptyValue

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable8_7:
   \        0x0   0x....'....        DC32     g_wFullValue

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable8_8:
   \        0x0   0x3333'3333        DC32     0x33333333,0x3FD33333

   \              0x3FD3'3333

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable8_9:
   \        0x0   0x9999'999A        DC32     0x9999999A,0x3FC99999

   \              0x3FC9'9999

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable8_10:
   \        0x0   0x....'....        DC32     ProductPara+0x3

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable8_11:
   \        0x0   0x....'....        DC32     g_cyRunUnloadCnt

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable9:
   \        0x0   0x....'....        DC32     g_cyCheckFullFlag

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable9_1:
   \        0x0   0x....'....        DC32     g_cyRunFullCnt

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable9_2:
   \        0x0   0x....'....        DC32     g_wRunFull

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable9_3:
   \        0x0   0x3333'3333        DC32     0x33333333,0x3FEB3333

   \              0x3FEB'3333

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable10:
   \        0x0   0x....'....        DC32     RunVar

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable10_1:
   \        0x0   0x....'....        DC32     g_cyCarState

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable10_2:
   \        0x0   0x....'....        DC32     g_cyFifoCnt

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable10_3:
   \        0x0   0x....'....        DC32     g_wUnloadCnt

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable10_4:
   \        0x0   0x....'....        DC32     g_cyCheckCnt

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable10_5:
   \        0x0   0x....'....        DC32     g_cyUnLoadDataCnt

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable10_6:
   \        0x0   0x....'....        DC32     g_cyCUBuffer

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable10_7:
   \        0x0   0x....'....        DC32     g_cyExitFlag

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable10_8:
   \        0x0   0x....'....        DC32     g_cyCurrentShovelNum

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable10_9:
   \        0x0   0x....'....        DC32     g_cyRecordShovelNum

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable10_10:
   \        0x0   0x....'....        DC32     ProductPara+0x3

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable10_11:
   \        0x0   0x....'....        DC32     g_cyCurrentStateCnt

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable10_12:
   \        0x0   0x....'....        DC32     g_wIdleWait100Ms

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable10_13:
   \        0x0   0x....'....        DC32     g_cyFifiCntRun

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable10_14:
   \        0x0   0x....'....        DC32     g_cyRunUnLoadDataCnt

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable10_15:
   \        0x0   0x....'....        DC32     g_cyRunUnloadCnt

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable10_16:
   \        0x0   0x....'....        DC32     g_wFifoBuffer

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable11:
   \        0x0   0x42C8'0001        DC32     0x42c80001

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable11_1:
   \        0x0   0x....'....        DC32     g_wEmptyValue

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable11_2:
   \        0x0   0x....'....        DC32     g_wCurrentStateBuffer

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable11_3:
   \        0x0   0x....'....        DC32     g_cyCheckFullFlag

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable11_4:
   \        0x0   0x....'....        DC32     g_wFullValue

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable11_5:
   \        0x0   0x3333'3333        DC32     0x33333333,0x3FEB3333

   \              0x3FEB'3333

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable11_6:
   \        0x0   0x....'....        DC32     g_wLoadADCnt

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable11_7:
   \        0x0   0x....'....        DC32     g_wLoadADBuffer

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable11_8:
   \        0x0   0x....'....        DC32     RunVar

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable11_9:
   \        0x0   0x....'....        DC32     g_cyUnLoadDataCnt

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable11_10:
   \        0x0   0x....'....        DC32     g_cyCUBuffer

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable11_11:
   \        0x0   0x....'....        DC32     g_wIdleWait100Ms

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable11_12:
   \        0x0   0x....'....        DC32     g_wDlyMaxTime

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable11_13:
   \        0x0   0x....'....        DC32     g_cyWorkState

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable11_14:
   \        0x0   0x....'....        DC32     ProductPara+0x3
   1186          
   1187          

   Maximum stack usage in bytes:

   .cstack Function
   ------- --------
      32   GetVariance
        32   -> __aeabi_fadd
        32   -> __aeabi_fdiv
        32   -> __aeabi_fmul
        32   -> __aeabi_fsub
        32   -> __aeabi_i2f
        32   -> __aeabi_ui2f
      24   LOAD_CheckFullValue
        24   -> GetVariance
        24   -> LOAD_FifoData
        24   -> LOAD_GetAverage
        24   -> __aeabi_d2f
        24   -> __aeabi_dmul
        24   -> __aeabi_f2d
        24   -> __aeabi_i2f
        24   -> __aeabi_ui2f
        24 __aeabi_cfcmple
        24 __aeabi_cfrcmple
      16   LOAD_CheckInstallShovel
        16   -> GetVariance
        16   -> LOAD_FifoData
        16   -> __aeabi_d2f
        16   -> __aeabi_dmul
        16   -> __aeabi_f2d
        16 __aeabi_cfcmple
      32   LOAD_CheckRunUnload
        32   -> GetVariance
        32   -> LOAD_GetAverage
        32   -> LOAD_HandleSuccessUnload
        32   -> __aeabi_d2iz
        32   -> __aeabi_dadd
        32   -> __aeabi_dmul
        32   -> __aeabi_dsub
        32   -> __aeabi_f2d
        32   -> __aeabi_i2f
        32   -> __aeabi_ui2d
        32 __aeabi_cfrcmple
      32   LOAD_CheckUnload
        32   -> LOAD_FifoData
        32   -> LOAD_GetAverage
        32   -> __aeabi_d2iz
        32   -> __aeabi_dadd
        32   -> __aeabi_dmul
        32   -> __aeabi_dsub
        32   -> __aeabi_f2d
        32   -> __aeabi_i2f
        32   -> __aeabi_ui2d
      16   LOAD_FifoData
      12   LOAD_GetAverage
        12 __aeabi_uidiv
       8   LOAD_GetPar
         8   -> LOAD_GetAverage
      24   LOAD_HandleEmptyTask
        24   -> GetVariance
        24   -> I2C1_WNBytesMul3T
        24   -> LOAD_CheckInstallShovel
        24   -> LOAD_FifoData
        24   -> LOAD_GetAverage
        24   -> __aeabi_d2f
        24   -> __aeabi_dmul
        24   -> __aeabi_f2d
        24   -> __aeabi_f2iz
        24   -> __aeabi_fadd
        24   -> __aeabi_fdiv
        24   -> __aeabi_fmul
        24   -> __aeabi_fsub
        24   -> __aeabi_i2f
        24   -> __aeabi_ui2f
        24 __aeabi_cfcmple
        24 __aeabi_cfrcmple
      24   LOAD_HandleFullTask
        24   -> GetVariance
        24   -> I2C1_WNBytesMul3T
        24   -> LOAD_CheckUnload
        24   -> LOAD_GetAverage
        24   -> LOAD_HandleSuccessUnload
        24   -> __aeabi_d2f
        24   -> __aeabi_dmul
        24   -> __aeabi_f2d
        24   -> __aeabi_i2f
        24   -> __aeabi_ui2f
        24 __aeabi_cfcmple
        24 __aeabi_cfrcmple
      16   LOAD_HandleInFullTask
        16   -> GetVariance
        16   -> LOAD_GetAverage
        16   -> __aeabi_d2f
        16   -> __aeabi_dmul
        16   -> __aeabi_f2d
        16   -> __aeabi_i2f
        16   -> __aeabi_ui2f
        16 __aeabi_cfcmple
        16 __aeabi_cfrcmple
      16   LOAD_HandleInstallTask
        16   -> I2C1_WNBytesMul3T
        16   -> LOAD_CheckInstallShovel
        16   -> LOAD_FifoData
        16   -> __aeabi_d2f
        16   -> __aeabi_dmul
        16   -> __aeabi_f2d
        16   -> __aeabi_fadd
        16   -> __aeabi_fdiv
        16   -> __aeabi_fmul
        16   -> __aeabi_i2f
        16   -> __aeabi_ui2f
        16 __aeabi_cfcmple
      24   LOAD_HandleSuccessUnload
        24   -> GetVariance
        24   -> I2C1_WNBytesMul3T
        24   -> LOAD_FifoData
        24   -> LOAD_GetAverage
        24   -> __aeabi_d2f
        24   -> __aeabi_dmul
        24   -> __aeabi_f2d
        24   -> __aeabi_f2iz
        24   -> __aeabi_fadd
        24   -> __aeabi_fsub
        24   -> __aeabi_i2f
        24   -> __aeabi_ui2f
        24 __aeabi_cfcmple
        24 __aeabi_cfrcmple
      16   LOAD_LoadTask
        16   -> I2C1_WNBytesMul3T
        16   -> LOAD_FifoData
        16   -> LOAD_HandleEmptyTask
        16   -> LOAD_HandleFullTask
        16   -> LOAD_HandleInFullTask
        16   -> LOAD_HandleInstallTask


   Section sizes:

   Bytes  Function/Label
   -----  --------------
       4  ??DataTable10
       4  ??DataTable10_1
       4  ??DataTable10_10
       4  ??DataTable10_11
       4  ??DataTable10_12
       4  ??DataTable10_13
       4  ??DataTable10_14
       4  ??DataTable10_15
       4  ??DataTable10_16
       4  ??DataTable10_2
       4  ??DataTable10_3
       4  ??DataTable10_4
       4  ??DataTable10_5
       4  ??DataTable10_6
       4  ??DataTable10_7
       4  ??DataTable10_8
       4  ??DataTable10_9
       4  ??DataTable11
       4  ??DataTable11_1
       4  ??DataTable11_10
       4  ??DataTable11_11
       4  ??DataTable11_12
       4  ??DataTable11_13
       4  ??DataTable11_14
       4  ??DataTable11_2
       4  ??DataTable11_3
       4  ??DataTable11_4
       8  ??DataTable11_5
       4  ??DataTable11_6
       4  ??DataTable11_7
       4  ??DataTable11_8
       4  ??DataTable11_9
       4  ??DataTable2
       4  ??DataTable2_1
       4  ??DataTable2_10
       4  ??DataTable2_11
       4  ??DataTable2_12
       4  ??DataTable2_13
       4  ??DataTable2_14
       8  ??DataTable2_15
       4  ??DataTable2_16
       4  ??DataTable2_17
       4  ??DataTable2_2
       4  ??DataTable2_3
       4  ??DataTable2_4
       4  ??DataTable2_5
       4  ??DataTable2_6
       4  ??DataTable2_7
       4  ??DataTable2_8
       4  ??DataTable2_9
       4  ??DataTable3
       4  ??DataTable3_1
       4  ??DataTable3_10
       4  ??DataTable3_11
       4  ??DataTable3_12
       4  ??DataTable3_13
       4  ??DataTable3_14
       4  ??DataTable3_15
       4  ??DataTable3_16
       4  ??DataTable3_17
       4  ??DataTable3_18
       4  ??DataTable3_19
       4  ??DataTable3_2
       4  ??DataTable3_20
       4  ??DataTable3_21
       4  ??DataTable3_22
       4  ??DataTable3_23
       4  ??DataTable3_24
       4  ??DataTable3_3
       4  ??DataTable3_4
       4  ??DataTable3_5
       4  ??DataTable3_6
       4  ??DataTable3_7
       4  ??DataTable3_8
       4  ??DataTable3_9
       4  ??DataTable4
       4  ??DataTable4_1
       4  ??DataTable4_10
       4  ??DataTable4_11
       4  ??DataTable4_12
       4  ??DataTable4_2
       4  ??DataTable4_3
       4  ??DataTable4_4
       4  ??DataTable4_5
       8  ??DataTable4_6
       4  ??DataTable4_7
       4  ??DataTable4_8
       4  ??DataTable4_9
       4  ??DataTable5
       4  ??DataTable5_1
       4  ??DataTable5_10
       4  ??DataTable5_11
       4  ??DataTable5_2
       4  ??DataTable5_3
       4  ??DataTable5_4
       4  ??DataTable5_5
       4  ??DataTable5_6
       4  ??DataTable5_7
       4  ??DataTable5_8
       4  ??DataTable5_9
       4  ??DataTable6
       4  ??DataTable6_1
       4  ??DataTable6_2
       8  ??DataTable6_3
       8  ??DataTable6_4
       4  ??DataTable6_5
       4  ??DataTable6_6
       4  ??DataTable6_7
       4  ??DataTable7
       4  ??DataTable7_1
       4  ??DataTable7_2
       4  ??DataTable7_3
       4  ??DataTable7_4
       4  ??DataTable7_5
       4  ??DataTable7_6
       4  ??DataTable7_7
       4  ??DataTable8
       4  ??DataTable8_1
       4  ??DataTable8_10
       4  ??DataTable8_11
       4  ??DataTable8_2
       4  ??DataTable8_3
       4  ??DataTable8_4
       4  ??DataTable8_5
       4  ??DataTable8_6
       4  ??DataTable8_7
       8  ??DataTable8_8
       8  ??DataTable8_9
       4  ??DataTable9
       4  ??DataTable9_1
       4  ??DataTable9_2
       8  ??DataTable9_3
     168  GetVariance
     222  LOAD_CheckFullValue
     290  LOAD_CheckInstallShovel
     262  LOAD_CheckRunUnload
     422  LOAD_CheckUnload
      54  LOAD_FifoData
      46  LOAD_GetAverage
     166  LOAD_GetPar
     694  LOAD_HandleEmptyTask
     400  LOAD_HandleFullTask
     220  LOAD_HandleInFullTask
     338  LOAD_HandleInstallTask
     308  LOAD_HandleSuccessUnload
     196  LOAD_LoadTask
       2  g_cyCUBuffer
       1  g_cyCheckCnt
       1  g_cyCheckFullFlag
       1  g_cyCurrentShovelNum
       1  g_cyCurrentStateCnt
       1  g_cyExitFlag
       1  g_cyFifiCntRun
       1  g_cyFifoCnt
       1  g_cyOverFlag
       1  g_cyRecordShovelNum
       2  g_cyRunFullCnt
       1  g_cyRunUnLoadDataCnt
       1  g_cyRunUnloadCnt
       1  g_cyShovelDTime
       1  g_cyShovelFlag
       1  g_cyShovelWaitCnt
       1  g_cyStudyState
       1  g_cyUnLoadDataCnt
       1  g_cyVarianceFlag
       1  g_cyWorkState
       4  g_fOverValueK
       4  g_fVarianceValue
      20  g_wCheckBuffer
      60  g_wCurrentStateBuffer
       2  g_wDlyMaxTime
      20  g_wEmptyBuffer
       2  g_wEmptyValue
      20  g_wFifoBuffer
      20  g_wFullBuffer
       2  g_wFullValue
       2  g_wIdleWait100Ms
   1'200  g_wLoadADBuffer
       2  g_wLoadADCnt
       2  g_wOldUnLoadValue
       2  g_wRatedValue
      40  g_wRunFull
      20  g_wUnLoadBuffer
       2  g_wUnloadCnt

 
 1'446 bytes in section .bss
 4'346 bytes in section .text
 
 4'346 bytes of CODE memory
 1'446 bytes of DATA memory

Errors: none
Warnings: none
